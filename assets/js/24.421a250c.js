(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1374:function(a,e,t){a.exports=t.p+"assets/img/1.7d307718.png"},1375:function(a,e,t){a.exports=t.p+"assets/img/2.3df7f139.png"},1376:function(a,e,t){a.exports=t.p+"assets/img/3.d7f1e95a.png"},1377:function(a,e,t){a.exports=t.p+"assets/img/4.b73e0c4d.png"},1378:function(a,e,t){a.exports=t.p+"assets/img/6.fe253fa2.png"},1379:function(a,e,t){a.exports=t.p+"assets/img/10.f8e1aa30.png"},1380:function(a,e,t){a.exports=t.p+"assets/img/11.315b35f1.png"},1381:function(a,e,t){a.exports=t.p+"assets/img/12.dc380f8d.png"},1382:function(a,e,t){a.exports=t.p+"assets/img/13.76163702.png"},1383:function(a,e,t){a.exports=t.p+"assets/img/14.db2b7ea4.png"},1384:function(a,e,t){a.exports=t.p+"assets/img/15.6450216f.png"},1385:function(a,e,t){a.exports=t.p+"assets/img/16.faac307a.png"},1386:function(a,e,t){a.exports=t.p+"assets/img/19.ffc6ba0b.png"},1726:function(a,e,t){"use strict";t.r(e);var s=t(34),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[a._v("#")]),a._v(" Table of Contents")]),a._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#virtual-machine"}},[a._v("Virtual Machine")])]),s("li",[s("a",{attrs:{href:"#docker"}},[a._v("Docker")])]),s("li",[s("a",{attrs:{href:"#docker의-장점"}},[a._v("Docker의 장점")])]),s("li",[s("a",{attrs:{href:"#virtual-machine-vs-docker"}},[a._v("Virtual Machine vs. Docker")])]),s("li",[s("a",{attrs:{href:"#설치"}},[a._v("설치")]),s("ul",[s("li",[s("a",{attrs:{href:"#mac-os에-docker-설치"}},[a._v("Mac OS에 Docker 설치")])])])]),s("li",[s("a",{attrs:{href:"#도커-이미지-검색"}},[a._v("도커 이미지 검색")])]),s("li",[s("a",{attrs:{href:"#도커-이미지-다운로드"}},[a._v("도커 이미지 다운로드")])]),s("li",[s("a",{attrs:{href:"#다운받은-도커-이미지-확인"}},[a._v("다운받은 도커 이미지 확인")])]),s("li",[s("a",{attrs:{href:"#도커-컨테이너-생성"}},[a._v("도커 컨테이너 생성")])]),s("li",[s("a",{attrs:{href:"#도커-컨테이너-실행"}},[a._v("도커 컨테이너 실행")])]),s("li",[s("a",{attrs:{href:"#도커-컨테이너-접속하기"}},[a._v("도커 컨테이너 접속하기")]),s("ul",[s("li",[s("a",{attrs:{href:"#docker-attach"}},[a._v("docker attach")])]),s("li",[s("a",{attrs:{href:"#docker-exec-it"}},[a._v("docker exec -it")])]),s("li",[s("a",{attrs:{href:"#docker-run"}},[a._v("docker run")])])])]),s("li",[s("a",{attrs:{href:"#도커-컨테이너-정지"}},[a._v("도커 컨테이너 정지")])]),s("li",[s("a",{attrs:{href:"#도커-컨테이너-목록-상태-확인"}},[a._v("도커 컨테이너 목록, 상태 확인")])]),s("li",[s("a",{attrs:{href:"#도커-컨테이너-삭제"}},[a._v("도커 컨테이너 삭제")])]),s("li",[s("a",{attrs:{href:"#도커-이미지-만들기"}},[a._v("도커 이미지 만들기")])]),s("li",[s("a",{attrs:{href:"#도커-이미지-삭제"}},[a._v("도커 이미지 삭제")])]),s("li",[s("a",{attrs:{href:"#도커-이미지-이름-태그-변경하기"}},[a._v("도커 이미지 이름, 태그 변경하기")])]),s("li",[s("a",{attrs:{href:"#docker-volume"}},[a._v("Docker Volume")]),s("ul",[s("li",[s("a",{attrs:{href:"#호스트-볼륨-공유"}},[a._v("호스트 볼륨 공유")])]),s("li",[s("a",{attrs:{href:"#컨테이너-볼륨-공유"}},[a._v("컨테이너 볼륨 공유")])]),s("li",[s("a",{attrs:{href:"#도커-볼륨"}},[a._v("도커 볼륨")])])])]),s("li",[s("a",{attrs:{href:"#container-registry"}},[a._v("Container Registry")])]),s("li",[s("a",{attrs:{href:"#도커-허브"}},[a._v("도커 허브")]),s("ul",[s("li",[s("a",{attrs:{href:"#도커-허브로-이미지-배포하기"}},[a._v("도커 허브로 이미지 배포하기")])]),s("li",[s("a",{attrs:{href:"#도커-허브에서-이미지-다운받기"}},[a._v("도커 허브에서 이미지 다운받기")])])])]),s("li",[s("a",{attrs:{href:"#ecr"}},[a._v("ECR")]),s("ul",[s("li",[s("a",{attrs:{href:"#ecr에-저장소-생성하기"}},[a._v("ECR에 저장소 생성하기")])]),s("li",[s("a",{attrs:{href:"#iam-사용자-생성하기"}},[a._v("IAM 사용자 생성하기")])]),s("li",[s("a",{attrs:{href:"#aws-cli-설치"}},[a._v("AWS CLI 설치")])]),s("li",[s("a",{attrs:{href:"#이미지-push"}},[a._v("이미지 Push")])]),s("li",[s("a",{attrs:{href:"#이미지-pull"}},[a._v("이미지 Pull")])])])]),s("li",[s("a",{attrs:{href:"#dockerfile-파일"}},[a._v("Dockerfile 파일")]),s("ul",[s("li",[s("a",{attrs:{href:"#docker-build-명령어"}},[a._v("docker build 명령어")])]),s("li",[s("a",{attrs:{href:"#dockerfile-명령어"}},[a._v("Dockerfile 명령어")]),s("ul",[s("li",[s("a",{attrs:{href:"#from"}},[a._v("FROM")])]),s("li",[s("a",{attrs:{href:"#workdir"}},[a._v("WORKDIR")])]),s("li",[s("a",{attrs:{href:"#copy"}},[a._v("COPY")])]),s("li",[s("a",{attrs:{href:"#add"}},[a._v("ADD")])]),s("li",[s("a",{attrs:{href:"#run"}},[a._v("RUN")])]),s("li",[s("a",{attrs:{href:"#arg"}},[a._v("ARG")])]),s("li",[s("a",{attrs:{href:"#env"}},[a._v("ENV")])]),s("li",[s("a",{attrs:{href:"#arg"}},[a._v("ARG")])]),s("li",[s("a",{attrs:{href:"#entrypoint"}},[a._v("ENTRYPOINT")])]),s("li",[s("a",{attrs:{href:"#expose"}},[a._v("EXPOSE")])])])])])])])]),s("p"),a._v(" "),s("h1",{attrs:{id:"docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[a._v("#")]),a._v(" Docker")]),a._v(" "),s("p",[s("code",[a._v("Docker")]),a._v(" 사용법에 대해 정리한다.")]),a._v(" "),s("h2",{attrs:{id:"virtual-machine"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtual-machine"}},[a._v("#")]),a._v(" Virtual Machine")]),a._v(" "),s("p",[a._v("호스트 OS에 가상의 여러 게스트 OS를 가상화하는 기술이다. 제품군에는 "),s("code",[a._v("VirtualBox")]),a._v(", "),s("code",[a._v("VMWare")]),a._v(" 등이 있다.")]),a._v(" "),s("h2",{attrs:{id:"docker-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-2"}},[a._v("#")]),a._v(" Docker")]),a._v(" "),s("p",[s("b",[s("code",[a._v("Docker")])]),a._v("는 호스트 OS에 "),s("code",[a._v("Docker Container")]),a._v("라는 격리된 공간을 제공해주는 컨테이너 가상화 기술이다.")]),a._v(" "),s("h2",{attrs:{id:"docker의-장점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker의-장점"}},[a._v("#")]),a._v(" Docker의 장점")]),a._v(" "),s("ul",[s("li",[a._v("호스트 OS에 "),s("code",[a._v("Docker container")]),a._v("라는 격리된 공간을 제공해주는 컨테이너 가상화 기술")]),a._v(" "),s("li",[s("code",[a._v("Docker Container")]),a._v("를 "),s("code",[a._v("Docker Image")]),a._v("로 빌드하면 도커 엔진이 설치된 어느 곳에든 쉽게 배포할 수 있다.")]),a._v(" "),s("li",[s("code",[a._v("Kubernetes")]),a._v("같은 "),s("code",[a._v("컨테이너 오케스트레이션 기술")]),a._v("과 함께 사용하여 "),s("code",[a._v("MSA(Microservice Architecuture)")]),a._v("를 쉽게 구성할 수 있다.")])]),a._v(" "),s("h2",{attrs:{id:"virtual-machine-vs-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtual-machine-vs-docker"}},[a._v("#")]),a._v(" Virtual Machine vs. Docker")]),a._v(" "),s("p",[a._v("가상머신은 게스트 OS와 하이버바이저를 거쳐 호스트 OS의 커널과 자원을 사용하기 때문에 성능 손실이 발생한다. 반면 Docker는 하이버파이저와 게스트 OS가 없고 도커 엔진만을 거쳐 호스트 OS의 커널과 자원을 사용하며, 호스트 OS에서 프로세스로 동작하기 때문에 속도가 훨씬 빠르다")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1374),alt:""}})]),a._v(" "),s("h2",{attrs:{id:"설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#설치"}},[a._v("#")]),a._v(" 설치")]),a._v(" "),s("p",[a._v("운영체제에 따라 "),s("code",[a._v("Docker")]),a._v("를 설치하는 방법이 다르다.")]),a._v(" "),s("h3",{attrs:{id:"mac-os에-docker-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mac-os에-docker-설치"}},[a._v("#")]),a._v(" Mac OS에 Docker 설치")]),a._v(" "),s("p",[a._v("Mac OS 환경에서는 "),s("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Homebrew"),s("OutboundLink")],1),a._v("로 "),s("code",[a._v("Docker Desktop on Mac")]),a._v("을 쉽게 설치할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ brew install --cask docker \n")])])]),s("p",[a._v("도커 버전을 확인해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker -v\nDocker version 20.10.11, build dea9396\n")])])]),s("p",[s("code",[a._v("LaunchPad")]),a._v("에서도 "),s("code",[a._v("Docker Desktop on Mac")]),a._v("을 확인할 수 있다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1375),alt:""}})]),a._v(" "),s("h2",{attrs:{id:"도커-이미지-검색"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-이미지-검색"}},[a._v("#")]),a._v(" 도커 이미지 검색")]),a._v(" "),s("p",[s("code",[a._v("docker search <IMAGE_NAME>")]),a._v(" 명령어로 도커 이미지를 검색할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker search centos\n")])])]),s("h2",{attrs:{id:"도커-이미지-다운로드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-이미지-다운로드"}},[a._v("#")]),a._v(" 도커 이미지 다운로드")]),a._v(" "),s("p",[s("code",[a._v("docker pull <IMAGE_NAME>")]),a._v("명령어로 도커 이미지를 다운받을 수 있다. "),s("code",[a._v("centos:7")]),a._v(" 이미지를 다운받아보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker pull centos:7\n")])])]),s("h2",{attrs:{id:"다운받은-도커-이미지-확인"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#다운받은-도커-이미지-확인"}},[a._v("#")]),a._v(" 다운받은 도커 이미지 확인")]),a._v(" "),s("p",[s("code",[a._v("docker images")]),a._v(" 명령어로 다운받은 도커 이미지 목록을 확인할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG       IMAGE ID       CREATED        SIZE\ncentos              7         eeb6ee3f44bd   3 months ago   204MB\n")])])]),s("h2",{attrs:{id:"도커-컨테이너-생성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-컨테이너-생성"}},[a._v("#")]),a._v(" 도커 컨테이너 생성")]),a._v(" "),s("p",[s("code",[a._v("docker create --name <CONTAINER> <IMAGE>")]),a._v(" 명령어로 도커 컨테이너를 생성할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create --name my_centos centos:7\n")])])]),s("p",[s("code",[a._v("-i -t")]),a._v(" 옵션을 추가하여 컨테이너를 생성하면 "),s("code",[a._v("docker attach")]),a._v(" 명령어로 컨테이너 내부에 진입할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create -i -t --name my_centos centos:7\n")])])]),s("p",[s("code",[a._v("-d")]),a._v(" 옵션을 추가하면 컨테이너를 생성하면 백그라운드로 실행된다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create -d --name my_centos centos:7\n")])])]),s("p",[a._v("백그라운드로 실행되는 컨테이너에 "),s("code",[a._v("docker attach")]),a._v("로 접속하면 커맨드는 입력할 수 없고 출력되는 로그만 확인할 수 있다.")]),a._v(" "),s("p",[a._v("자세한 실행 옵션은 "),s("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/create/",target:"_blank",rel:"noopener noreferrer"}},[a._v("이 곳"),s("OutboundLink")],1),a._v("에서 확인할 수 있다.")]),a._v(" "),s("h2",{attrs:{id:"도커-컨테이너-실행"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-컨테이너-실행"}},[a._v("#")]),a._v(" 도커 컨테이너 실행")]),a._v(" "),s("p",[s("code",[a._v("docker start <CONTAINER>")]),a._v(" 명령어로 도커 컨테이너를 시작한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ docker start my_centos\n\n$ docker ps -al          \nCONTAINER ID   IMAGE      COMMAND       CREATED          STATUS         PORTS     NAMES\nb5df63051a50   centos:7   "/bin/bash"   28 seconds ago   Up 3 seconds             my_centos\n')])])]),s("h2",{attrs:{id:"도커-컨테이너-접속하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-컨테이너-접속하기"}},[a._v("#")]),a._v(" 도커 컨테이너 접속하기")]),a._v(" "),s("p",[a._v("도커 컨테이너에는 두 가지 명령어로 접속할 수 있다.")]),a._v(" "),s("h3",{attrs:{id:"docker-attach"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-attach"}},[a._v("#")]),a._v(" docker attach")]),a._v(" "),s("p",[s("code",[a._v("docker attach <CONTAINER_NAME>")]),a._v(" 또는 "),s("code",[a._v("docker attach <CONTAINER_ID>")]),a._v("명령어로 컨테이너 내부로 접속할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker attach my_centos\n[root@a9adb823231 /]# \n")])])]),s("p",[a._v("백그라운드로 실행되는 컨테이너에 "),s("code",[a._v("docker attach")]),a._v("로 접속하면 커맨드는 입력할 수 없고 출력되는 로그만 확인할 수 있다.")]),a._v(" "),s("p",[s("code",[a._v("exit")]),a._v("을 입력하여 컨테이너에서 빠져나올 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("[root@a9adb823231 /]# exit \n")])])]),s("p",[a._v("참고로 "),s("code",[a._v("exit")]),a._v("을 사용하여 컨테이너에서 빠져나오면 컨테이너도 종료된다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ docker ps -a\nCONTAINER ID   IMAGE      COMMAND       CREATED         STATUS                       PORTS     NAMES\nb5df63051a50   centos:7   "/bin/bash"   4 minutes ago   Exited (127) 4 seconds ago             my_centos\n')])])]),s("p",[a._v("컨테이너를 종료시키지 않고 빠져나오려면 "),s("code",[a._v("Ctrl + P, Q")]),a._v("를 입력한다. 이를 "),s("code",[a._v("Detach")]),a._v("라고 한다.")]),a._v(" "),s("h3",{attrs:{id:"docker-exec-it"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-exec-it"}},[a._v("#")]),a._v(" docker exec -it")]),a._v(" "),s("p",[s("code",[a._v("docker exec -it <CONTAINER> <SHELL>")]),a._v(" 명령어는 별도의 쉘 세션을 생성하여 컨테이너에 접속한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker exec -it 75ef6d64fead /bin/bash \nbash-5.1# ls\n")])])]),s("p",[s("code",[a._v("docker exec -it")]),a._v(" 명령어로 컨테이너에 접속한 경우 "),s("code",[a._v("exit")]),a._v(" 명령어로 빠져나와도 컨테이너가 종료되지 않는다. 따라서 데몬 컨테이너에 접근하는데 사용할 수 있다.")]),a._v(" "),s("h3",{attrs:{id:"docker-run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-run"}},[a._v("#")]),a._v(" docker run")]),a._v(" "),s("p",[s("code",[a._v("docker run -i -t --name [container_name] [image_name]")]),a._v(" 명령어를 사용하면 도커 이미지 다운, 도커 컨테이너 생성, 시작, 접속을 한 번에 할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker run -i -t --name my_centos ubuntu:14.04\nroot@bdccae5606a1:/#\n")])])]),s("h2",{attrs:{id:"도커-컨테이너-정지"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-컨테이너-정지"}},[a._v("#")]),a._v(" 도커 컨테이너 정지")]),a._v(" "),s("p",[s("code",[a._v("docker stop <container_name>")]),a._v(" 명령어를 사용하면 도커 컨테이너를 정지할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker stop my_centos\n")])])]),s("h2",{attrs:{id:"도커-컨테이너-목록-상태-확인"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-컨테이너-목록-상태-확인"}},[a._v("#")]),a._v(" 도커 컨테이너 목록, 상태 확인")]),a._v(" "),s("p",[s("code",[a._v("docker ps")]),a._v("명령어로 도커 컨테이너 목록을 확인할 수 있다. 어떤 옵션도 추가하지 않으면 실행 중인 컨테이너 목록만 출력된다. 정지된 컨테이너 목록까지 확인하려면 "),s("code",[a._v("-a")]),a._v(" 옵션을 추가한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ docker ps -a\nCONTAINER ID   IMAGE      COMMAND       CREATED         STATUS    PORTS     NAMES\nb5df63051a50   centos:7   "/bin/bash"   7 seconds ago   Created             my_centos\n')])])]),s("p",[s("code",[a._v("STATUS")]),a._v("는 컨테이너의 상태를 나타내며 다음 값들을 가질 수 있다.")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("Created")]),a._v(": 컨테이너가 생성되었으나 한번도 실행된 적이 없는 상태")]),a._v(" "),s("li",[s("code",[a._v("Up")]),a._v(": 실행 중")]),a._v(" "),s("li",[s("code",[a._v("Exited")]),a._v(": 종료된 상태")]),a._v(" "),s("li",[s("code",[a._v("Pause")]),a._v(": 일시 중지된 상태")])]),a._v(" "),s("h2",{attrs:{id:"도커-컨테이너-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-컨테이너-삭제"}},[a._v("#")]),a._v(" 도커 컨테이너 삭제")]),a._v(" "),s("p",[s("code",[a._v("docker rm <container_name>")]),a._v(" 명령어를 사용하면 도커 컨테이너를 삭제할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker rm my_centos\n")])])]),s("p",[s("code",[a._v("docker container prune")]),a._v(" 명령어는 모든 도커 컨테이너를 삭제한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker container prune\n")])])]),s("h2",{attrs:{id:"도커-이미지-만들기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-이미지-만들기"}},[a._v("#")]),a._v(" 도커 이미지 만들기")]),a._v(" "),s("p",[s("code",[a._v("docker commit -a <AUTHOR> -m <MESSAGE> <ORIGINAL_IMAGE> <COPIED_CONTAINER>:<TAG>")]),a._v("명령어를 사용하면 도커 컨테이너를 빌드하여 도커 이미지를 생성할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG       IMAGE ID       CREATED         SIZE\noriginal_image      3.1     0903d3cdd37e   12 months ago   211MB\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ docker commit -a "yologger" -m "This is message" original_image copied_image:0.0.1\n')])])]),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG     IMAGE ID       CREATED         SIZE\noriginal_image      3.1     0903d3cdd37e   12 months ago   211MB\ncopied_image        0.1     0903d3cdd37e   4 seconds ago   211MB\n")])])]),s("h2",{attrs:{id:"도커-이미지-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-이미지-삭제"}},[a._v("#")]),a._v(" 도커 이미지 삭제")]),a._v(" "),s("p",[s("code",[a._v("docker image rmi")]),a._v(" 명령어로 이미지를 삭제할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG     IMAGE ID       CREATED         SIZE\noriginal_image      3.1     0903d3cdd37e   12 months ago   211MB\ncopied_image        0.1     0903d3cdd37e   4 seconds ago   211MB\n\n$ docker rmi copied_image:0.1\n\n$ docker images\nREPOSITORY          TAG     IMAGE ID       CREATED         SIZE\noriginal_image      3.1     0903d3cdd37e   12 months ago   211MB\n")])])]),s("p",[a._v("도커 이미지가 도커 컨테이너로 사용 중이라면 컨테이너를 먼저 삭제해야한다.")]),a._v(" "),s("h2",{attrs:{id:"도커-이미지-이름-태그-변경하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-이미지-이름-태그-변경하기"}},[a._v("#")]),a._v(" 도커 이미지 이름, 태그 변경하기")]),a._v(" "),s("p",[s("code",[a._v("docker tag <기존이미지명:기존태그명> <새로운이미지명:새로운태그명>")]),a._v("명령어로 이미지 이름과 태그를 변경할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG     IMAGE ID       CREATED         SIZE\noriginal_image      3.1     0903d3cdd37e   12 months ago   211MB\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker tag copied_image:0.1 new_image:0.1\n")])])]),s("p",[a._v("기존 이미지가 사라지는 것은 아니며, 새로운 이미지가 생성된다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG     IMAGE ID       CREATED         SIZE\noriginal_image      3.1     0903d3cdd37e   12 months ago   211MB\nnew_image           0.1     eeb6ee3f44bd   4 seconds ago   211MB\n")])])]),s("h2",{attrs:{id:"docker-volume"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-volume"}},[a._v("#")]),a._v(" Docker Volume")]),a._v(" "),s("p",[a._v("도커 컨테이너는 내부 파일시스템에 데이터를 저장할 수 있다. 그러나 이 파일시스템은 컨테이너가 삭제되었을 때 함께 사라진다. "),s("code",[a._v("도커 볼륨(Docker Volume)")]),a._v("은 컨테이너에 종속되지 않는 저장소를 제공한다.")]),a._v(" "),s("p",[a._v("도커 볼륨은 세 가지 종류가 있다.")]),a._v(" "),s("ul",[s("li",[a._v("호스트 볼륨 공유")]),a._v(" "),s("li",[a._v("컨테이너 볼륨 공유")]),a._v(" "),s("li",[a._v("도커 볼륨")])]),a._v(" "),s("h3",{attrs:{id:"호스트-볼륨-공유"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#호스트-볼륨-공유"}},[a._v("#")]),a._v(" 호스트 볼륨 공유")]),a._v(" "),s("p",[a._v("도커 컨테이너는 호스트의 볼륨을 공유할 수 있다. 도커 컨테이너를 생성할 때 "),s("code",[a._v("-v")]),a._v(" 또는 "),s("code",[a._v("--volume")]),a._v(" 옵션으로 호스트의 볼륨과 컨테이너의 볼륨을 바인딩할 수 있다.")]),a._v(" "),s("p",[a._v("우선 호스트 OS에 "),s("code",[a._v("mydata")]),a._v(" 디렉토리를 생성하자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ mkdir mydata\n\n$ cd mydata\n\n$ pwd\n/Users/yologger/mydata\n")])])]),s("p",[a._v("이제 호스트 OS의 디렉토리를 공유하는 Ubuntu 컨테이너를 생성해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create -i -t \\\n--name my_container \\\n-v /Users/yologger/mydata:/mydata \\\nubuntu:14.04\n")])])]),s("p",[a._v("위 명령어는 호스트 파일시스템의 "),s("code",[a._v("/Users/yologger/mydata")]),a._v("를 도커 컨테이너 파일시스템 "),s("code",[a._v("/mydata")]),a._v("과 바인딩한다. 도커 컨테이너에 "),s("code",[a._v("/mydata")]),a._v(" 디렉토리가 없다면 자동으로 생성된다.")]),a._v(" "),s("p",[a._v("이제 도커 컨테이너 내부에 접속하여 "),s("code",[a._v("/mydata")]),a._v(" 디렉토리가 존재하는지 확인해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker start my_container\n\n$ docker attach my_container\n\nroot@308220530da1:/# ls\nmydata \n...\n")])])]),s("p",[a._v("도커 컨테이너에도 "),s("code",[a._v("mydata")]),a._v(" 디렉토리가 생성된 것을 확인할 수 있다. 이제 이 디렉토리 안에 파일을 생성해본다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('root@308220530da1:/# cd mydata\n\nroot@308220530da1:/mydata# echo "Hello world" > hello.txt\n')])])]),s("p",[a._v("도커 컨테이너에서 빠져나와 호스트 OS의 "),s("code",[a._v("/Users/yologger/mydata")]),a._v("를 확인해본다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ ls\nhello.txt\n")])])]),s("h3",{attrs:{id:"컨테이너-볼륨-공유"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-볼륨-공유"}},[a._v("#")]),a._v(" 컨테이너 볼륨 공유")]),a._v(" "),s("p",[a._v("지금까지 "),s("code",[a._v("-v")]),a._v(" 옵션으로 볼륨을 사용하는 컨테이너를 생성했다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create -i -t \\\n--name my_container \\\n-v /Users/yologger/mydata:/mydata \\\nubuntu:14.04\n")])])]),s("p",[s("code",[a._v("--volumes-from")]),a._v(" 옵션을 사용하면 이미 볼륨을 사용하는 다른 컨테이너의 볼륨을 공유할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create -i -t \\\n--name your_container \\\n--volumes-from my_container \\\nubuntu:14.04\n")])])]),s("p",[a._v("이제 "),s("code",[a._v("my_container")]),a._v("와 "),s("code",[a._v("your_container")]),a._v("는 호스트의 "),s("code",[a._v("/Users/yologger/mydata:/mydata")]),a._v(" 디렉토리를 공유하게 된다. "),s("code",[a._v("your_container")]),a._v("에서도 "),s("code",[a._v("/mydata")]),a._v(" 디렉토리를 확인할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker start your_container\n\n$ docker attach your_container\n\nroot@6c256b3cb679:/# ls\nmydata\n...\n\nroot@6c256b3cb679:/# cat /mydata/hello.txt\nHello World\n")])])]),s("h3",{attrs:{id:"도커-볼륨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-볼륨"}},[a._v("#")]),a._v(" 도커 볼륨")]),a._v(" "),s("p",[s("code",[a._v("도커 볼륨")]),a._v("은 도커 엔진이 직접 관리하는 볼륨이다. "),s("code",[a._v("docker volume")]),a._v(" 명령어로 도커 볼륨을 관리할 수 있다.")]),a._v(" "),s("p",[s("code",[a._v("docker volume create <볼륨 이름>")]),a._v(" 명령어로 볼륨을 생성할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker volume create my_volume\n")])])]),s("p",[s("code",[a._v("docker volume ls")]),a._v(" 명령어로 볼륨 목록을 조회할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker volume ls\nDRIVER    VOLUME NAME\nlocal     my_volume\n...\n")])])]),s("p",[s("code",[a._v("docker inspect volume <볼륨 이름>")]),a._v(" 명령어로 호스트 OS에서 볼륨이 실제로 저장되는 위치를 확인할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ docker inspect --type volume my_volume\n[\n    {\n        "CreatedAt": "2022-05-05T04:08:30Z",\n        "Driver": "local",\n        "Labels": {},\n        "Mountpoint": "/var/lib/docker/volumes/my_volume/_data",\n        "Name": "my_volume",\n        "Options": {},\n        "Scope": "local"\n    }\n]\n')])])]),s("p",[a._v("이제 볼륨을 사용하는 컨테이너를 생성해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker create -i -t \\\n--name my_container \\\n-v my_volume:/mydata \\\nubuntu:14.04\n")])])]),s("p",[a._v("도커 볼륨과 바인딩 되었는지 확인해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker start my_container\nmy_container\n\n$ docker attach my_container\n\nroot@248ff308623a:/# ls \nmydata\n...\n")])])]),s("p",[s("code",[a._v("docker volume rm <볼륨 이름>")]),a._v(" 명령어로 볼륨을 삭제할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker volume rm my_volume\n")])])]),s("h2",{attrs:{id:"container-registry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#container-registry"}},[a._v("#")]),a._v(" Container Registry")]),a._v(" "),s("p",[s("code",[a._v("컨테이너 레지스트리(Container Registery)")]),a._v("는 도커 이미지를 저장할 수 있는 저장소다. 저장소를 원격 서버에 구축할 수도 있고 온프레미스 서버에 구축할 수도 있다. 대표적인 컨테이너 레지스트리는 다음과 같다.")]),a._v(" "),s("ul",[s("li",[a._v("Docker Hub")]),a._v(" "),s("li",[a._v("AWS ECR (Elastic Container Registry)")]),a._v(" "),s("li",[a._v("GCR (Google Container Registry)")]),a._v(" "),s("li",[a._v("GHCR (GitHub Container Registry)")])]),a._v(" "),s("h2",{attrs:{id:"도커-허브"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-허브"}},[a._v("#")]),a._v(" 도커 허브")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("도커 허브(Docker Hub)"),s("OutboundLink")],1),a._v("는 도커 이미지를 저장할 수 있는 원격 저장소다. 도커 허브는 크게 세 가지의 저장소를 제공한다.")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("Public repository")]),a._v(": 공개 원격 저장소, 무료 플랜 시 무제한 사용 가능하다.")]),a._v(" "),s("li",[s("code",[a._v("Private repository")]),a._v(": 비공개 원격 저장소, 무료 플랜 시 1개를 무료로 사용할 수 있다.")]),a._v(" "),s("li",[s("code",[a._v("Private registry")]),a._v(": 개인 서버에 구축하는 저장소")])]),a._v(" "),s("p",[a._v("저장소에 따라 가격 정책이 다르며, "),s("a",{attrs:{href:"https://hub.docker.com/billing/plan/update",target:"_blank",rel:"noopener noreferrer"}},[a._v("이 곳"),s("OutboundLink")],1),a._v("에서 확인할 수 있다.")]),a._v(" "),s("h3",{attrs:{id:"도커-허브로-이미지-배포하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-허브로-이미지-배포하기"}},[a._v("#")]),a._v(" 도커 허브로 이미지 배포하기")]),a._v(" "),s("p",[s("code",[a._v("Docker Hub")]),a._v("의 "),s("code",[a._v("Repository")]),a._v("를 사용하면 도커 이미지를 배포할 수 있다. "),s("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("이 곳"),s("OutboundLink")],1),a._v("에 접속하여 회원가입 후 "),s("code",[a._v("Repository > Create Repository")]),a._v("를 클릭한다. 그리고 "),s("code",[a._v("Repository")]),a._v(" 이름을 입력하고 Repository를 생성한다.")]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),s("p",[a._v("Repository의 이름은 이미지의 이름과 동일해야한다.")])]),a._v(" "),s("p",[s("img",{attrs:{src:t(1376),alt:""}})]),a._v(" "),s("p",[a._v("생성에 성공하면 Repository 정보를 확인할 수 있다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1377),alt:""}})]),a._v(" "),s("p",[a._v("이제 업로드할 이미지 이름 앞에 "),s("b",[s("u",[a._v("사용자 이름")])]),a._v("을 추가한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker tag test_image:0.1 yologger1013/test_image:0.1\nREPOSITORY                  TAG       IMAGE ID       CREATED          SIZE\ntest_image                  0.1       0903d3cdd37e   41 minutes ago   211MB\nyologger1013/test_image     0.1       0903d3cdd37e   41 minutes ago   211MB\n")])])]),s("p",[a._v("그리고 "),s("code",[a._v("docker login")]),a._v(" 명령어로 도커 허브에 로그인한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker login\nLogin with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.\nUsername: yologger1013\nPassword: \nLogin Succeeded\n\nLogging in with your password grants your terminal complete access to your account. \nFor better security, log in with a limited-privilege personal access token. Learn more at https://docs.docker.com/go/access-tokens/\n")])])]),s("p",[a._v("마지막으로 "),s("code",[a._v("docker push")]),a._v(" 명령어로 이미지를 업로드한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker push yologger1013/test_image:0.1\nThe push refers to repository [docker.io/yologger1013/test_image]\nd4b7a766cea6: Pushed \n83109fa660b2: Mounted from library/ubuntu \n30d3c4334a23: Mounted from library/ubuntu \nf2fa9f4cf8fd: Mounted from library/ubuntu \n0.1: digest: sha256:a7770184b5c0020cf9832e68509957bbca4498a4916c92a453047f184729e7f2 size: 1157\n")])])]),s("p",[a._v("도커 허브에서 푸시한 이미지를 확인할 수 있다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1378),alt:""}})]),a._v(" "),s("h3",{attrs:{id:"도커-허브에서-이미지-다운받기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#도커-허브에서-이미지-다운받기"}},[a._v("#")]),a._v(" 도커 허브에서 이미지 다운받기")]),a._v(" "),s("p",[s("code",[a._v("docker pull")]),a._v(" 명령어로 도커 허브에서 이미지를 다운받을 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker pull yologger1013/test_image:0.1 \n\n$ docker images\nREPOSITORY                TAG       IMAGE ID       CREATED          SIZE\nyologger1013/test_image   0.1       0903d3cdd37e   56 minutes ago   211MB\n")])])]),s("h2",{attrs:{id:"ecr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ecr"}},[a._v("#")]),a._v(" ECR")]),a._v(" "),s("p",[s("code",[a._v("AWS ECR(Elastic Container Registry)")]),a._v("도 도커 이미지를 저장할 수 있는 원격 저장소다.")]),a._v(" "),s("h3",{attrs:{id:"ecr에-저장소-생성하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ecr에-저장소-생성하기"}},[a._v("#")]),a._v(" ECR에 저장소 생성하기")]),a._v(" "),s("p",[a._v("먼저 AWS ECR에서 프라이빗 리포지토리를 생성한다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1379),alt:""}})]),a._v(" "),s("p",[a._v("저장소 이름은 업로드할 이미지와 동일하도록 설정한다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1380),alt:""}})]),a._v(" "),s("h3",{attrs:{id:"iam-사용자-생성하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iam-사용자-생성하기"}},[a._v("#")]),a._v(" IAM 사용자 생성하기")]),a._v(" "),s("p",[s("code",[a._v("기존 정책 직접 연결")]),a._v("을 선택한 후")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1381),alt:""}})]),a._v(" "),s("p",[s("code",[a._v("사용자 이름")]),a._v("을 입력하고 "),s("code",[a._v("프로그래밍 방식 액세스")]),a._v("를 선택한다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1382),alt:""}})]),a._v(" "),s("p",[s("code",[a._v("기존 정책 직접 연결")]),a._v("을 선택하고 "),s("code",[a._v("AmazonEC2ContainerRegistryFullAccess")]),a._v("를 선택한다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1383),alt:""}})]),a._v(" "),s("p",[s("code",[a._v("액세스 키")]),a._v("와 "),s("code",[a._v("비밀 키")]),a._v("를 기억해둔다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1384),alt:""}})]),a._v(" "),s("h3",{attrs:{id:"aws-cli-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws-cli-설치"}},[a._v("#")]),a._v(" AWS CLI 설치")]),a._v(" "),s("p",[a._v("먼저 Homebrew를 사용하여 "),s("code",[a._v("AWS CLI")]),a._v("를 설치한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ brew install awscli\n\n$ aws --version\naws-cli/2.5.8 Python/3.9.12 Darwin/21.4.0 source/x86_64 prompt/off\n")])])]),s("p",[s("code",[a._v("aws configure")]),a._v(" 명령어를 입력한 후 발급 받은 "),s("code",[a._v("액세스 키")]),a._v("와 "),s("code",[a._v("비밀 키")]),a._v("를 입력한다. 네 번째 항목은 입력하지 않아도 된다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws configure\nAWS Access Key ID [None]: <ACCESS_KEY>\nAWS Secret Access Key [None]: <SECRET_KEY>\nDefault region name [None]: <REGION>\nDefault output format [None]: \n")])])]),s("p",[a._v("이제 다음 명령어로 로그인한다. "),s("code",[a._v("Login Succeeded")]),a._v("가 출력되면 로그인에 성공한 것이다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws ecr get-login-password --region <REGION> | docker login --username AWS --password-stdin <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com\nLogin Succeeded\n")])])]),s("p",[s("code",[a._v("AWS_ACCOUNT_ID")]),a._v("는 IAM 콘솔에서 확인할 수 있다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1385),alt:""}})]),a._v(" "),s("h3",{attrs:{id:"이미지-push"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#이미지-push"}},[a._v("#")]),a._v(" 이미지 Push")]),a._v(" "),s("p",[a._v("이제 이미지를 푸시해보자. 우선 이미지 이름을 다음 형식으로 변경해야한다. "),s("u",[a._v("이미지 이름과 저장소 이름이 동일해야한다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker tag <IMAGE>:<TAG> <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/<IMAGE>:<TAG>\n")])])]),s("p",[a._v("이제 "),s("code",[a._v("docker push")]),a._v(" 명령어로 이미지를 푸시할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker push <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/<IMAGE>:<TAG>\n")])])]),s("p",[a._v("저장소에 이미지가 푸시되었다.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1386),alt:""}})]),a._v(" "),s("h3",{attrs:{id:"이미지-pull"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#이미지-pull"}},[a._v("#")]),a._v(" 이미지 Pull")]),a._v(" "),s("p",[a._v("다음 명령어로 이미지를 풀 할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker pull <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/<IMAGE>:<TAG>\n")])])]),s("p",[a._v("쿠버네티스 클러스터가 구축된 노드(Ubuntu Server 20.04 LTS)에서 도커 이미지를 Pull해보자.")]),a._v(" "),s("p",[a._v("가장 먼저 "),s("code",[a._v("aws cli")]),a._v("를 설치한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"\n$ sudo apt install unzip\n$ unzip awscliv2.zip\n$ sudo ./aws/install\n')])])]),s("p",[s("code",[a._v("aws configure")]),a._v(" 명령어로 "),s("code",[a._v("AmazonEC2ContainerRegistryFullAccess")]),a._v(" 권한을 가진 사용자의 액세스 키, 비밀 키, 리전을 입력한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws configure\nAWS Access Key ID [None]: <YOUR_ACCESS_ID>\nAWS Secret Access Key [None]: <YOUR_SECRET_ID>\nDefault region name [None]: <YOUR_REGION>\nDefault output format [None]: \n")])])]),s("p",[a._v("인증 정보를 확인해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws configure list\n      Name                    Value             Type    Location\n      ----                    -----             ----    --------\n   profile                <not set>             None    None\naccess_key     ****************KS4Y shared-credentials-file    \nsecret_key     ****************SNC4 shared-credentials-file    \n    region           ap-northeast-2      config-file    ~/.aws/config\n")])])]),s("p",[a._v("다음 명령어로 키를 확인할 수도 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws configure get aws_access_key_id\n\n$ aws configure get aws_secret_access_key\n")])])]),s("p",[a._v("그 다음 명령어로 로그인한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws ecr get-login-password --region <REGION> | docker login --username AWS --password-stdin <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com\n")])])]),s("p",[a._v("로그인 과정에서 다음 에러가 발생할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock\n")])])]),s("p",[s("code",[a._v("Docker")]),a._v("는 "),s("code",[a._v("/var/run/docker.sock")]),a._v("를 사용하여 ECR과 통신한다. 그런데 현재 리눅스 사용자가 이 파일이 접근할 권한이 없어 발생하는 문제다. 따라서 현재 사용자를 "),s("code",[a._v("docker")]),a._v(" 그룹에 포함시켜준다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ sudo usermod -a -G docker $USER\n")])])]),s("p",[a._v("세션을 다시 연결하고 로그인을 시도해보자. "),s("code",[a._v("Login Succeeded")]),a._v("가 출력되면 로그인에 성공한 것이다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ aws ecr get-login-password --region <REGION> | docker login --username AWS --password-stdin <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com\nLogin Succeeded\n")])])]),s("p",[a._v("이제 다음 명령어로 이미지를 다운받을 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker pull <AWS_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/<IMAGE>:<TAG>\n")])])]),s("h2",{attrs:{id:"dockerfile-파일"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-파일"}},[a._v("#")]),a._v(" Dockerfile 파일")]),a._v(" "),s("p",[a._v("지금까지 다음과 같은 순서로 도커 이미지를 생성했다.")]),a._v(" "),s("ol",[s("li",[a._v("Docker image로 Docker container 생성")]),a._v(" "),s("li",[a._v("Docker container에 접속하여 필요한 어플리케이션 설치")]),a._v(" "),s("li",[s("code",[a._v("docker commit")]),a._v(" 명령어로 이미지 생성")])]),a._v(" "),s("p",[a._v("이러한 과정들을 "),s("b",[s("code",[a._v("Dockerfile")])]),a._v("라는 스크립트 파일에 나열한 후 쉽게 도커 이미지를 생성할 수 있다.")]),a._v(" "),s("p",[a._v("예제를 살펴보자. 베이스가 되는 "),s("code",[a._v("ubuntu:18.04")]),a._v(" 이미지에 "),s("code",[a._v("git")]),a._v("이 설치된 새로운 이미지를 생성할 것이다. 우선 디렉토리를 생성하자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ mkdir my_project\n\n$ cd my_project \n")])])]),s("p",[a._v("그 다음 "),s("code",[a._v("Dockerfile")]),a._v("을 생성한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 베이스가 될 이미지 지정\nFROM ubuntu:18.04\n\n# 패키지 매니저 업데이트\nRUN apt update\n\n# 패키지 매니저로 git 설치\nRUN apt install -y git\n")])])]),s("h3",{attrs:{id:"docker-build-명령어"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-build-명령어"}},[a._v("#")]),a._v(" docker build 명령어")]),a._v(" "),s("p",[a._v("이제 "),s("code",[a._v("docker build -t <IMAGE_NAME>:<TAG> .")]),a._v(" 명령어로 이미지를 생성하자. 마지막 인자로 "),s("code",[a._v("Dockerfile")]),a._v("이 위치하는 현재 디렉토리 "),s("code",[a._v(".")]),a._v("를 전달한다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("div",{staticClass:"highlighted"},[a._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker build -t my_ubuntu_image:0.1 .\n[+] Building 2.2s (8/8) FINISHED                                                                                              \n => [internal] load build definition from Dockerfile                                                                     0.0s\n => => transferring dockerfile: 36B                                                                                      0.0s\n => [internal] load .dockerignore                                                                                        0.0s\n => => transferring context: 2B                                                                                          0.0s\n => [internal] load metadata for docker.io/library/ubuntu:18.04                                                          2.1s\n => [auth] library/ubuntu:pull token for registry-1.docker.io                                                            0.0s\n => [1/3] FROM docker.io/library/ubuntu:18.04@sha256:982d72c16416b09ffd2f71aa381f761422085eda1379dc66b668653607969e38    0.0s\n => CACHED [2/3] RUN apt update                                                                                          0.0s\n => CACHED [3/3] RUN apt install -y git                                                                                  0.0s\n => exporting to image                                                                                                   0.0s\n => => exporting layers                                                                                                  0.0s\n => => writing image sha256:abf23e9807b83b21b052ec8ad3c569c3131b0b73acf49c133fa6b08ffa6d272b                             0.0s\n => => naming to docker.io/library/my_ubuntu_image:0.1        \n")])])]),s("p",[a._v("생성된 이미지를 확인할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ docker images\nREPOSITORY        TAG       IMAGE ID       CREATED          SIZE\nmy_ubuntu_image   0.1       abf23e9807b8   24 minutes ago   197MB\n")])])]),s("p",[a._v("마지막으로 생성한 이미지로 컨테이너를 생성해서 "),s("code",[a._v("git")]),a._v("이 설치되어있는지 확인해보자.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ docker create -i -t --name my_ubuntu_container my_ubuntu_image:0.1\n\n$ docker ps -a\nCONTAINER ID   IMAGE                 COMMAND   CREATED          STATUS    PORTS     NAMES\n92102fed06dd   my_ubuntu_image:0.1   "bash"    14 seconds ago   Created             my_ubuntu_container\n\n$ docker start my_ubuntu_container\n\n$ docker attach my_ubuntu_container\n')])])]),s("p",[s("code",[a._v("git")]),a._v("이 설치된 것을 확인할 수 있다.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("root@1143426a0e96:/# git --version\ngit version 2.17.1\n")])])]),s("h3",{attrs:{id:"dockerfile-명령어"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-명령어"}},[a._v("#")]),a._v(" Dockerfile 명령어")]),a._v(" "),s("h4",{attrs:{id:"from"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#from"}},[a._v("#")]),a._v(" FROM")]),a._v(" "),s("ul",[s("li",[a._v("베이스가 될 이미지.")]),a._v(" "),s("li",[a._v("Dockerfile에 반드시 한번 이상 입력해야한다.")]),a._v(" "),s("li",[a._v("사용하려는 이미지가 없으면 자동으로 Pull한다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("FROM openjdk:8-jdk-alpine   // openjdk 8이 설치된 alpine linux 이미지\n")])])]),s("h4",{attrs:{id:"workdir"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#workdir"}},[a._v("#")]),a._v(" WORKDIR")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("cd")]),a._v("명령어와 동일하다.")]),a._v(" "),s("li",[a._v("디렉토리가 없으면 새로 생성한다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("WORKDIR /app\n")])])]),s("h4",{attrs:{id:"copy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copy"}},[a._v("#")]),a._v(" COPY")]),a._v(" "),s("ul",[s("li",[a._v("Dockerfile이 위치하는 디렉토리에서 이미지 내부로 파일을 복사한다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("// Dockerfile이 위치하는 디렉토리의 app.jar를 컨테이너 내부에 app.jar 라는 이름으로 복사\nCOPY app.jar app.jar\n\n// Dockerfile이 위치하는 디렉토리의 run.sh를 컨테이너 내부에 run.sh 라는 이름으로 복사\nCOPY run.sh run.sh\n")])])]),s("h4",{attrs:{id:"add"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add"}},[a._v("#")]),a._v(" ADD")]),a._v(" "),s("ul",[s("li",[a._v("Dockerfile이 위치하는 디렉토리의 파일을 이미지에 추가")])]),a._v(" "),s("h4",{attrs:{id:"run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[a._v("#")]),a._v(" RUN")]),a._v(" "),s("ul",[s("li",[a._v("컨테이너 내부에서 명령어를 실행한다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("RUN chmod 774 run.sh\n")])])]),s("h4",{attrs:{id:"arg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arg"}},[a._v("#")]),a._v(" ARG")]),a._v(" "),s("ul",[s("li",[a._v("Dockerfile 내에서 빌드 시에 사용하는 변수를 설정한다.")])]),a._v(" "),s("h4",{attrs:{id:"env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[a._v("#")]),a._v(" ENV")]),a._v(" "),s("ul",[s("li",[a._v("이미지에서 런타임에 사용할 환경변수를 지정한다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ENV PROFILE=local\n")])])]),s("ul",[s("li",[a._v("도커 컨테이너 내부에서 환경변수를 설정하는 것과 동일하다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ PROFILE=local\n")])])]),s("h4",{attrs:{id:"arg-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arg-2"}},[a._v("#")]),a._v(" ARG")]),a._v(" "),s("ul",[s("li",[a._v("빌드 시 환경변수를 선언")])]),a._v(" "),s("h4",{attrs:{id:"entrypoint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint"}},[a._v("#")]),a._v(" ENTRYPOINT")]),a._v(" "),s("ul",[s("li",[a._v("컨테이너가 실행될 때마다 실행할 명령어.")]),a._v(" "),s("li",[a._v("Dockerfile에서 한번만 사용할 수 있다.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('// ENTRYPOINT ["명령어", "인자1", "인자2", ...]\nENTRYPOINT ["echo", "Launching App."]\n')])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('ENTRYPOINT ["./run.sh"]\n')])])]),s("h4",{attrs:{id:"expose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expose"}},[a._v("#")]),a._v(" EXPOSE")]),a._v(" "),s("ul",[s("li",[a._v("이미지에서 노출할 포트 지정")])])])}),[],!1,null,null,null);e.default=r.exports}}]);