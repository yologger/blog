(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{1421:function(e,a,t){e.exports=t.p+"assets/img/1.b7fcccab.jpeg"},1741:function(e,a,t){"use strict";t.r(a);var s=t(34),n=Object(s.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[e._v("#")]),e._v(" Table of Contents")]),e._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#mongo-db-환경설정"}},[e._v("Mongo DB 환경설정")]),s("ul",[s("li",[s("a",{attrs:{href:"#설치"}},[e._v("설치")])]),s("li",[s("a",{attrs:{href:"#서비스-시작"}},[e._v("서비스 시작")])]),s("li",[s("a",{attrs:{href:"#서비스-재시작"}},[e._v("서비스 재시작")])]),s("li",[s("a",{attrs:{href:"#서비스-종료"}},[e._v("서비스 종료")])]),s("li",[s("a",{attrs:{href:"#mongo-db-접속"}},[e._v("Mongo DB 접속")])])])]),s("li",[s("a",{attrs:{href:"#mongo-db-사용법"}},[e._v("Mongo DB 사용법")]),s("ul",[s("li",[s("a",{attrs:{href:"#데이터베이스-목록-확인"}},[e._v("데이터베이스 목록 확인")])]),s("li",[s("a",{attrs:{href:"#데이터베이스-생성-사용할-데이터베이스-선택"}},[e._v("데이터베이스 생성, 사용할 데이터베이스 선택")])]),s("li",[s("a",{attrs:{href:"#현재-사용-중인-데이터베이스-출력"}},[e._v("현재 사용 중인 데이터베이스 출력")])]),s("li",[s("a",{attrs:{href:"#데이터베이스-삭제"}},[e._v("데이터베이스 삭제")])])])]),s("li",[s("a",{attrs:{href:"#collection"}},[e._v("Collection")]),s("ul",[s("li",[s("a",{attrs:{href:"#collection-생성"}},[e._v("Collection 생성")])]),s("li",[s("a",{attrs:{href:"#collection-확인"}},[e._v("Collection 확인")])]),s("li",[s("a",{attrs:{href:"#collection-삭제"}},[e._v("Collection 삭제")])])])]),s("li",[s("a",{attrs:{href:"#document-저장"}},[e._v("Document 저장")]),s("ul",[s("li",[s("a",{attrs:{href:"#insertone"}},[e._v("insertOne()")])]),s("li",[s("a",{attrs:{href:"#insertmany"}},[e._v("insertMany()")])])])]),s("li",[s("a",{attrs:{href:"#document-수정"}},[e._v("Document 수정")]),s("ul",[s("li",[s("a",{attrs:{href:"#updateone"}},[e._v("updateOne()")])]),s("li",[s("a",{attrs:{href:"#updatemany"}},[e._v("updateMany()")])]),s("li",[s("a",{attrs:{href:"#update"}},[e._v("update()")])])])]),s("li",[s("a",{attrs:{href:"#document-삭제"}},[e._v("Document 삭제")]),s("ul",[s("li",[s("a",{attrs:{href:"#deleteone"}},[e._v("deleteOne()")])]),s("li",[s("a",{attrs:{href:"#deletemany"}},[e._v("deleteMany()")])])])]),s("li",[s("a",{attrs:{href:"#document-조회"}},[e._v("Document 조회")]),s("ul",[s("li",[s("a",{attrs:{href:"#find"}},[e._v("find()")]),s("ul",[s("li",[s("a",{attrs:{href:"#eq-equal"}},[e._v("eq (equal)")])]),s("li",[s("a",{attrs:{href:"#ne-not-equal"}},[e._v("ne (not equal)")])]),s("li",[s("a",{attrs:{href:"#gt"}},[e._v("gt")])]),s("li",[s("a",{attrs:{href:"#gte"}},[e._v("gte")])]),s("li",[s("a",{attrs:{href:"#lt"}},[e._v("lt")])]),s("li",[s("a",{attrs:{href:"#lte"}},[e._v("lte")])]),s("li",[s("a",{attrs:{href:"#in"}},[e._v("in")])]),s("li",[s("a",{attrs:{href:"#nin"}},[e._v("nin")])]),s("li",[s("a",{attrs:{href:"#and"}},[e._v("and")])]),s("li",[s("a",{attrs:{href:"#or"}},[e._v("or")])])])]),s("li",[s("a",{attrs:{href:"#findone"}},[e._v("findOne()")])])])]),s("li",[s("a",{attrs:{href:"#데이터-타입"}},[e._v("데이터 타입")])]),s("li",[s("a",{attrs:{href:"#id-필드"}},[e._v("_id 필드")])]),s("li",[s("a",{attrs:{href:"#index"}},[e._v("Index")]),s("ul",[s("li",[s("a",{attrs:{href:"#index-조회"}},[e._v("Index 조회")])]),s("li",[s("a",{attrs:{href:"#단일-필드-index-생성"}},[e._v("단일 필드 Index 생성")])]),s("li",[s("a",{attrs:{href:"#복합-필드-index-생성"}},[e._v("복합 필드 Index 생성")])]),s("li",[s("a",{attrs:{href:"#index-삭제"}},[e._v("Index 삭제")])])])]),s("li",[s("a",{attrs:{href:"#정렬"}},[e._v("정렬")])]),s("li",[s("a",{attrs:{href:"#페이징"}},[e._v("페이징")])]),s("li",[s("a",{attrs:{href:"#관계-설정"}},[e._v("관계 설정")]),s("ul",[s("li",[s("a",{attrs:{href:"#임베디드"}},[e._v("임베디드")])]),s("li",[s("a",{attrs:{href:"#참조-reference"}},[e._v("참조(Reference)")])])])]),s("li",[s("a",{attrs:{href:"#사용자-관리"}},[e._v("사용자 관리")]),s("ul",[s("li",[s("a",{attrs:{href:"#사용자-조회"}},[e._v("사용자 조회")])]),s("li",[s("a",{attrs:{href:"#사용자-생성"}},[e._v("사용자 생성")])]),s("li",[s("a",{attrs:{href:"#인증-활성화"}},[e._v("인증 활성화")])]),s("li",[s("a",{attrs:{href:"#사용자-인증"}},[e._v("사용자 인증")])]),s("li",[s("a",{attrs:{href:"#사용자-삭제"}},[e._v("사용자 삭제")])])])]),s("li",[s("a",{attrs:{href:"#mongo-db-cluster-구축"}},[e._v("Mongo DB Cluster 구축")])]),s("li",[s("a",{attrs:{href:"#replication"}},[e._v("Replication")])]),s("li",[s("a",{attrs:{href:"#sharding"}},[e._v("Sharding")])]),s("li",[s("a",{attrs:{href:"#compass"}},[e._v("Compass")])])])]),s("p"),e._v(" "),s("h1",{attrs:{id:"mongo-db"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongo-db"}},[e._v("#")]),e._v(" Mongo DB")]),e._v(" "),s("p",[e._v("기존의 테이블 기반 관계형 데이터베이스 구조가 아닌 "),s("code",[e._v("JSON Document")]),e._v(" 기반의 데이터 모델을 사용하는 NoSQL 데이터베이스다.")]),e._v(" "),s("p",[s("img",{attrs:{src:t(1421),alt:""}})]),e._v(" "),s("p",[s("code",[e._v("Mongo DB")]),e._v("는 다음과 같은 특징을 갖는다.")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("JSON document")]),e._v(" 기반의 NoSQL 데이터베이스")]),e._v(" "),s("li",[e._v("스키마가 없어 저장되는 데이터의 구조가 자유롭다.")]),e._v(" "),s("li",[e._v("외래키 개념이 없어 "),s("code",[e._v("Embedded")]),e._v("방식 또는 "),s("code",[e._v("Reference")]),e._v(" 방식으로 관계를 표현한다.")]),e._v(" "),s("li",[e._v("조인 개념이 없어 어플리케이션 레벨에서 처리해야한다.")])]),e._v(" "),s("h2",{attrs:{id:"mongo-db-환경설정"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongo-db-환경설정"}},[e._v("#")]),e._v(" Mongo DB 환경설정")]),e._v(" "),s("h3",{attrs:{id:"설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#설치"}},[e._v("#")]),e._v(" 설치")]),e._v(" "),s("p",[s("code",[e._v("Mac OS")]),e._v("에서는 "),s("code",[e._v("Homebrew")]),e._v("로 Mongo DB를 설치할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew tap mongodb/brew\n\n$ brew install mongodb-community@4.2\n")])])]),s("h3",{attrs:{id:"서비스-시작"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#서비스-시작"}},[e._v("#")]),e._v(" 서비스 시작")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew services start mongodb-community@4.2 \n")])])]),s("h3",{attrs:{id:"서비스-재시작"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#서비스-재시작"}},[e._v("#")]),e._v(" 서비스 재시작")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew services restart mongodb-community@4.2\n")])])]),s("h3",{attrs:{id:"서비스-종료"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#서비스-종료"}},[e._v("#")]),e._v(" 서비스 종료")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew services stop mongodb-community@4.2\n")])])]),s("h3",{attrs:{id:"mongo-db-접속"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongo-db-접속"}},[e._v("#")]),e._v(" Mongo DB 접속")]),e._v(" "),s("p",[s("code",[e._v("mongo")]),e._v(" 명령어로 Mongo DB에 접속할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ mongo\n> \n")])])]),s("p",[e._v("원격 접속도 가능하다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// mongo [몽고서버_IP]\n$ mongo 192.168.0.1\n")])])]),s("p",[e._v("원격 접속을 하면서 데이터베이스를 선택할 수도 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// mongo [몽고서버 IP]/[데이터베이스 이름]\n$ mongo 192.168.0.1/my_db\n")])])]),s("p",[e._v("몽고 서버에 인증을 설정했다면 아이디와 패스워드를 인자로 전달하여 접속할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// mongo -u [사용자 이름] -p [비밀번호] [몽고서버 IP]/[데이터베이스 이름]\n$ mongo -u user1 -p 1234 192.168.0.1/my_db\n")])])]),s("h2",{attrs:{id:"mongo-db-사용법"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongo-db-사용법"}},[e._v("#")]),e._v(" Mongo DB 사용법")]),e._v(" "),s("h3",{attrs:{id:"데이터베이스-목록-확인"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#데이터베이스-목록-확인"}},[e._v("#")]),e._v(" 데이터베이스 목록 확인")]),e._v(" "),s("p",[s("code",[e._v("show dbs")]),e._v("는 모든 데이터베이스를 출력한다. Mongo DB에 처음 접속하면 세 개의 데이터베이스가 자동으로 생성된다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> show dbs\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\n")])])]),s("h3",{attrs:{id:"데이터베이스-생성-사용할-데이터베이스-선택"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#데이터베이스-생성-사용할-데이터베이스-선택"}},[e._v("#")]),e._v(" 데이터베이스 생성, 사용할 데이터베이스 선택")]),e._v(" "),s("p",[s("code",[e._v("use [데이터베이스 이름]")]),e._v(" 명령어로 사용할 데이터베이스를 선택할 수 있다. 데이터베이스가 없으면 자동으로 생성한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> use my_db\nswitched to db my_db\n")])])]),s("h3",{attrs:{id:"현재-사용-중인-데이터베이스-출력"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#현재-사용-중인-데이터베이스-출력"}},[e._v("#")]),e._v(" 현재 사용 중인 데이터베이스 출력")]),e._v(" "),s("p",[s("code",[e._v("db")]),e._v("는 현재 사용 중인 데이터베이스를 출력한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db\nmy_db\n")])])]),s("h3",{attrs:{id:"데이터베이스-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#데이터베이스-삭제"}},[e._v("#")]),e._v(" 데이터베이스 삭제")]),e._v(" "),s("p",[s("code",[e._v("db.dropDatabase()")]),e._v("로 현재 데이터베이스를 삭제한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.dropDatabase()\n{ "dropped" : "my_db", "ok" : 1 }\n')])])]),s("h2",{attrs:{id:"collection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collection"}},[e._v("#")]),e._v(" Collection")]),e._v(" "),s("p",[s("b",[s("code",[e._v("Collection")])]),e._v("은 관계형 데이터베이스의 "),s("code",[e._v("Table")]),e._v("에 대응된다.")]),e._v(" "),s("h3",{attrs:{id:"collection-생성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collection-생성"}},[e._v("#")]),e._v(" Collection 생성")]),e._v(" "),s("p",[s("code",[e._v('db.createCollection("컬렉션 명")')]),e._v("명령어로 컬렉션을 생성할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.createCollection("member");\n')])])]),s("h3",{attrs:{id:"collection-확인"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collection-확인"}},[e._v("#")]),e._v(" Collection 확인")]),e._v(" "),s("p",[e._v("데이터베이스에 생성된 Collection은 "),s("code",[e._v("show collections")]),e._v("로 확인할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> show collections\nmember\n")])])]),s("h3",{attrs:{id:"collection-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collection-삭제"}},[e._v("#")]),e._v(" Collection 삭제")]),e._v(" "),s("p",[s("code",[e._v("db.[Collection 이름].drop()")]),e._v("으로 Collection을 삭제할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.drop()\ntrue\n")])])]),s("h2",{attrs:{id:"document-저장"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#document-저장"}},[e._v("#")]),e._v(" Document 저장")]),e._v(" "),s("p",[s("b",[s("code",[e._v("Document")])]),e._v("는 RDBMS의 "),s("code",[e._v("Row")]),e._v("에 해당하며, "),s("b",[s("code",[e._v("Field")])]),e._v("는 "),s("code",[e._v("Column")]),e._v("에 해당한다.")]),e._v(" "),s("h3",{attrs:{id:"insertone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insertone"}},[e._v("#")]),e._v(" insertOne()")]),e._v(" "),s("p",[s("code",[e._v("db.<콜렉션이름>.insertOne()")]),e._v(" 메소드로 Document 한 개를 생성할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insertOne({ name: "Paul"})\n\n> db.member.insertOne({ name: "John"})\n')])])]),s("p",[e._v("Mongo DB는 스키마가 정해져있지 않기 때문에 저장되는 데이터 형식이 자유롭다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insertOne({ name: "monica", height: 165.5 , createdAt: Date()})\n\n> db.member.insertOne({ name: "rachel", age: 25, isMarried: false, weight: 60.5 , job: "programmer"})\n')])])]),s("p",[e._v("Document는 다른 객체를 포함할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insertOne({ name: "marry", phone: { name: "iPhone 10", manufacturer: "Apple" } })\n')])])]),s("p",[e._v("Document는 배열을 포함할 수도 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insertOne({ name: "jordan", children: ["ramos", "benzema"] })\n')])])]),s("h3",{attrs:{id:"insertmany"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insertmany"}},[e._v("#")]),e._v(" insertMany()")]),e._v(" "),s("p",[s("code",[e._v("db.<콜렉션이름>.insertMany()")]),e._v(" 메소드로 여러 Document를 한꺼번에 생성할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insertMany([{ name: "messi" }, { name: "ronaldo" }])\n')])])]),s("h2",{attrs:{id:"document-수정"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#document-수정"}},[e._v("#")]),e._v(" Document 수정")]),e._v(" "),s("h3",{attrs:{id:"updateone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updateone"}},[e._v("#")]),e._v(" updateOne()")]),e._v(" "),s("p",[s("code",[e._v("db.<도큐먼트이름>.updateOne()")]),e._v("은 도큐먼트 하나를 수정하는데 사용한다.")]),e._v(" "),s("p",[s("code",[e._v("$set")]),e._v(" 옵션으로 도큐먼트 하나의 특정 필드를 수정할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name : "rachel"}).pretty()\n{\n\t"_id" : ObjectId("62a294c62ab111058535a22f"),\n\t"name" : "rachel",\n\t"age" : 25,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer"\n}\n\n> db.member.updateOne({name: "rachel"}, {$set: {"age": 35}})\n{ "acknowledged" : true, "matchedCount" : 1, "modifiedCount" : 1 }\n\n> db.member.find({name: "rachel"}).pretty()\n{\n\t"_id" : ObjectId("62a294c62ab111058535a22f"),\n\t"name" : "rachel",\n\t"age" : 35,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer"\n}\n')])])]),s("p",[e._v("특정 필드를 추가할 수도 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name: "rachel"}).pretty()\n{\n\t"_id" : ObjectId("62a294c62ab111058535a22f"),\n\t"name" : "rachel",\n\t"age" : 35,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer"\n}\n\n> db.member.updateOne({name: "rachel"}, {$set: {"nation": "USA"}})\n{ "acknowledged" : true, "matchedCount" : 1, "modifiedCount" : 1 }\n\n> db.member.find({name: "rachel"}).pretty()\n{\n\t"_id" : ObjectId("62a294c62ab111058535a22f"),\n\t"name" : "rachel",\n\t"age" : 35,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer",\n\t"nation" : "USA"\n}\n')])])]),s("p",[s("code",[e._v("$unset")]),e._v(" 옵션으로 도큐먼트 하나의 특정 필드를 삭제할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.findOne({"name": "rachel"})\n{\n\t"_id" : ObjectId("62a294c62ab111058535a22f"),\n\t"name" : "rachel",\n\t"age" : 35,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer",\n\t"nation" : "USA"\n}\n\n> db.member.updateOne({"name": "rachel"}, {$unset: {"isMarred": "false"}})\n{ "acknowledged" : true, "matchedCount" : 1, "modifiedCount" : 0 }\n\n> db.member.findOne({"name": "rachel"})\n{\n\t"_id" : ObjectId("62a294c62ab111058535a22f"),\n\t"name" : "rachel",\n\t"age" : 35,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer",\n\t"nation" : "USA"\n}\n')])])]),s("h3",{attrs:{id:"updatemany"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemany"}},[e._v("#")]),e._v(" updateMany()")]),e._v(" "),s("p",[s("code",[e._v("updateMany()")]),e._v("으로 여러 도큐먼트를 수정할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.updateMany({}, {$set: {"isMarred": "false"}})\n{ "acknowledged" : true, "matchedCount" : 10, "modifiedCount" : 10 }\n')])])]),s("h3",{attrs:{id:"update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[e._v("#")]),e._v(" update()")]),e._v(" "),s("p",[s("code",[e._v("update()")]),e._v("으로 기존의 도큐먼트를 다른 도큐먼트로 대체할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name: "Paul"})\n{ "_id" : ObjectId("62a294b22ab111058535a22c"), "name" : "Paul" }\n\n> db.member.update({name: "Paul"}, {name: "Smith"})\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })\n\n> db.member.find({name: "Paul"})\n\n> db.member.find({name: "Smith"})\n{ "_id" : ObjectId("62a294b22ab111058535a22c"), "name" : "Smith" }\n')])])]),s("p",[e._v("물론 "),s("code",[e._v("update()")]),e._v("에서도 "),s("code",[e._v("$set")]),e._v(", "),s("code",[e._v("$unset")]),e._v("을 사용할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({"name": "Smith"})\n{ "_id" : ObjectId("62a294b22ab111058535a22c"), "name" : "Smith", "isMarred" : "false" }\n\n> db.member.update({"name": "Smith"}, {$set: {nation: "England"}})\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })\n\n> db.member.find({"name": "Smith"})\n{ "_id" : ObjectId("62a294b22ab111058535a22c"), "name" : "Smith", "isMarred" : "false", "nation" : "England" }\n\n> db.member.update({"name": "Smith"}, {$unset: {nation: "England"}})\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })\n\n> db.member.find({"name": "Smith"})\n{ "_id" : ObjectId("62a294b22ab111058535a22c"), "name" : "Smith", "isMarred" : "false" }\n')])])]),s("h2",{attrs:{id:"document-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#document-삭제"}},[e._v("#")]),e._v(" Document 삭제")]),e._v(" "),s("h3",{attrs:{id:"deleteone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deleteone"}},[e._v("#")]),e._v(" deleteOne()")]),e._v(" "),s("p",[s("code",[e._v("deleteOne()")]),e._v("으로 조건에 맞는 Document 하나를 삭제할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.deleteOne({name: "messi"});\n')])])]),s("h3",{attrs:{id:"deletemany"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deletemany"}},[e._v("#")]),e._v(" deleteMany()")]),e._v(" "),s("p",[s("code",[e._v("deleteMany()")]),e._v("로 조건에 맞는 Document 여러 개를 삭제할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.deleteMany({nation: "USA"});\n')])])]),s("p",[e._v("모든 도큐먼트를 삭제할 수도 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.deleteMany({})\n")])])]),s("h2",{attrs:{id:"document-조회"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#document-조회"}},[e._v("#")]),e._v(" Document 조회")]),e._v(" "),s("h3",{attrs:{id:"find"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#find"}},[e._v("#")]),e._v(" find()")]),e._v(" "),s("p",[s("code",[e._v("db.콜렉션.find()")]),e._v(" 메소드로 모든 Document를 조회할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find()\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n{ "_id" : ObjectId("625ad77b8d6dabdee5230bef"), "name" : "john" }\n{ "_id" : ObjectId("625adc3d8d6dabdee5230bf6"), "name" : "john" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf0"), "name" : "messi" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf1"), "name" : "ronaldo" }\n{ "_id" : ObjectId("625ad8698d6dabdee5230bf2"), "name" : "monica", "age" : 35, "isMarried" : true, "weight" : 50.5, "createdAt" : "Sat Apr 16 2022 23:53:29 GMT+0900 (KST)" }\n{ "_id" : ObjectId("625ad8ab8d6dabdee5230bf3"), "name" : "rachel", "age" : 25, "isMarried" : false, "weight" : 60.5, "job" : "programmer" }\n{ "_id" : ObjectId("625ada168d6dabdee5230bf4"), "name" : "marry", "phone" : { "name" : "iPhone 10", "manufacturer" : "Apple" } }\n{ "_id" : ObjectId("625ada838d6dabdee5230bf5"), "name" : "jordan", "children" : [ "ramos", "benzema" ] }\n')])])]),s("p",[s("code",[e._v("pretty()")]),e._v("로 데이터를 보기 좋게 출력할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find().pretty()\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n{ "_id" : ObjectId("625ad77b8d6dabdee5230bef"), "name" : "john" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf0"), "name" : "messi" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf1"), "name" : "ronaldo" }\n{\n\t"_id" : ObjectId("625ad8698d6dabdee5230bf2"),\n\t"name" : "monica",\n\t"age" : 35,\n\t"isMarried" : true,\n\t"weight" : 50.5,\n\t"createdAt" : "Sat Apr 16 2022 23:53:29 GMT+0900 (KST)"\n}\n{\n\t"_id" : ObjectId("625ad8ab8d6dabdee5230bf3"),\n\t"name" : "rachel",\n\t"age" : 25,\n\t"isMarried" : false,\n\t"weight" : 60.5,\n\t"job" : "programmer"\n}\n{\n\t"_id" : ObjectId("625ada168d6dabdee5230bf4"),\n\t"name" : "marry",\n\t"phone" : {\n\t\t"name" : "iPhone 10",\n\t\t"manufacturer" : "Apple"\n\t}\n}\n{\n\t"_id" : ObjectId("625ada838d6dabdee5230bf5"),\n\t"name" : "jordan",\n\t"children" : [\n\t\t"ramos",\n\t\t"benzema"\n\t]\n}\n')])])]),s("p",[e._v("다음과 같이 조건을 추가할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({ name: "Paul" })\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n')])])]),s("h4",{attrs:{id:"eq-equal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eq-equal"}},[e._v("#")]),e._v(" eq (equal)")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name: {$eq: "john"}})\n{ "_id" : ObjectId("625ad77b8d6dabdee5230bef"), "name" : "john" }\n{ "_id" : ObjectId("625adc3d8d6dabdee5230bf6"), "name" : "john" }\n')])])]),s("h4",{attrs:{id:"ne-not-equal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ne-not-equal"}},[e._v("#")]),e._v(" ne (not equal)")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name: {$ne: "john"}})\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf0"), "name" : "messi" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf1"), "name" : "ronaldo" }\n// ...\n')])])]),s("h4",{attrs:{id:"gt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gt"}},[e._v("#")]),e._v(" gt")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({age: {$gt: 30}})\n{ "_id" : ObjectId("625ad8698d6dabdee5230bf2"), "name" : "monica", "age" : 35, "isMarried" : true, "weight" : 50.5, "createdAt" : "Sat Apr 16 2022 23:53:29 GMT+0900 (KST)" }\n')])])]),s("h4",{attrs:{id:"gte"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gte"}},[e._v("#")]),e._v(" gte")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find({age: {$gte: 30}})\n")])])]),s("h4",{attrs:{id:"lt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lt"}},[e._v("#")]),e._v(" lt")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find({age: {$lt: 30}})\n")])])]),s("h4",{attrs:{id:"lte"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lte"}},[e._v("#")]),e._v(" lte")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find({age: {$lte: 30}})\n")])])]),s("h4",{attrs:{id:"in"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#in"}},[e._v("#")]),e._v(" in")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name: {$in: ["monica", "paul"]}})\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n{ "_id" : ObjectId("625ad8698d6dabdee5230bf2"), "name" : "monica", "age" : 35, "isMarried" : true, "weight" : 50.5, "createdAt" : "Sat Apr 16 2022 23:53:29 GMT+0900 (KST)" }\n')])])]),s("h4",{attrs:{id:"nin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nin"}},[e._v("#")]),e._v(" nin")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({name: {$nin: ["monica", "paul"]}})\n')])])]),s("h4",{attrs:{id:"and"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#and"}},[e._v("#")]),e._v(" and")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({$and: [{name: "monica"}, {isMarried: true}]})\n{ "_id" : ObjectId("625ad8698d6dabdee5230bf2"), "name" : "monica", "age" : 35, "isMarried" : true, "weight" : 50.5, "createdAt" : "Sat Apr 16 2022 23:53:29 GMT+0900 (KST)" }\n')])])]),s("h4",{attrs:{id:"or"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#or"}},[e._v("#")]),e._v(" or")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.find({$or: [{name: "paul"}, {isMarried: true}]})\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n{ "_id" : ObjectId("625ad8698d6dabdee5230bf2"), "name" : "monica", "age" : 35, "isMarried" : true, "weight" : 50.5, "createdAt" : "Sat Apr 16 2022 23:53:29 GMT+0900 (KST)" }\n')])])]),s("h3",{attrs:{id:"findone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#findone"}},[e._v("#")]),e._v(" findOne()")]),e._v(" "),s("p",[s("code",[e._v("findOne()")]),e._v("는 하나의 Document를 조회한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.findOne({ name: "Paul" }) \n')])])]),s("h2",{attrs:{id:"데이터-타입"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#데이터-타입"}},[e._v("#")]),e._v(" 데이터 타입")]),e._v(" "),s("p",[s("code",[e._v("필드(Field)")]),e._v("에는 기본적으로 "),s("u",[e._v("자바스크립트의 데이터 타입")]),e._v("을 저장할 수 있다. 자바스크립트 외에도 몇 개의 특수한 데이터타입을 저장할 수 있는데 그 중 하나가 각 Document를 구분하기 위한 "),s("code",[e._v("ObjectId")]),e._v("다. 모든 데이터 타입은 "),s("a",{attrs:{href:"https://www.tutorialspoint.com/mongodb/mongodb_datatype.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("이 곳"),s("OutboundLink")],1),e._v("에서 확인할 수 있다.")]),e._v(" "),s("h2",{attrs:{id:"id-필드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#id-필드"}},[e._v("#")]),e._v(" _id 필드")]),e._v(" "),s("p",[e._v("관계형 데이터베이스에는 "),s("code",[e._v("기본 키(primary key)")]),e._v("로 모든 Row를 고유하게 구분한다. "),s("code",[e._v("Mongo DB")]),e._v("도 유사한 개념의 "),s("code",[e._v("_id")]),e._v(" 필드로 Document를 고유하게 구분한다. Document를 저장할 때 명시적으로 값을 제공하지 않으면 Mongo DB가 "),s("code",[e._v("_id")]),e._v(" 값을 자동으로 생성한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insert({ name: "paul" })\n> db.member.insert({ name: "john" })\n\n> db.member.find({name: {$ne: "john"}})\n{ "_id" : ObjectId("625ad76b8d6dabdee5230bee"), "name" : "paul" }\n{ "_id" : ObjectId("625ad79e8d6dabdee5230bf0"), "name" : "messi" }\n')])])]),s("h2",{attrs:{id:"index"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#index"}},[e._v("#")]),e._v(" Index")]),e._v(" "),s("p",[e._v("관계형 데이터베이스의 "),s("code",[e._v("인덱스(Index)")]),e._v("를 사용하면 데이터를 빠르게 탐색할 수 있다. Mongo DB도 인덱스를 제공한다.")]),e._v(" "),s("h3",{attrs:{id:"index-조회"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#index-조회"}},[e._v("#")]),e._v(" Index 조회")]),e._v(" "),s("p",[s("code",[e._v("db.<콜렉션 이름>.getIndexes()")]),e._v(" 명령어로 인덱스를 확인할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.getIndexes()\n[\n\t{\n\t\t"v" : 2,\n\t\t"key" : {\n\t\t\t"_id" : 1\n\t\t},\n\t\t"name" : "_id_",\n\t\t"ns" : "my_db.member"\n\t}\n]\n')])])]),s("p",[s("code",[e._v("_id")]),e._v(" 필드에는 인덱스가 자동으로 생성된다.")]),e._v(" "),s("h3",{attrs:{id:"단일-필드-index-생성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#단일-필드-index-생성"}},[e._v("#")]),e._v(" 단일 필드 Index 생성")]),e._v(" "),s("p",[s("code",[e._v("db.[테이블명].createIndex({ [필드명]: ±1 })")]),e._v("로 인덱스를 생성할 수 있다. "),s("code",[e._v("1")]),e._v("은 오름차순, "),s("code",[e._v("-1")]),e._v("은 내림차순으로 인덱스를 생성한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.createIndex({ name: 1 })\n{\n\t"createdCollectionAutomatically" : false,\n\t"numIndexesBefore" : 1,\n\t"numIndexesAfter" : 2,\n\t"ok" : 1\n}\n')])])]),s("p",[e._v("중복된 데이터가 존재하는 필드에는 인덱스를 생성할 수 없다.")]),e._v(" "),s("h3",{attrs:{id:"복합-필드-index-생성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#복합-필드-index-생성"}},[e._v("#")]),e._v(" 복합 필드 Index 생성")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.createIndex({ name: 1, age: 1 })\n")])])]),s("h3",{attrs:{id:"index-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#index-삭제"}},[e._v("#")]),e._v(" Index 삭제")]),e._v(" "),s("p",[s("code",[e._v("db.monsters.dropIndex(필드명)")]),e._v("으로 인덱스를 삭제할 수 있다.")]),e._v(" "),s("h2",{attrs:{id:"정렬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#정렬"}},[e._v("#")]),e._v(" 정렬")]),e._v(" "),s("p",[s("code",[e._v("sort()")]),e._v("를 사용하여 조회한 도큐먼트를 정렬할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find().sort({ name: 1 })\t// 오름차순 정렬\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find().sort({ name: -1 })\t// 내림차순 정렬\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find().sort({ name: 1, nation: 1 })\n")])])]),s("h2",{attrs:{id:"페이징"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#페이징"}},[e._v("#")]),e._v(" 페이징")]),e._v(" "),s("p",[s("code",[e._v("limit(n)")]),e._v("은 조회할 도큐먼트 개수를 제한할 때 사용한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find().limit(10)\n")])])]),s("p",[s("code",[e._v("skip(n)")]),e._v("은 n개를 건너뛰고 그 다음부터 도큐먼트를 조회한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find().skip(10)\n")])])]),s("p",[e._v("페이징은 "),s("code",[e._v("skip(n)")]),e._v("과 "),s("code",[e._v("limit(n)")]),e._v("  메소드를 조합하여 사용할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.member.find().skip(10).limit(10)\n")])])]),s("h2",{attrs:{id:"관계-설정"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#관계-설정"}},[e._v("#")]),e._v(" 관계 설정")]),e._v(" "),s("p",[e._v("Mongo DB는 관계형 데이터베이스의 외래키 개념이 없다. 따라서 두 가지 방법으로 "),s("code",[e._v("관계(Relation)")]),e._v("를 설정할 수 있다.")]),e._v(" "),s("h3",{attrs:{id:"임베디드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#임베디드"}},[e._v("#")]),e._v(" 임베디드")]),e._v(" "),s("p",[s("code",[e._v("임베디드(Embedded)")]),e._v("은 도큐먼트에 다른 도큐먼트를 객체 형태로 가지고 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insert({ \n    name: "paul", \n    posts: [\n        { title: "Java", content: "I love Java." }, \n        { title: "Kotlin", content: "Kotlin is fun." }\n    ]\n})\nWriteResult({ "nInserted" : 1 })\n')])])]),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.findOne({ name: "paul" })\n{\n\t"_id" : ObjectId("625afb558d6dabdee5230bf7"),\n\t"name" : "paul",\n\t"posts" : [\n\t\t{ "title" : "Java", "content" : "I love Java." },\n\t\t{ "title" : "Kotlin", "content" : "Kotlin is fun." }\n\t]\n}\n')])])]),s("h3",{attrs:{id:"참조-reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#참조-reference"}},[e._v("#")]),e._v(" 참조(Reference)")]),e._v(" "),s("p",[s("code",[e._v("참조(Reference)")]),e._v("은 다른 도큐먼트의 참조를 가지고 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.post.insert({\n    title: "Swift",\n    content: "Swift for iOS"\n})\n\n> db.post.insert({\n    title: "DevOps",\n    content: "DevOps is useful."\n})\n')])])]),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.post.find().pretty()\n{\n\t"_id" : ObjectId("625afcaf8d6dabdee5230bf9"),\n\t"title" : "Swift",\n\t"content" : "Swift for iOS"\n}\n{\n\t"_id" : ObjectId("625afcb48d6dabdee5230bfa"),\n\t"title" : "DevOps",\n\t"content" : "DevOps is useful."\n}\n')])])]),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.member.insert({\n    name: "James",\n    posts: [\n        ObjectId("625afcaf8d6dabdee5230bf9"),\n        ObjectId("625afcb48d6dabdee5230bfa")\n    ]\n})\n')])])]),s("h2",{attrs:{id:"사용자-관리"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용자-관리"}},[e._v("#")]),e._v(" 사용자 관리")]),e._v(" "),s("p",[e._v("Mongo DB에 처음 접속하면 인증이 비활성화 되어있기 때문에 누구나 인증없이 데이터베이스 접근할 수 있다. 심지어 원격 접속도 인증이 필요없다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ mongo\t\t// 인증 없이 접속\n>\n")])])]),s("p",[e._v("따라서 관리자와 사용자 계정을 생성하고, 사용자에게 역할을 부여한 후, 인증을 거치도록 구성해야한다.")]),e._v(" "),s("h3",{attrs:{id:"사용자-조회"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용자-조회"}},[e._v("#")]),e._v(" 사용자 조회")]),e._v(" "),s("p",[s("code",[e._v("show users")]),e._v(" 명령어를 사용하면 모든 사용자를 조회할 수 있다. Mongo DB에 처음 접속했다면 생성한 계정이 없기 때문에 아무 결과도 출력되지 않는다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> show users \n\n")])])]),s("p",[s("code",[e._v("db.getUsers()")]),e._v("를 실행하면 현재 데이터베이스의 모든 사용자를 출력한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> db.getUsers()\n[ ]\n")])])]),s("h3",{attrs:{id:"사용자-생성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용자-생성"}},[e._v("#")]),e._v(" 사용자 생성")]),e._v(" "),s("p",[s("code",[e._v("db.createUser()")]),e._v("로 사용자를 생성할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.createUser({ \n\tuser: "<name>", \n\tpwd: "<cleartext password>", \n\troles: [ \n\t\t{ role: "<role>", db: "<database>" } | "<role>", \n\t\t... \n\t] \n}\n')])])]),s("p",[e._v("우선 모든 데이터베이스에 대해 모든 권한을 갖는 "),s("code",[e._v("root")]),e._v(" 계정을 생성하자.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> use admin\n\n> db.createUser(\n  { \n     user: "root", \n     pwd: "root", \n     roles: [ "root" ] \n  }\n)\n')])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> show users\n{\n\t"_id" : "admin.root",\n\t"userId" : UUID("999a9d45-85f3-4ad8-abe6-01b6184fa90a"),\n\t"user" : "root",\n\t"db" : "admin",\n\t"roles" : [\n\t\t{\n\t\t\t"role" : "root",\n\t\t\t"db" : "admin"\n\t\t}\n\t],\n\t"mechanisms" : [\n\t\t"SCRAM-SHA-1",\n\t\t"SCRAM-SHA-256"\n\t]\n}\n')])])]),s("p",[e._v("일반 사용자 계정도 생성해보자.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> use my_db\n\n> db.createUser(\n  {\n    user: "user",\n    pwd: "user",\n    roles: [ { role: "readWrite", db: "my_db" } ]\n  }\n)\n')])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> show users\n{\n\t"_id" : "my_db.user",\n\t"userId" : UUID("f4aab7bc-413b-4dd3-b1cf-08a65fbb428d"),\n\t"user" : "user",\n\t"db" : "my_db",\n\t"roles" : [\n\t\t{\n\t\t\t"role" : "readWrite",\n\t\t\t"db" : "my_db"\n\t\t}\n\t],\n\t"mechanisms" : [\n\t\t"SCRAM-SHA-1",\n\t\t"SCRAM-SHA-256"\n\t]\n}\n')])])]),s("h3",{attrs:{id:"인증-활성화"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#인증-활성화"}},[e._v("#")]),e._v(" 인증 활성화")]),e._v(" "),s("p",[e._v("Mongo DB는 기본적으로 인증없이 접근할 수 있다. 인증을 활성화하려면 설정 파일을 수정해야한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ vim /usr/local/etc/mongod.conf\n")])])]),s("p",[s("code",[e._v("mongod.conf")]),e._v("에 다음 코드를 추가한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("security:\n  authorization: enabled\n")])])]),s("p",[e._v("설정파일을 수정한 후 MongoDB를 재시작한다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew services restart mongodb-community@4.2\n")])])]),s("h3",{attrs:{id:"사용자-인증"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용자-인증"}},[e._v("#")]),e._v(" 사용자 인증")]),e._v(" "),s("p",[e._v("먼저 인증없이 Mongo DB에 접속해보자.")]),e._v(" "),s("div",{staticClass:"language-shellsession extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shellsession"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token shell-symbol important"}},[e._v("$")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token bash language-bash"}},[e._v("mongo  ")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token output"}},[e._v('MongoDB shell version v4.2.19\nconnecting to: mongodb://127.0.0.1:27017/?compressors=disabled&gssapiServiceName=mongodb\nImplicit session: session { "id" : UUID("5cd65398-d599-465d-a384-2f9a51e002a3") }\nMongoDB server version: 4.2.1\n')])])])]),s("p",[e._v("Mongo DB와의 세션은 연결되었으나 인증은 진행되지 않았다. 따라서 데이터베이스나 테이블 조회도 불가능하다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> show databases;\n// 결과 없음\n")])])]),s("p",[s("code",[e._v("db.auth()")]),e._v("를 사용하면 인증을 할 수 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('> db.auth("user", "user")\n1\n\n> show databases;\nmy_db  0.000GB\n')])])]),s("p",[e._v("다음과 같이 Mongo DB와의 세션을 연결할 때 사용자, 비밀번호 정보를 전달할 수도 있다.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("div",{staticClass:"highlight-lines"},[s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$ mongo -u "user" -authenticationDatabase "my_db"\nMongoDB shell version v4.2.19\nEnter password: <USER_PASSWORD>\nconnecting to: mongodb://127.0.0.1:27017/?authSource=my_db&compressors=disabled&gssapiServiceName=mongodb\nImplicit session: session { "id" : UUID("6cfc239f-8b86-48a2-89b6-8fe9dbb62353") }\nMongoDB server version: 4.2.19\n\n> show databases;\nmy_db  0.000GB\n')])])]),s("p",[e._v("루트 계정은 "),s("code",[e._v("db.auth()")]),e._v("로 접속할 수 없으며 위와 같은 방법으로 접속해야한다.")]),e._v(" "),s("div",{staticClass:"language-shellsession extra-class"},[s("div",{staticClass:"highlight-lines"},[s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-shellsession"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token shell-symbol important"}},[e._v("$")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token bash language-bash"}},[e._v("mongo -u "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"root"')])])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token output"}},[e._v('MongoDB shell version v4.2.19\nEnter password: <ROOT_PASSWORD>\nconnecting to: mongodb://127.0.0.1:27017/?compressors=disabled&gssapiServiceName=mongodb\nImplicit session: session { "id" : UUID("47d48100-9172-4187-8d5b-6a7944a2e055") }\nMongoDB server version: 4.2.19\n---\nEnable MongoDB\'s free cloud-based monitoring service, which will then receive and display\nmetrics about your deployment (disk utilization, CPU, operation statistics, etc).\n\nThe monitoring data will be available on a MongoDB website with a unique URL accessible to you\nand anyone you share the URL with. MongoDB may use this information to make product\nimprovements and to suggest MongoDB products and deployment options to you.\n\nTo enable free monitoring, run the following command: db.enableFreeMonitoring()\nTo permanently disable this reminder, run the following command: db.disableFreeMonitoring()\n---\n\n> show databases;\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\nmy_db   0.000GB\nmydb    0.000GB\n')])])])]),s("h3",{attrs:{id:"사용자-삭제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용자-삭제"}},[e._v("#")]),e._v(" 사용자 삭제")]),e._v(" "),s("p",[s("code",[e._v("db.dropUser()")]),e._v("는 특정 사용자를 삭제하며, "),s("code",[e._v("db.dropAllUsers()")]),e._v("로 모든 사용자를 삭제할 수 있다.")]),e._v(" "),s("h2",{attrs:{id:"mongo-db-cluster-구축"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongo-db-cluster-구축"}},[e._v("#")]),e._v(" Mongo DB Cluster 구축")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("Notification")]),e._v(" "),s("p",[e._v("준비 중인 컨텐츠입니다.")])]),e._v(" "),s("h2",{attrs:{id:"replication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replication"}},[e._v("#")]),e._v(" Replication")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("Notification")]),e._v(" "),s("p",[e._v("준비 중인 컨텐츠입니다.")])]),e._v(" "),s("h2",{attrs:{id:"sharding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sharding"}},[e._v("#")]),e._v(" Sharding")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("Notification")]),e._v(" "),s("p",[e._v("준비 중인 컨텐츠입니다.")])]),e._v(" "),s("h2",{attrs:{id:"compass"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compass"}},[e._v("#")]),e._v(" Compass")]),e._v(" "),s("p",[s("code",[e._v("Compass")]),e._v("는 Mongo DB를 위한 GUI database clinet다. "),s("a",{attrs:{href:"https://www.mongodb.com/try/download/compass",target:"_blank",rel:"noopener noreferrer"}},[e._v("이 곳"),s("OutboundLink")],1),e._v("에서 다운받을 수 있다.")])])}),[],!1,null,null,null);a.default=n.exports}}]);