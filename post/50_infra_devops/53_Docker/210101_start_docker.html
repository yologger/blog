<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 시작하기 | Yologger&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="yologger&#39;s blog">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.0e080af6.css" as="style"><link rel="preload" href="/blog/assets/js/app.32362dc0.js" as="script"><link rel="preload" href="/blog/assets/js/3.8795c9a2.js" as="script"><link rel="preload" href="/blog/assets/js/24.421a250c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.009f8593.js"><link rel="prefetch" href="/blog/assets/js/100.04c8c108.js"><link rel="prefetch" href="/blog/assets/js/101.02907c78.js"><link rel="prefetch" href="/blog/assets/js/102.34e5043e.js"><link rel="prefetch" href="/blog/assets/js/103.9f91abc2.js"><link rel="prefetch" href="/blog/assets/js/104.31f63255.js"><link rel="prefetch" href="/blog/assets/js/105.8a43c1db.js"><link rel="prefetch" href="/blog/assets/js/106.b9460ed3.js"><link rel="prefetch" href="/blog/assets/js/107.f8cdc232.js"><link rel="prefetch" href="/blog/assets/js/108.8978a1ba.js"><link rel="prefetch" href="/blog/assets/js/109.968539f7.js"><link rel="prefetch" href="/blog/assets/js/11.70d9a8f5.js"><link rel="prefetch" href="/blog/assets/js/110.ad77dfe5.js"><link rel="prefetch" href="/blog/assets/js/111.a3e57423.js"><link rel="prefetch" href="/blog/assets/js/112.87034314.js"><link rel="prefetch" href="/blog/assets/js/113.2fcf2309.js"><link rel="prefetch" href="/blog/assets/js/114.8fed71aa.js"><link rel="prefetch" href="/blog/assets/js/115.a4990a06.js"><link rel="prefetch" href="/blog/assets/js/116.1780fd7a.js"><link rel="prefetch" href="/blog/assets/js/117.f22668d4.js"><link rel="prefetch" href="/blog/assets/js/118.bbe27d51.js"><link rel="prefetch" href="/blog/assets/js/119.25b9b643.js"><link rel="prefetch" href="/blog/assets/js/12.31f8420a.js"><link rel="prefetch" href="/blog/assets/js/120.9d9f48f0.js"><link rel="prefetch" href="/blog/assets/js/121.40af3a0c.js"><link rel="prefetch" href="/blog/assets/js/122.a636d2ef.js"><link rel="prefetch" href="/blog/assets/js/123.5c99f4f4.js"><link rel="prefetch" href="/blog/assets/js/124.3e75231d.js"><link rel="prefetch" href="/blog/assets/js/125.7cf1f005.js"><link rel="prefetch" href="/blog/assets/js/126.86bd0915.js"><link rel="prefetch" href="/blog/assets/js/127.34dfb59d.js"><link rel="prefetch" href="/blog/assets/js/128.cb8753b6.js"><link rel="prefetch" href="/blog/assets/js/129.75f1821b.js"><link rel="prefetch" href="/blog/assets/js/13.d86b1ae2.js"><link rel="prefetch" href="/blog/assets/js/130.352fa799.js"><link rel="prefetch" href="/blog/assets/js/131.57a5cee5.js"><link rel="prefetch" href="/blog/assets/js/132.b774b3fe.js"><link rel="prefetch" href="/blog/assets/js/133.5cea1190.js"><link rel="prefetch" href="/blog/assets/js/134.dbc3bbbd.js"><link rel="prefetch" href="/blog/assets/js/135.02ff9368.js"><link rel="prefetch" href="/blog/assets/js/136.f7128a40.js"><link rel="prefetch" href="/blog/assets/js/137.a3c425d9.js"><link rel="prefetch" href="/blog/assets/js/138.187b1e7e.js"><link rel="prefetch" href="/blog/assets/js/139.d581d7f6.js"><link rel="prefetch" href="/blog/assets/js/14.78cdbe3d.js"><link rel="prefetch" href="/blog/assets/js/140.1947f6c2.js"><link rel="prefetch" href="/blog/assets/js/141.d2397ceb.js"><link rel="prefetch" href="/blog/assets/js/142.a4fca10f.js"><link rel="prefetch" href="/blog/assets/js/143.868445e7.js"><link rel="prefetch" href="/blog/assets/js/144.a1c80310.js"><link rel="prefetch" href="/blog/assets/js/145.319913ba.js"><link rel="prefetch" href="/blog/assets/js/146.d19fd28e.js"><link rel="prefetch" href="/blog/assets/js/147.0f7acde4.js"><link rel="prefetch" href="/blog/assets/js/148.945a5b62.js"><link rel="prefetch" href="/blog/assets/js/149.eb4bec1b.js"><link rel="prefetch" href="/blog/assets/js/15.c479e5b5.js"><link rel="prefetch" href="/blog/assets/js/150.50892fe5.js"><link rel="prefetch" href="/blog/assets/js/151.c675ddff.js"><link rel="prefetch" href="/blog/assets/js/152.05d1ee8a.js"><link rel="prefetch" href="/blog/assets/js/153.75510d20.js"><link rel="prefetch" href="/blog/assets/js/154.f579d477.js"><link rel="prefetch" href="/blog/assets/js/155.12dbf578.js"><link rel="prefetch" href="/blog/assets/js/156.af8b54dd.js"><link rel="prefetch" href="/blog/assets/js/157.02eb87f5.js"><link rel="prefetch" href="/blog/assets/js/158.a1fbd08d.js"><link rel="prefetch" href="/blog/assets/js/159.75594bb8.js"><link rel="prefetch" href="/blog/assets/js/16.aec21ad3.js"><link rel="prefetch" href="/blog/assets/js/160.4eb83312.js"><link rel="prefetch" href="/blog/assets/js/161.104311e5.js"><link rel="prefetch" href="/blog/assets/js/162.aabbb479.js"><link rel="prefetch" href="/blog/assets/js/163.bf862198.js"><link rel="prefetch" href="/blog/assets/js/164.73e0e8e9.js"><link rel="prefetch" href="/blog/assets/js/165.052c0123.js"><link rel="prefetch" href="/blog/assets/js/166.f5eb35cc.js"><link rel="prefetch" href="/blog/assets/js/167.7a313045.js"><link rel="prefetch" href="/blog/assets/js/168.86fb56fe.js"><link rel="prefetch" href="/blog/assets/js/169.df883b7e.js"><link rel="prefetch" href="/blog/assets/js/17.3a9b6735.js"><link rel="prefetch" href="/blog/assets/js/170.47f0dbf7.js"><link rel="prefetch" href="/blog/assets/js/171.aec0020e.js"><link rel="prefetch" href="/blog/assets/js/172.c1d8c91b.js"><link rel="prefetch" href="/blog/assets/js/173.a6f2fcd6.js"><link rel="prefetch" href="/blog/assets/js/174.38b52e5e.js"><link rel="prefetch" href="/blog/assets/js/175.ae38f488.js"><link rel="prefetch" href="/blog/assets/js/176.29adebfe.js"><link rel="prefetch" href="/blog/assets/js/177.41b97ad0.js"><link rel="prefetch" href="/blog/assets/js/178.0fa9bbf3.js"><link rel="prefetch" href="/blog/assets/js/179.8559c981.js"><link rel="prefetch" href="/blog/assets/js/18.0c383095.js"><link rel="prefetch" href="/blog/assets/js/180.8733c320.js"><link rel="prefetch" href="/blog/assets/js/181.21e0e018.js"><link rel="prefetch" href="/blog/assets/js/182.b6e485e9.js"><link rel="prefetch" href="/blog/assets/js/183.c27d150d.js"><link rel="prefetch" href="/blog/assets/js/184.0fbcb691.js"><link rel="prefetch" href="/blog/assets/js/185.7e650b04.js"><link rel="prefetch" href="/blog/assets/js/186.6657fe1d.js"><link rel="prefetch" href="/blog/assets/js/187.551c064a.js"><link rel="prefetch" href="/blog/assets/js/188.8ba6e40b.js"><link rel="prefetch" href="/blog/assets/js/189.041316b7.js"><link rel="prefetch" href="/blog/assets/js/19.750739bf.js"><link rel="prefetch" href="/blog/assets/js/190.d71b0917.js"><link rel="prefetch" href="/blog/assets/js/191.a7d8bb61.js"><link rel="prefetch" href="/blog/assets/js/192.5fce8db9.js"><link rel="prefetch" href="/blog/assets/js/193.c5cc9ffb.js"><link rel="prefetch" href="/blog/assets/js/194.a63b6260.js"><link rel="prefetch" href="/blog/assets/js/195.d2e09806.js"><link rel="prefetch" href="/blog/assets/js/196.063ba68f.js"><link rel="prefetch" href="/blog/assets/js/197.d39d3324.js"><link rel="prefetch" href="/blog/assets/js/198.ce84b47e.js"><link rel="prefetch" href="/blog/assets/js/199.93c36c7f.js"><link rel="prefetch" href="/blog/assets/js/2.b088ac97.js"><link rel="prefetch" href="/blog/assets/js/20.13aea874.js"><link rel="prefetch" href="/blog/assets/js/200.48855557.js"><link rel="prefetch" href="/blog/assets/js/201.af6c3d13.js"><link rel="prefetch" href="/blog/assets/js/202.355fa950.js"><link rel="prefetch" href="/blog/assets/js/203.8b9a3978.js"><link rel="prefetch" href="/blog/assets/js/204.9d334517.js"><link rel="prefetch" href="/blog/assets/js/205.9d4d72ca.js"><link rel="prefetch" href="/blog/assets/js/206.2734a14e.js"><link rel="prefetch" href="/blog/assets/js/207.856430a2.js"><link rel="prefetch" href="/blog/assets/js/208.553763b5.js"><link rel="prefetch" href="/blog/assets/js/209.39f55833.js"><link rel="prefetch" href="/blog/assets/js/21.b5875938.js"><link rel="prefetch" href="/blog/assets/js/210.5c7be277.js"><link rel="prefetch" href="/blog/assets/js/211.8d787e7d.js"><link rel="prefetch" href="/blog/assets/js/212.97822173.js"><link rel="prefetch" href="/blog/assets/js/213.26729f1a.js"><link rel="prefetch" href="/blog/assets/js/214.7c6fd838.js"><link rel="prefetch" href="/blog/assets/js/215.ffa3d1cb.js"><link rel="prefetch" href="/blog/assets/js/216.5d2ebcf4.js"><link rel="prefetch" href="/blog/assets/js/217.17f13f17.js"><link rel="prefetch" href="/blog/assets/js/218.4209a714.js"><link rel="prefetch" href="/blog/assets/js/219.e1b478d8.js"><link rel="prefetch" href="/blog/assets/js/22.265c8215.js"><link rel="prefetch" href="/blog/assets/js/220.86c2079c.js"><link rel="prefetch" href="/blog/assets/js/221.1c717f8b.js"><link rel="prefetch" href="/blog/assets/js/222.585d0104.js"><link rel="prefetch" href="/blog/assets/js/223.29fc7e37.js"><link rel="prefetch" href="/blog/assets/js/224.d5e24637.js"><link rel="prefetch" href="/blog/assets/js/225.df1946ac.js"><link rel="prefetch" href="/blog/assets/js/226.2aa1c4d7.js"><link rel="prefetch" href="/blog/assets/js/227.a751e31d.js"><link rel="prefetch" href="/blog/assets/js/228.6e330b47.js"><link rel="prefetch" href="/blog/assets/js/229.77229d7b.js"><link rel="prefetch" href="/blog/assets/js/23.c83da651.js"><link rel="prefetch" href="/blog/assets/js/230.062a5ac1.js"><link rel="prefetch" href="/blog/assets/js/231.87bbf70b.js"><link rel="prefetch" href="/blog/assets/js/232.31af7ed9.js"><link rel="prefetch" href="/blog/assets/js/233.b1a58839.js"><link rel="prefetch" href="/blog/assets/js/234.68cec967.js"><link rel="prefetch" href="/blog/assets/js/235.ea62ee88.js"><link rel="prefetch" href="/blog/assets/js/236.a2f2b050.js"><link rel="prefetch" href="/blog/assets/js/237.e7cad44f.js"><link rel="prefetch" href="/blog/assets/js/238.81b4b5a3.js"><link rel="prefetch" href="/blog/assets/js/239.1c862178.js"><link rel="prefetch" href="/blog/assets/js/240.18b5df51.js"><link rel="prefetch" href="/blog/assets/js/241.aa077fb6.js"><link rel="prefetch" href="/blog/assets/js/242.c63afd4d.js"><link rel="prefetch" href="/blog/assets/js/243.b2129f8c.js"><link rel="prefetch" href="/blog/assets/js/244.ff8e7a30.js"><link rel="prefetch" href="/blog/assets/js/245.88169faa.js"><link rel="prefetch" href="/blog/assets/js/246.fa9199da.js"><link rel="prefetch" href="/blog/assets/js/247.cdd33986.js"><link rel="prefetch" href="/blog/assets/js/248.765f4cb5.js"><link rel="prefetch" href="/blog/assets/js/249.2a26a296.js"><link rel="prefetch" href="/blog/assets/js/25.154520e5.js"><link rel="prefetch" href="/blog/assets/js/250.439fb16a.js"><link rel="prefetch" href="/blog/assets/js/251.e057e7e0.js"><link rel="prefetch" href="/blog/assets/js/252.34794853.js"><link rel="prefetch" href="/blog/assets/js/253.c622fcbd.js"><link rel="prefetch" href="/blog/assets/js/254.74a70b9f.js"><link rel="prefetch" href="/blog/assets/js/255.fed47ff6.js"><link rel="prefetch" href="/blog/assets/js/256.a88005ca.js"><link rel="prefetch" href="/blog/assets/js/257.11083964.js"><link rel="prefetch" href="/blog/assets/js/258.0b1a7d73.js"><link rel="prefetch" href="/blog/assets/js/259.62c584ff.js"><link rel="prefetch" href="/blog/assets/js/26.4a88bf4d.js"><link rel="prefetch" href="/blog/assets/js/260.1063ea57.js"><link rel="prefetch" href="/blog/assets/js/261.8f065193.js"><link rel="prefetch" href="/blog/assets/js/262.f796ed15.js"><link rel="prefetch" href="/blog/assets/js/263.38c3508c.js"><link rel="prefetch" href="/blog/assets/js/264.6a5fb90f.js"><link rel="prefetch" href="/blog/assets/js/265.79985a16.js"><link rel="prefetch" href="/blog/assets/js/266.58737293.js"><link rel="prefetch" href="/blog/assets/js/267.c0489be8.js"><link rel="prefetch" href="/blog/assets/js/268.9b482a12.js"><link rel="prefetch" href="/blog/assets/js/269.d807798b.js"><link rel="prefetch" href="/blog/assets/js/27.7f6c507f.js"><link rel="prefetch" href="/blog/assets/js/270.62e46aaf.js"><link rel="prefetch" href="/blog/assets/js/271.a2636662.js"><link rel="prefetch" href="/blog/assets/js/272.2c029ac2.js"><link rel="prefetch" href="/blog/assets/js/273.c0803a3e.js"><link rel="prefetch" href="/blog/assets/js/274.feed5dcb.js"><link rel="prefetch" href="/blog/assets/js/275.d026e4d0.js"><link rel="prefetch" href="/blog/assets/js/276.6348ed02.js"><link rel="prefetch" href="/blog/assets/js/277.cb5be1e0.js"><link rel="prefetch" href="/blog/assets/js/28.86691d04.js"><link rel="prefetch" href="/blog/assets/js/29.34f07073.js"><link rel="prefetch" href="/blog/assets/js/30.c7caa137.js"><link rel="prefetch" href="/blog/assets/js/31.07b08573.js"><link rel="prefetch" href="/blog/assets/js/32.2d17c55c.js"><link rel="prefetch" href="/blog/assets/js/33.34659507.js"><link rel="prefetch" href="/blog/assets/js/34.ca823a5d.js"><link rel="prefetch" href="/blog/assets/js/35.fdee0018.js"><link rel="prefetch" href="/blog/assets/js/36.1df26e75.js"><link rel="prefetch" href="/blog/assets/js/37.e84c6798.js"><link rel="prefetch" href="/blog/assets/js/38.0ab020a7.js"><link rel="prefetch" href="/blog/assets/js/39.c752cd4a.js"><link rel="prefetch" href="/blog/assets/js/4.dce05cd8.js"><link rel="prefetch" href="/blog/assets/js/40.e6ff46a5.js"><link rel="prefetch" href="/blog/assets/js/41.7b5ace1e.js"><link rel="prefetch" href="/blog/assets/js/42.bd14936e.js"><link rel="prefetch" href="/blog/assets/js/43.d12fece7.js"><link rel="prefetch" href="/blog/assets/js/44.6fca8fd5.js"><link rel="prefetch" href="/blog/assets/js/45.907b4f15.js"><link rel="prefetch" href="/blog/assets/js/46.f9d2e206.js"><link rel="prefetch" href="/blog/assets/js/47.b1653fc1.js"><link rel="prefetch" href="/blog/assets/js/48.99b3c7bb.js"><link rel="prefetch" href="/blog/assets/js/49.828907da.js"><link rel="prefetch" href="/blog/assets/js/5.7193cd84.js"><link rel="prefetch" href="/blog/assets/js/50.f51f2a3e.js"><link rel="prefetch" href="/blog/assets/js/51.29a6e8ea.js"><link rel="prefetch" href="/blog/assets/js/52.4d64b497.js"><link rel="prefetch" href="/blog/assets/js/53.12dca8e6.js"><link rel="prefetch" href="/blog/assets/js/54.e3c4fef4.js"><link rel="prefetch" href="/blog/assets/js/55.b801643c.js"><link rel="prefetch" href="/blog/assets/js/56.a3d351a1.js"><link rel="prefetch" href="/blog/assets/js/57.cfabc431.js"><link rel="prefetch" href="/blog/assets/js/58.8a3cbbf5.js"><link rel="prefetch" href="/blog/assets/js/59.a5a7464b.js"><link rel="prefetch" href="/blog/assets/js/6.98f083fd.js"><link rel="prefetch" href="/blog/assets/js/60.affca2b3.js"><link rel="prefetch" href="/blog/assets/js/61.adf43eb0.js"><link rel="prefetch" href="/blog/assets/js/62.480ff614.js"><link rel="prefetch" href="/blog/assets/js/63.725f57dc.js"><link rel="prefetch" href="/blog/assets/js/64.ee3ea45f.js"><link rel="prefetch" href="/blog/assets/js/65.a9874219.js"><link rel="prefetch" href="/blog/assets/js/66.ec0c5b17.js"><link rel="prefetch" href="/blog/assets/js/67.043a2f09.js"><link rel="prefetch" href="/blog/assets/js/68.c85cdc1a.js"><link rel="prefetch" href="/blog/assets/js/69.24eb94a2.js"><link rel="prefetch" href="/blog/assets/js/7.a3939503.js"><link rel="prefetch" href="/blog/assets/js/70.7ab8f348.js"><link rel="prefetch" href="/blog/assets/js/71.3f967059.js"><link rel="prefetch" href="/blog/assets/js/72.296c112d.js"><link rel="prefetch" href="/blog/assets/js/73.4bad88aa.js"><link rel="prefetch" href="/blog/assets/js/74.ad674c4d.js"><link rel="prefetch" href="/blog/assets/js/75.6e3c3e6d.js"><link rel="prefetch" href="/blog/assets/js/76.e027ccc7.js"><link rel="prefetch" href="/blog/assets/js/77.963c60ef.js"><link rel="prefetch" href="/blog/assets/js/78.b6ecfd1c.js"><link rel="prefetch" href="/blog/assets/js/79.5c540919.js"><link rel="prefetch" href="/blog/assets/js/8.af2847e2.js"><link rel="prefetch" href="/blog/assets/js/80.cb971025.js"><link rel="prefetch" href="/blog/assets/js/81.8fea14a9.js"><link rel="prefetch" href="/blog/assets/js/82.e177062a.js"><link rel="prefetch" href="/blog/assets/js/83.c89e463b.js"><link rel="prefetch" href="/blog/assets/js/84.89d68e32.js"><link rel="prefetch" href="/blog/assets/js/85.12901aa6.js"><link rel="prefetch" href="/blog/assets/js/86.f7b120e4.js"><link rel="prefetch" href="/blog/assets/js/87.a620f73f.js"><link rel="prefetch" href="/blog/assets/js/88.aef154fa.js"><link rel="prefetch" href="/blog/assets/js/89.9f71412f.js"><link rel="prefetch" href="/blog/assets/js/9.820df2c6.js"><link rel="prefetch" href="/blog/assets/js/90.dd797eb4.js"><link rel="prefetch" href="/blog/assets/js/91.2f4cee08.js"><link rel="prefetch" href="/blog/assets/js/92.fcbd90d3.js"><link rel="prefetch" href="/blog/assets/js/93.49088527.js"><link rel="prefetch" href="/blog/assets/js/94.2162a1ba.js"><link rel="prefetch" href="/blog/assets/js/95.69c4c5ba.js"><link rel="prefetch" href="/blog/assets/js/96.70c77a1a.js"><link rel="prefetch" href="/blog/assets/js/97.77ecde0a.js"><link rel="prefetch" href="/blog/assets/js/98.bdec1ab1.js"><link rel="prefetch" href="/blog/assets/js/99.928b66ab.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.0e080af6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.jpg" alt="Yologger's Blog" class="logo"> <span class="site-name can-hide">Yologger's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/post/01_java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/post/02_kotlin/" class="nav-link">
  Kotlin
</a></div><div class="nav-item"><a href="/blog/post/30_spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/blog/post/20_android/" class="nav-link">
  Android
</a></div><div class="nav-item"><a href="/blog/post/50_infra_devops/" class="nav-link router-link-active">
  Infra/DevOps
</a></div><div class="nav-item"><a href="/blog/post/55_db/" class="nav-link">
  DB
</a></div><div class="nav-item"><a href="/blog/post/60_cs/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/post/80_more/" class="nav-link">
  More
</a></div><div class="nav-item"><a href="https://github.com/yologger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/post/01_java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/post/02_kotlin/" class="nav-link">
  Kotlin
</a></div><div class="nav-item"><a href="/blog/post/30_spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/blog/post/20_android/" class="nav-link">
  Android
</a></div><div class="nav-item"><a href="/blog/post/50_infra_devops/" class="nav-link router-link-active">
  Infra/DevOps
</a></div><div class="nav-item"><a href="/blog/post/55_db/" class="nav-link">
  DB
</a></div><div class="nav-item"><a href="/blog/post/60_cs/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/post/80_more/" class="nav-link">
  More
</a></div><div class="nav-item"><a href="https://github.com/yologger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/post/50_infra_devops/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git, GitHub</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/post/50_infra_devops/53_Docker/210101_start_docker.html" aria-current="page" class="active sidebar-link">Docker 시작하기</a></li><li><a href="/blog/post/50_infra_devops/53_Docker/210103_docker_compose.html" class="sidebar-link">Docker Compose</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h1> <p></p><div class="table-of-contents"><ul><li><a href="#virtual-machine">Virtual Machine</a></li><li><a href="#docker">Docker</a></li><li><a href="#docker의-장점">Docker의 장점</a></li><li><a href="#virtual-machine-vs-docker">Virtual Machine vs. Docker</a></li><li><a href="#설치">설치</a><ul><li><a href="#mac-os에-docker-설치">Mac OS에 Docker 설치</a></li></ul></li><li><a href="#도커-이미지-검색">도커 이미지 검색</a></li><li><a href="#도커-이미지-다운로드">도커 이미지 다운로드</a></li><li><a href="#다운받은-도커-이미지-확인">다운받은 도커 이미지 확인</a></li><li><a href="#도커-컨테이너-생성">도커 컨테이너 생성</a></li><li><a href="#도커-컨테이너-실행">도커 컨테이너 실행</a></li><li><a href="#도커-컨테이너-접속하기">도커 컨테이너 접속하기</a><ul><li><a href="#docker-attach">docker attach</a></li><li><a href="#docker-exec-it">docker exec -it</a></li><li><a href="#docker-run">docker run</a></li></ul></li><li><a href="#도커-컨테이너-정지">도커 컨테이너 정지</a></li><li><a href="#도커-컨테이너-목록-상태-확인">도커 컨테이너 목록, 상태 확인</a></li><li><a href="#도커-컨테이너-삭제">도커 컨테이너 삭제</a></li><li><a href="#도커-이미지-만들기">도커 이미지 만들기</a></li><li><a href="#도커-이미지-삭제">도커 이미지 삭제</a></li><li><a href="#도커-이미지-이름-태그-변경하기">도커 이미지 이름, 태그 변경하기</a></li><li><a href="#docker-volume">Docker Volume</a><ul><li><a href="#호스트-볼륨-공유">호스트 볼륨 공유</a></li><li><a href="#컨테이너-볼륨-공유">컨테이너 볼륨 공유</a></li><li><a href="#도커-볼륨">도커 볼륨</a></li></ul></li><li><a href="#container-registry">Container Registry</a></li><li><a href="#도커-허브">도커 허브</a><ul><li><a href="#도커-허브로-이미지-배포하기">도커 허브로 이미지 배포하기</a></li><li><a href="#도커-허브에서-이미지-다운받기">도커 허브에서 이미지 다운받기</a></li></ul></li><li><a href="#ecr">ECR</a><ul><li><a href="#ecr에-저장소-생성하기">ECR에 저장소 생성하기</a></li><li><a href="#iam-사용자-생성하기">IAM 사용자 생성하기</a></li><li><a href="#aws-cli-설치">AWS CLI 설치</a></li><li><a href="#이미지-push">이미지 Push</a></li><li><a href="#이미지-pull">이미지 Pull</a></li></ul></li><li><a href="#dockerfile-파일">Dockerfile 파일</a><ul><li><a href="#docker-build-명령어">docker build 명령어</a></li><li><a href="#dockerfile-명령어">Dockerfile 명령어</a><ul><li><a href="#from">FROM</a></li><li><a href="#workdir">WORKDIR</a></li><li><a href="#copy">COPY</a></li><li><a href="#add">ADD</a></li><li><a href="#run">RUN</a></li><li><a href="#arg">ARG</a></li><li><a href="#env">ENV</a></li><li><a href="#arg">ARG</a></li><li><a href="#entrypoint">ENTRYPOINT</a></li><li><a href="#expose">EXPOSE</a></li></ul></li></ul></li></ul></div><p></p> <h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <p><code>Docker</code> 사용법에 대해 정리한다.</p> <h2 id="virtual-machine"><a href="#virtual-machine" class="header-anchor">#</a> Virtual Machine</h2> <p>호스트 OS에 가상의 여러 게스트 OS를 가상화하는 기술이다. 제품군에는 <code>VirtualBox</code>, <code>VMWare</code> 등이 있다.</p> <h2 id="docker-2"><a href="#docker-2" class="header-anchor">#</a> Docker</h2> <p><b><code>Docker</code></b>는 호스트 OS에 <code>Docker Container</code>라는 격리된 공간을 제공해주는 컨테이너 가상화 기술이다.</p> <h2 id="docker의-장점"><a href="#docker의-장점" class="header-anchor">#</a> Docker의 장점</h2> <ul><li>호스트 OS에 <code>Docker container</code>라는 격리된 공간을 제공해주는 컨테이너 가상화 기술</li> <li><code>Docker Container</code>를 <code>Docker Image</code>로 빌드하면 도커 엔진이 설치된 어느 곳에든 쉽게 배포할 수 있다.</li> <li><code>Kubernetes</code>같은 <code>컨테이너 오케스트레이션 기술</code>과 함께 사용하여 <code>MSA(Microservice Architecuture)</code>를 쉽게 구성할 수 있다.</li></ul> <h2 id="virtual-machine-vs-docker"><a href="#virtual-machine-vs-docker" class="header-anchor">#</a> Virtual Machine vs. Docker</h2> <p>가상머신은 게스트 OS와 하이버바이저를 거쳐 호스트 OS의 커널과 자원을 사용하기 때문에 성능 손실이 발생한다. 반면 Docker는 하이버파이저와 게스트 OS가 없고 도커 엔진만을 거쳐 호스트 OS의 커널과 자원을 사용하며, 호스트 OS에서 프로세스로 동작하기 때문에 속도가 훨씬 빠르다</p> <p><img src="/blog/assets/img/1.7d307718.png" alt=""></p> <h2 id="설치"><a href="#설치" class="header-anchor">#</a> 설치</h2> <p>운영체제에 따라 <code>Docker</code>를 설치하는 방법이 다르다.</p> <h3 id="mac-os에-docker-설치"><a href="#mac-os에-docker-설치" class="header-anchor">#</a> Mac OS에 Docker 설치</h3> <p>Mac OS 환경에서는 <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>로 <code>Docker Desktop on Mac</code>을 쉽게 설치할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew install --cask docker 
</code></pre></div><p>도커 버전을 확인해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker -v
Docker version 20.10.11, build dea9396
</code></pre></div><p><code>LaunchPad</code>에서도 <code>Docker Desktop on Mac</code>을 확인할 수 있다.</p> <p><img src="/blog/assets/img/2.3df7f139.png" alt=""></p> <h2 id="도커-이미지-검색"><a href="#도커-이미지-검색" class="header-anchor">#</a> 도커 이미지 검색</h2> <p><code>docker search &lt;IMAGE_NAME&gt;</code> 명령어로 도커 이미지를 검색할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker search centos
</code></pre></div><h2 id="도커-이미지-다운로드"><a href="#도커-이미지-다운로드" class="header-anchor">#</a> 도커 이미지 다운로드</h2> <p><code>docker pull &lt;IMAGE_NAME&gt;</code>명령어로 도커 이미지를 다운받을 수 있다. <code>centos:7</code> 이미지를 다운받아보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker pull centos:7
</code></pre></div><h2 id="다운받은-도커-이미지-확인"><a href="#다운받은-도커-이미지-확인" class="header-anchor">#</a> 다운받은 도커 이미지 확인</h2> <p><code>docker images</code> 명령어로 다운받은 도커 이미지 목록을 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker images
REPOSITORY          TAG       IMAGE ID       CREATED        SIZE
centos              7         eeb6ee3f44bd   3 months ago   204MB
</code></pre></div><h2 id="도커-컨테이너-생성"><a href="#도커-컨테이너-생성" class="header-anchor">#</a> 도커 컨테이너 생성</h2> <p><code>docker create --name &lt;CONTAINER&gt; &lt;IMAGE&gt;</code> 명령어로 도커 컨테이너를 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker create --name my_centos centos:7
</code></pre></div><p><code>-i -t</code> 옵션을 추가하여 컨테이너를 생성하면 <code>docker attach</code> 명령어로 컨테이너 내부에 진입할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker create -i -t --name my_centos centos:7
</code></pre></div><p><code>-d</code> 옵션을 추가하면 컨테이너를 생성하면 백그라운드로 실행된다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker create -d --name my_centos centos:7
</code></pre></div><p>백그라운드로 실행되는 컨테이너에 <code>docker attach</code>로 접속하면 커맨드는 입력할 수 없고 출력되는 로그만 확인할 수 있다.</p> <p>자세한 실행 옵션은 <a href="https://docs.docker.com/engine/reference/commandline/create/" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 확인할 수 있다.</p> <h2 id="도커-컨테이너-실행"><a href="#도커-컨테이너-실행" class="header-anchor">#</a> 도커 컨테이너 실행</h2> <p><code>docker start &lt;CONTAINER&gt;</code> 명령어로 도커 컨테이너를 시작한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker start my_centos

$ docker ps -al          
CONTAINER ID   IMAGE      COMMAND       CREATED          STATUS         PORTS     NAMES
b5df63051a50   centos:7   &quot;/bin/bash&quot;   28 seconds ago   Up 3 seconds             my_centos
</code></pre></div><h2 id="도커-컨테이너-접속하기"><a href="#도커-컨테이너-접속하기" class="header-anchor">#</a> 도커 컨테이너 접속하기</h2> <p>도커 컨테이너에는 두 가지 명령어로 접속할 수 있다.</p> <h3 id="docker-attach"><a href="#docker-attach" class="header-anchor">#</a> docker attach</h3> <p><code>docker attach &lt;CONTAINER_NAME&gt;</code> 또는 <code>docker attach &lt;CONTAINER_ID&gt;</code>명령어로 컨테이너 내부로 접속할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker attach my_centos
[root@a9adb823231 /]# 
</code></pre></div><p>백그라운드로 실행되는 컨테이너에 <code>docker attach</code>로 접속하면 커맨드는 입력할 수 없고 출력되는 로그만 확인할 수 있다.</p> <p><code>exit</code>을 입력하여 컨테이너에서 빠져나올 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>[root@a9adb823231 /]# exit 
</code></pre></div><p>참고로 <code>exit</code>을 사용하여 컨테이너에서 빠져나오면 컨테이너도 종료된다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker ps -a
CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS                       PORTS     NAMES
b5df63051a50   centos:7   &quot;/bin/bash&quot;   4 minutes ago   Exited (127) 4 seconds ago             my_centos
</code></pre></div><p>컨테이너를 종료시키지 않고 빠져나오려면 <code>Ctrl + P, Q</code>를 입력한다. 이를 <code>Detach</code>라고 한다.</p> <h3 id="docker-exec-it"><a href="#docker-exec-it" class="header-anchor">#</a> docker exec -it</h3> <p><code>docker exec -it &lt;CONTAINER&gt; &lt;SHELL&gt;</code> 명령어는 별도의 쉘 세션을 생성하여 컨테이너에 접속한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker exec -it 75ef6d64fead /bin/bash 
bash-5.1# ls
</code></pre></div><p><code>docker exec -it</code> 명령어로 컨테이너에 접속한 경우 <code>exit</code> 명령어로 빠져나와도 컨테이너가 종료되지 않는다. 따라서 데몬 컨테이너에 접근하는데 사용할 수 있다.</p> <h3 id="docker-run"><a href="#docker-run" class="header-anchor">#</a> docker run</h3> <p><code>docker run -i -t --name [container_name] [image_name]</code> 명령어를 사용하면 도커 이미지 다운, 도커 컨테이너 생성, 시작, 접속을 한 번에 할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker run -i -t --name my_centos ubuntu:14.04
root@bdccae5606a1:/#
</code></pre></div><h2 id="도커-컨테이너-정지"><a href="#도커-컨테이너-정지" class="header-anchor">#</a> 도커 컨테이너 정지</h2> <p><code>docker stop &lt;container_name&gt;</code> 명령어를 사용하면 도커 컨테이너를 정지할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker stop my_centos
</code></pre></div><h2 id="도커-컨테이너-목록-상태-확인"><a href="#도커-컨테이너-목록-상태-확인" class="header-anchor">#</a> 도커 컨테이너 목록, 상태 확인</h2> <p><code>docker ps</code>명령어로 도커 컨테이너 목록을 확인할 수 있다. 어떤 옵션도 추가하지 않으면 실행 중인 컨테이너 목록만 출력된다. 정지된 컨테이너 목록까지 확인하려면 <code>-a</code> 옵션을 추가한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker ps -a
CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS    PORTS     NAMES
b5df63051a50   centos:7   &quot;/bin/bash&quot;   7 seconds ago   Created             my_centos
</code></pre></div><p><code>STATUS</code>는 컨테이너의 상태를 나타내며 다음 값들을 가질 수 있다.</p> <ul><li><code>Created</code>: 컨테이너가 생성되었으나 한번도 실행된 적이 없는 상태</li> <li><code>Up</code>: 실행 중</li> <li><code>Exited</code>: 종료된 상태</li> <li><code>Pause</code>: 일시 중지된 상태</li></ul> <h2 id="도커-컨테이너-삭제"><a href="#도커-컨테이너-삭제" class="header-anchor">#</a> 도커 컨테이너 삭제</h2> <p><code>docker rm &lt;container_name&gt;</code> 명령어를 사용하면 도커 컨테이너를 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker rm my_centos
</code></pre></div><p><code>docker container prune</code> 명령어는 모든 도커 컨테이너를 삭제한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker container prune
</code></pre></div><h2 id="도커-이미지-만들기"><a href="#도커-이미지-만들기" class="header-anchor">#</a> 도커 이미지 만들기</h2> <p><code>docker commit -a &lt;AUTHOR&gt; -m &lt;MESSAGE&gt; &lt;ORIGINAL_IMAGE&gt; &lt;COPIED_CONTAINER&gt;:&lt;TAG&gt;</code>명령어를 사용하면 도커 컨테이너를 빌드하여 도커 이미지를 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker images
REPOSITORY          TAG       IMAGE ID       CREATED         SIZE
original_image      3.1     0903d3cdd37e   12 months ago   211MB
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>$ docker commit -a &quot;yologger&quot; -m &quot;This is message&quot; original_image copied_image:0.0.1
</code></pre></div><div class="language- extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-text"><code>$ docker images
REPOSITORY          TAG     IMAGE ID       CREATED         SIZE
original_image      3.1     0903d3cdd37e   12 months ago   211MB
copied_image        0.1     0903d3cdd37e   4 seconds ago   211MB
</code></pre></div><h2 id="도커-이미지-삭제"><a href="#도커-이미지-삭제" class="header-anchor">#</a> 도커 이미지 삭제</h2> <p><code>docker image rmi</code> 명령어로 이미지를 삭제할 수 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-text"><code>$ docker images
REPOSITORY          TAG     IMAGE ID       CREATED         SIZE
original_image      3.1     0903d3cdd37e   12 months ago   211MB
copied_image        0.1     0903d3cdd37e   4 seconds ago   211MB

$ docker rmi copied_image:0.1

$ docker images
REPOSITORY          TAG     IMAGE ID       CREATED         SIZE
original_image      3.1     0903d3cdd37e   12 months ago   211MB
</code></pre></div><p>도커 이미지가 도커 컨테이너로 사용 중이라면 컨테이너를 먼저 삭제해야한다.</p> <h2 id="도커-이미지-이름-태그-변경하기"><a href="#도커-이미지-이름-태그-변경하기" class="header-anchor">#</a> 도커 이미지 이름, 태그 변경하기</h2> <p><code>docker tag &lt;기존이미지명:기존태그명&gt; &lt;새로운이미지명:새로운태그명&gt;</code>명령어로 이미지 이름과 태그를 변경할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker images
REPOSITORY          TAG     IMAGE ID       CREATED         SIZE
original_image      3.1     0903d3cdd37e   12 months ago   211MB
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>$ docker tag copied_image:0.1 new_image:0.1
</code></pre></div><p>기존 이미지가 사라지는 것은 아니며, 새로운 이미지가 생성된다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-text"><code>$ docker images
REPOSITORY          TAG     IMAGE ID       CREATED         SIZE
original_image      3.1     0903d3cdd37e   12 months ago   211MB
new_image           0.1     eeb6ee3f44bd   4 seconds ago   211MB
</code></pre></div><h2 id="docker-volume"><a href="#docker-volume" class="header-anchor">#</a> Docker Volume</h2> <p>도커 컨테이너는 내부 파일시스템에 데이터를 저장할 수 있다. 그러나 이 파일시스템은 컨테이너가 삭제되었을 때 함께 사라진다. <code>도커 볼륨(Docker Volume)</code>은 컨테이너에 종속되지 않는 저장소를 제공한다.</p> <p>도커 볼륨은 세 가지 종류가 있다.</p> <ul><li>호스트 볼륨 공유</li> <li>컨테이너 볼륨 공유</li> <li>도커 볼륨</li></ul> <h3 id="호스트-볼륨-공유"><a href="#호스트-볼륨-공유" class="header-anchor">#</a> 호스트 볼륨 공유</h3> <p>도커 컨테이너는 호스트의 볼륨을 공유할 수 있다. 도커 컨테이너를 생성할 때 <code>-v</code> 또는 <code>--volume</code> 옵션으로 호스트의 볼륨과 컨테이너의 볼륨을 바인딩할 수 있다.</p> <p>우선 호스트 OS에 <code>mydata</code> 디렉토리를 생성하자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ mkdir mydata

$ cd mydata

$ pwd
/Users/yologger/mydata
</code></pre></div><p>이제 호스트 OS의 디렉토리를 공유하는 Ubuntu 컨테이너를 생성해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker create -i -t \
--name my_container \
-v /Users/yologger/mydata:/mydata \
ubuntu:14.04
</code></pre></div><p>위 명령어는 호스트 파일시스템의 <code>/Users/yologger/mydata</code>를 도커 컨테이너 파일시스템 <code>/mydata</code>과 바인딩한다. 도커 컨테이너에 <code>/mydata</code> 디렉토리가 없다면 자동으로 생성된다.</p> <p>이제 도커 컨테이너 내부에 접속하여 <code>/mydata</code> 디렉토리가 존재하는지 확인해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker start my_container

$ docker attach my_container

root@308220530da1:/# ls
mydata 
...
</code></pre></div><p>도커 컨테이너에도 <code>mydata</code> 디렉토리가 생성된 것을 확인할 수 있다. 이제 이 디렉토리 안에 파일을 생성해본다.</p> <div class="language- extra-class"><pre class="language-text"><code>root@308220530da1:/# cd mydata

root@308220530da1:/mydata# echo &quot;Hello world&quot; &gt; hello.txt
</code></pre></div><p>도커 컨테이너에서 빠져나와 호스트 OS의 <code>/Users/yologger/mydata</code>를 확인해본다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ ls
hello.txt
</code></pre></div><h3 id="컨테이너-볼륨-공유"><a href="#컨테이너-볼륨-공유" class="header-anchor">#</a> 컨테이너 볼륨 공유</h3> <p>지금까지 <code>-v</code> 옵션으로 볼륨을 사용하는 컨테이너를 생성했다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker create -i -t \
--name my_container \
-v /Users/yologger/mydata:/mydata \
ubuntu:14.04
</code></pre></div><p><code>--volumes-from</code> 옵션을 사용하면 이미 볼륨을 사용하는 다른 컨테이너의 볼륨을 공유할 수 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-text"><code>$ docker create -i -t \
--name your_container \
--volumes-from my_container \
ubuntu:14.04
</code></pre></div><p>이제 <code>my_container</code>와 <code>your_container</code>는 호스트의 <code>/Users/yologger/mydata:/mydata</code> 디렉토리를 공유하게 된다. <code>your_container</code>에서도 <code>/mydata</code> 디렉토리를 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker start your_container

$ docker attach your_container

root@6c256b3cb679:/# ls
mydata
...

root@6c256b3cb679:/# cat /mydata/hello.txt
Hello World
</code></pre></div><h3 id="도커-볼륨"><a href="#도커-볼륨" class="header-anchor">#</a> 도커 볼륨</h3> <p><code>도커 볼륨</code>은 도커 엔진이 직접 관리하는 볼륨이다. <code>docker volume</code> 명령어로 도커 볼륨을 관리할 수 있다.</p> <p><code>docker volume create &lt;볼륨 이름&gt;</code> 명령어로 볼륨을 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker volume create my_volume
</code></pre></div><p><code>docker volume ls</code> 명령어로 볼륨 목록을 조회할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker volume ls
DRIVER    VOLUME NAME
local     my_volume
...
</code></pre></div><p><code>docker inspect volume &lt;볼륨 이름&gt;</code> 명령어로 호스트 OS에서 볼륨이 실제로 저장되는 위치를 확인할 수 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-text"><code>$ docker inspect --type volume my_volume
[
    {
        &quot;CreatedAt&quot;: &quot;2022-05-05T04:08:30Z&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: {},
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/my_volume/_data&quot;,
        &quot;Name&quot;: &quot;my_volume&quot;,
        &quot;Options&quot;: {},
        &quot;Scope&quot;: &quot;local&quot;
    }
]
</code></pre></div><p>이제 볼륨을 사용하는 컨테이너를 생성해보자.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-text"><code>$ docker create -i -t \
--name my_container \
-v my_volume:/mydata \
ubuntu:14.04
</code></pre></div><p>도커 볼륨과 바인딩 되었는지 확인해보자.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-text"><code>$ docker start my_container
my_container

$ docker attach my_container

root@248ff308623a:/# ls 
mydata
...
</code></pre></div><p><code>docker volume rm &lt;볼륨 이름&gt;</code> 명령어로 볼륨을 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker volume rm my_volume
</code></pre></div><h2 id="container-registry"><a href="#container-registry" class="header-anchor">#</a> Container Registry</h2> <p><code>컨테이너 레지스트리(Container Registery)</code>는 도커 이미지를 저장할 수 있는 저장소다. 저장소를 원격 서버에 구축할 수도 있고 온프레미스 서버에 구축할 수도 있다. 대표적인 컨테이너 레지스트리는 다음과 같다.</p> <ul><li>Docker Hub</li> <li>AWS ECR (Elastic Container Registry)</li> <li>GCR (Google Container Registry)</li> <li>GHCR (GitHub Container Registry)</li></ul> <h2 id="도커-허브"><a href="#도커-허브" class="header-anchor">#</a> 도커 허브</h2> <p><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">도커 허브(Docker Hub)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>는 도커 이미지를 저장할 수 있는 원격 저장소다. 도커 허브는 크게 세 가지의 저장소를 제공한다.</p> <ul><li><code>Public repository</code>: 공개 원격 저장소, 무료 플랜 시 무제한 사용 가능하다.</li> <li><code>Private repository</code>: 비공개 원격 저장소, 무료 플랜 시 1개를 무료로 사용할 수 있다.</li> <li><code>Private registry</code>: 개인 서버에 구축하는 저장소</li></ul> <p>저장소에 따라 가격 정책이 다르며, <a href="https://hub.docker.com/billing/plan/update" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 확인할 수 있다.</p> <h3 id="도커-허브로-이미지-배포하기"><a href="#도커-허브로-이미지-배포하기" class="header-anchor">#</a> 도커 허브로 이미지 배포하기</h3> <p><code>Docker Hub</code>의 <code>Repository</code>를 사용하면 도커 이미지를 배포할 수 있다. <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에 접속하여 회원가입 후 <code>Repository &gt; Create Repository</code>를 클릭한다. 그리고 <code>Repository</code> 이름을 입력하고 Repository를 생성한다.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Repository의 이름은 이미지의 이름과 동일해야한다.</p></div> <p><img src="/blog/assets/img/3.d7f1e95a.png" alt=""></p> <p>생성에 성공하면 Repository 정보를 확인할 수 있다.</p> <p><img src="/blog/assets/img/4.b73e0c4d.png" alt=""></p> <p>이제 업로드할 이미지 이름 앞에 <b><u>사용자 이름</u></b>을 추가한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker tag test_image:0.1 yologger1013/test_image:0.1
REPOSITORY                  TAG       IMAGE ID       CREATED          SIZE
test_image                  0.1       0903d3cdd37e   41 minutes ago   211MB
yologger1013/test_image     0.1       0903d3cdd37e   41 minutes ago   211MB
</code></pre></div><p>그리고 <code>docker login</code> 명령어로 도커 허브에 로그인한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker login
Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.
Username: yologger1013
Password: 
Login Succeeded

Logging in with your password grants your terminal complete access to your account. 
For better security, log in with a limited-privilege personal access token. Learn more at https://docs.docker.com/go/access-tokens/
</code></pre></div><p>마지막으로 <code>docker push</code> 명령어로 이미지를 업로드한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker push yologger1013/test_image:0.1
The push refers to repository [docker.io/yologger1013/test_image]
d4b7a766cea6: Pushed 
83109fa660b2: Mounted from library/ubuntu 
30d3c4334a23: Mounted from library/ubuntu 
f2fa9f4cf8fd: Mounted from library/ubuntu 
0.1: digest: sha256:a7770184b5c0020cf9832e68509957bbca4498a4916c92a453047f184729e7f2 size: 1157
</code></pre></div><p>도커 허브에서 푸시한 이미지를 확인할 수 있다.</p> <p><img src="/blog/assets/img/6.fe253fa2.png" alt=""></p> <h3 id="도커-허브에서-이미지-다운받기"><a href="#도커-허브에서-이미지-다운받기" class="header-anchor">#</a> 도커 허브에서 이미지 다운받기</h3> <p><code>docker pull</code> 명령어로 도커 허브에서 이미지를 다운받을 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker pull yologger1013/test_image:0.1 

$ docker images
REPOSITORY                TAG       IMAGE ID       CREATED          SIZE
yologger1013/test_image   0.1       0903d3cdd37e   56 minutes ago   211MB
</code></pre></div><h2 id="ecr"><a href="#ecr" class="header-anchor">#</a> ECR</h2> <p><code>AWS ECR(Elastic Container Registry)</code>도 도커 이미지를 저장할 수 있는 원격 저장소다.</p> <h3 id="ecr에-저장소-생성하기"><a href="#ecr에-저장소-생성하기" class="header-anchor">#</a> ECR에 저장소 생성하기</h3> <p>먼저 AWS ECR에서 프라이빗 리포지토리를 생성한다.</p> <p><img src="/blog/assets/img/10.f8e1aa30.png" alt=""></p> <p>저장소 이름은 업로드할 이미지와 동일하도록 설정한다.</p> <p><img src="/blog/assets/img/11.315b35f1.png" alt=""></p> <h3 id="iam-사용자-생성하기"><a href="#iam-사용자-생성하기" class="header-anchor">#</a> IAM 사용자 생성하기</h3> <p><code>기존 정책 직접 연결</code>을 선택한 후</p> <p><img src="/blog/assets/img/12.dc380f8d.png" alt=""></p> <p><code>사용자 이름</code>을 입력하고 <code>프로그래밍 방식 액세스</code>를 선택한다.</p> <p><img src="/blog/assets/img/13.76163702.png" alt=""></p> <p><code>기존 정책 직접 연결</code>을 선택하고 <code>AmazonEC2ContainerRegistryFullAccess</code>를 선택한다.</p> <p><img src="/blog/assets/img/14.db2b7ea4.png" alt=""></p> <p><code>액세스 키</code>와 <code>비밀 키</code>를 기억해둔다.</p> <p><img src="/blog/assets/img/15.6450216f.png" alt=""></p> <h3 id="aws-cli-설치"><a href="#aws-cli-설치" class="header-anchor">#</a> AWS CLI 설치</h3> <p>먼저 Homebrew를 사용하여 <code>AWS CLI</code>를 설치한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew install awscli

$ aws --version
aws-cli/2.5.8 Python/3.9.12 Darwin/21.4.0 source/x86_64 prompt/off
</code></pre></div><p><code>aws configure</code> 명령어를 입력한 후 발급 받은 <code>액세스 키</code>와 <code>비밀 키</code>를 입력한다. 네 번째 항목은 입력하지 않아도 된다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws configure
AWS Access Key ID [None]: &lt;ACCESS_KEY&gt;
AWS Secret Access Key [None]: &lt;SECRET_KEY&gt;
Default region name [None]: &lt;REGION&gt;
Default output format [None]: 
</code></pre></div><p>이제 다음 명령어로 로그인한다. <code>Login Succeeded</code>가 출력되면 로그인에 성공한 것이다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws ecr get-login-password --region &lt;REGION&gt; | docker login --username AWS --password-stdin &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com
Login Succeeded
</code></pre></div><p><code>AWS_ACCOUNT_ID</code>는 IAM 콘솔에서 확인할 수 있다.</p> <p><img src="/blog/assets/img/16.faac307a.png" alt=""></p> <h3 id="이미지-push"><a href="#이미지-push" class="header-anchor">#</a> 이미지 Push</h3> <p>이제 이미지를 푸시해보자. 우선 이미지 이름을 다음 형식으로 변경해야한다. <u>이미지 이름과 저장소 이름이 동일해야한다.</u></p> <div class="language- extra-class"><pre class="language-text"><code>$ docker tag &lt;IMAGE&gt;:&lt;TAG&gt; &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com/&lt;IMAGE&gt;:&lt;TAG&gt;
</code></pre></div><p>이제 <code>docker push</code> 명령어로 이미지를 푸시할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker push &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com/&lt;IMAGE&gt;:&lt;TAG&gt;
</code></pre></div><p>저장소에 이미지가 푸시되었다.</p> <p><img src="/blog/assets/img/19.ffc6ba0b.png" alt=""></p> <h3 id="이미지-pull"><a href="#이미지-pull" class="header-anchor">#</a> 이미지 Pull</h3> <p>다음 명령어로 이미지를 풀 할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker pull &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com/&lt;IMAGE&gt;:&lt;TAG&gt;
</code></pre></div><p>쿠버네티스 클러스터가 구축된 노드(Ubuntu Server 20.04 LTS)에서 도커 이미지를 Pull해보자.</p> <p>가장 먼저 <code>aws cli</code>를 설치한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;
$ sudo apt install unzip
$ unzip awscliv2.zip
$ sudo ./aws/install
</code></pre></div><p><code>aws configure</code> 명령어로 <code>AmazonEC2ContainerRegistryFullAccess</code> 권한을 가진 사용자의 액세스 키, 비밀 키, 리전을 입력한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws configure
AWS Access Key ID [None]: &lt;YOUR_ACCESS_ID&gt;
AWS Secret Access Key [None]: &lt;YOUR_SECRET_ID&gt;
Default region name [None]: &lt;YOUR_REGION&gt;
Default output format [None]: 
</code></pre></div><p>인증 정보를 확인해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws configure list
      Name                    Value             Type    Location
      ----                    -----             ----    --------
   profile                &lt;not set&gt;             None    None
access_key     ****************KS4Y shared-credentials-file    
secret_key     ****************SNC4 shared-credentials-file    
    region           ap-northeast-2      config-file    ~/.aws/config
</code></pre></div><p>다음 명령어로 키를 확인할 수도 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws configure get aws_access_key_id

$ aws configure get aws_secret_access_key
</code></pre></div><p>그 다음 명령어로 로그인한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws ecr get-login-password --region &lt;REGION&gt; | docker login --username AWS --password-stdin &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com
</code></pre></div><p>로그인 과정에서 다음 에러가 발생할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock
</code></pre></div><p><code>Docker</code>는 <code>/var/run/docker.sock</code>를 사용하여 ECR과 통신한다. 그런데 현재 리눅스 사용자가 이 파일이 접근할 권한이 없어 발생하는 문제다. 따라서 현재 사용자를 <code>docker</code> 그룹에 포함시켜준다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ sudo usermod -a -G docker $USER
</code></pre></div><p>세션을 다시 연결하고 로그인을 시도해보자. <code>Login Succeeded</code>가 출력되면 로그인에 성공한 것이다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ aws ecr get-login-password --region &lt;REGION&gt; | docker login --username AWS --password-stdin &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com
Login Succeeded
</code></pre></div><p>이제 다음 명령어로 이미지를 다운받을 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker pull &lt;AWS_ACCOUNT_ID&gt;.dkr.ecr.&lt;REGION&gt;.amazonaws.com/&lt;IMAGE&gt;:&lt;TAG&gt;
</code></pre></div><h2 id="dockerfile-파일"><a href="#dockerfile-파일" class="header-anchor">#</a> Dockerfile 파일</h2> <p>지금까지 다음과 같은 순서로 도커 이미지를 생성했다.</p> <ol><li>Docker image로 Docker container 생성</li> <li>Docker container에 접속하여 필요한 어플리케이션 설치</li> <li><code>docker commit</code> 명령어로 이미지 생성</li></ol> <p>이러한 과정들을 <b><code>Dockerfile</code></b>라는 스크립트 파일에 나열한 후 쉽게 도커 이미지를 생성할 수 있다.</p> <p>예제를 살펴보자. 베이스가 되는 <code>ubuntu:18.04</code> 이미지에 <code>git</code>이 설치된 새로운 이미지를 생성할 것이다. 우선 디렉토리를 생성하자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ mkdir my_project

$ cd my_project 
</code></pre></div><p>그 다음 <code>Dockerfile</code>을 생성한다.</p> <div class="language- extra-class"><pre class="language-text"><code># 베이스가 될 이미지 지정
FROM ubuntu:18.04

# 패키지 매니저 업데이트
RUN apt update

# 패키지 매니저로 git 설치
RUN apt install -y git
</code></pre></div><h3 id="docker-build-명령어"><a href="#docker-build-명령어" class="header-anchor">#</a> docker build 명령어</h3> <p>이제 <code>docker build -t &lt;IMAGE_NAME&gt;:&lt;TAG&gt; .</code> 명령어로 이미지를 생성하자. 마지막 인자로 <code>Dockerfile</code>이 위치하는 현재 디렉토리 <code>.</code>를 전달한다.</p> <div class="language- extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-text"><code>$ docker build -t my_ubuntu_image:0.1 .
[+] Building 2.2s (8/8) FINISHED                                                                                              
 =&gt; [internal] load build definition from Dockerfile                                                                     0.0s
 =&gt; =&gt; transferring dockerfile: 36B                                                                                      0.0s
 =&gt; [internal] load .dockerignore                                                                                        0.0s
 =&gt; =&gt; transferring context: 2B                                                                                          0.0s
 =&gt; [internal] load metadata for docker.io/library/ubuntu:18.04                                                          2.1s
 =&gt; [auth] library/ubuntu:pull token for registry-1.docker.io                                                            0.0s
 =&gt; [1/3] FROM docker.io/library/ubuntu:18.04@sha256:982d72c16416b09ffd2f71aa381f761422085eda1379dc66b668653607969e38    0.0s
 =&gt; CACHED [2/3] RUN apt update                                                                                          0.0s
 =&gt; CACHED [3/3] RUN apt install -y git                                                                                  0.0s
 =&gt; exporting to image                                                                                                   0.0s
 =&gt; =&gt; exporting layers                                                                                                  0.0s
 =&gt; =&gt; writing image sha256:abf23e9807b83b21b052ec8ad3c569c3131b0b73acf49c133fa6b08ffa6d272b                             0.0s
 =&gt; =&gt; naming to docker.io/library/my_ubuntu_image:0.1        
</code></pre></div><p>생성된 이미지를 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker images
REPOSITORY        TAG       IMAGE ID       CREATED          SIZE
my_ubuntu_image   0.1       abf23e9807b8   24 minutes ago   197MB
</code></pre></div><p>마지막으로 생성한 이미지로 컨테이너를 생성해서 <code>git</code>이 설치되어있는지 확인해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker create -i -t --name my_ubuntu_container my_ubuntu_image:0.1

$ docker ps -a
CONTAINER ID   IMAGE                 COMMAND   CREATED          STATUS    PORTS     NAMES
92102fed06dd   my_ubuntu_image:0.1   &quot;bash&quot;    14 seconds ago   Created             my_ubuntu_container

$ docker start my_ubuntu_container

$ docker attach my_ubuntu_container
</code></pre></div><p><code>git</code>이 설치된 것을 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>root@1143426a0e96:/# git --version
git version 2.17.1
</code></pre></div><h3 id="dockerfile-명령어"><a href="#dockerfile-명령어" class="header-anchor">#</a> Dockerfile 명령어</h3> <h4 id="from"><a href="#from" class="header-anchor">#</a> FROM</h4> <ul><li>베이스가 될 이미지.</li> <li>Dockerfile에 반드시 한번 이상 입력해야한다.</li> <li>사용하려는 이미지가 없으면 자동으로 Pull한다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>FROM openjdk:8-jdk-alpine   // openjdk 8이 설치된 alpine linux 이미지
</code></pre></div><h4 id="workdir"><a href="#workdir" class="header-anchor">#</a> WORKDIR</h4> <ul><li><code>cd</code>명령어와 동일하다.</li> <li>디렉토리가 없으면 새로 생성한다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>WORKDIR /app
</code></pre></div><h4 id="copy"><a href="#copy" class="header-anchor">#</a> COPY</h4> <ul><li>Dockerfile이 위치하는 디렉토리에서 이미지 내부로 파일을 복사한다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// Dockerfile이 위치하는 디렉토리의 app.jar를 컨테이너 내부에 app.jar 라는 이름으로 복사
COPY app.jar app.jar

// Dockerfile이 위치하는 디렉토리의 run.sh를 컨테이너 내부에 run.sh 라는 이름으로 복사
COPY run.sh run.sh
</code></pre></div><h4 id="add"><a href="#add" class="header-anchor">#</a> ADD</h4> <ul><li>Dockerfile이 위치하는 디렉토리의 파일을 이미지에 추가</li></ul> <h4 id="run"><a href="#run" class="header-anchor">#</a> RUN</h4> <ul><li>컨테이너 내부에서 명령어를 실행한다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>RUN chmod 774 run.sh
</code></pre></div><h4 id="arg"><a href="#arg" class="header-anchor">#</a> ARG</h4> <ul><li>Dockerfile 내에서 빌드 시에 사용하는 변수를 설정한다.</li></ul> <h4 id="env"><a href="#env" class="header-anchor">#</a> ENV</h4> <ul><li>이미지에서 런타임에 사용할 환경변수를 지정한다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>ENV PROFILE=local
</code></pre></div><ul><li>도커 컨테이너 내부에서 환경변수를 설정하는 것과 동일하다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ PROFILE=local
</code></pre></div><h4 id="arg-2"><a href="#arg-2" class="header-anchor">#</a> ARG</h4> <ul><li>빌드 시 환경변수를 선언</li></ul> <h4 id="entrypoint"><a href="#entrypoint" class="header-anchor">#</a> ENTRYPOINT</h4> <ul><li>컨테이너가 실행될 때마다 실행할 명령어.</li> <li>Dockerfile에서 한번만 사용할 수 있다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// ENTRYPOINT [&quot;명령어&quot;, &quot;인자1&quot;, &quot;인자2&quot;, ...]
ENTRYPOINT [&quot;echo&quot;, &quot;Launching App.&quot;]
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ENTRYPOINT [&quot;./run.sh&quot;]
</code></pre></div><h4 id="expose"><a href="#expose" class="header-anchor">#</a> EXPOSE</h4> <ul><li>이미지에서 노출할 포트 지정</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/post/50_infra_devops/02_Linux/200707_linux_shell_script.html" class="prev">
        리눅스 쉘 스크립트
      </a></span> <span class="next"><a href="/blog/post/50_infra_devops/53_Docker/210103_docker_compose.html">
        Docker Compose
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.32362dc0.js" defer></script><script src="/blog/assets/js/3.8795c9a2.js" defer></script><script src="/blog/assets/js/24.421a250c.js" defer></script>
  </body>
</html>
