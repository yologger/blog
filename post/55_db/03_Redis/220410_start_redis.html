<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 정리 | Yologger&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="yologger&#39;s blog">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.0e080af6.css" as="style"><link rel="preload" href="/blog/assets/js/app.32362dc0.js" as="script"><link rel="preload" href="/blog/assets/js/3.8795c9a2.js" as="script"><link rel="preload" href="/blog/assets/js/77.963c60ef.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.009f8593.js"><link rel="prefetch" href="/blog/assets/js/100.04c8c108.js"><link rel="prefetch" href="/blog/assets/js/101.02907c78.js"><link rel="prefetch" href="/blog/assets/js/102.34e5043e.js"><link rel="prefetch" href="/blog/assets/js/103.9f91abc2.js"><link rel="prefetch" href="/blog/assets/js/104.31f63255.js"><link rel="prefetch" href="/blog/assets/js/105.8a43c1db.js"><link rel="prefetch" href="/blog/assets/js/106.b9460ed3.js"><link rel="prefetch" href="/blog/assets/js/107.f8cdc232.js"><link rel="prefetch" href="/blog/assets/js/108.8978a1ba.js"><link rel="prefetch" href="/blog/assets/js/109.968539f7.js"><link rel="prefetch" href="/blog/assets/js/11.70d9a8f5.js"><link rel="prefetch" href="/blog/assets/js/110.ad77dfe5.js"><link rel="prefetch" href="/blog/assets/js/111.a3e57423.js"><link rel="prefetch" href="/blog/assets/js/112.87034314.js"><link rel="prefetch" href="/blog/assets/js/113.2fcf2309.js"><link rel="prefetch" href="/blog/assets/js/114.8fed71aa.js"><link rel="prefetch" href="/blog/assets/js/115.a4990a06.js"><link rel="prefetch" href="/blog/assets/js/116.1780fd7a.js"><link rel="prefetch" href="/blog/assets/js/117.f22668d4.js"><link rel="prefetch" href="/blog/assets/js/118.bbe27d51.js"><link rel="prefetch" href="/blog/assets/js/119.25b9b643.js"><link rel="prefetch" href="/blog/assets/js/12.31f8420a.js"><link rel="prefetch" href="/blog/assets/js/120.9d9f48f0.js"><link rel="prefetch" href="/blog/assets/js/121.40af3a0c.js"><link rel="prefetch" href="/blog/assets/js/122.a636d2ef.js"><link rel="prefetch" href="/blog/assets/js/123.5c99f4f4.js"><link rel="prefetch" href="/blog/assets/js/124.3e75231d.js"><link rel="prefetch" href="/blog/assets/js/125.7cf1f005.js"><link rel="prefetch" href="/blog/assets/js/126.86bd0915.js"><link rel="prefetch" href="/blog/assets/js/127.34dfb59d.js"><link rel="prefetch" href="/blog/assets/js/128.cb8753b6.js"><link rel="prefetch" href="/blog/assets/js/129.75f1821b.js"><link rel="prefetch" href="/blog/assets/js/13.d86b1ae2.js"><link rel="prefetch" href="/blog/assets/js/130.352fa799.js"><link rel="prefetch" href="/blog/assets/js/131.57a5cee5.js"><link rel="prefetch" href="/blog/assets/js/132.b774b3fe.js"><link rel="prefetch" href="/blog/assets/js/133.5cea1190.js"><link rel="prefetch" href="/blog/assets/js/134.dbc3bbbd.js"><link rel="prefetch" href="/blog/assets/js/135.02ff9368.js"><link rel="prefetch" href="/blog/assets/js/136.f7128a40.js"><link rel="prefetch" href="/blog/assets/js/137.a3c425d9.js"><link rel="prefetch" href="/blog/assets/js/138.187b1e7e.js"><link rel="prefetch" href="/blog/assets/js/139.d581d7f6.js"><link rel="prefetch" href="/blog/assets/js/14.78cdbe3d.js"><link rel="prefetch" href="/blog/assets/js/140.1947f6c2.js"><link rel="prefetch" href="/blog/assets/js/141.d2397ceb.js"><link rel="prefetch" href="/blog/assets/js/142.a4fca10f.js"><link rel="prefetch" href="/blog/assets/js/143.868445e7.js"><link rel="prefetch" href="/blog/assets/js/144.a1c80310.js"><link rel="prefetch" href="/blog/assets/js/145.319913ba.js"><link rel="prefetch" href="/blog/assets/js/146.d19fd28e.js"><link rel="prefetch" href="/blog/assets/js/147.0f7acde4.js"><link rel="prefetch" href="/blog/assets/js/148.945a5b62.js"><link rel="prefetch" href="/blog/assets/js/149.eb4bec1b.js"><link rel="prefetch" href="/blog/assets/js/15.c479e5b5.js"><link rel="prefetch" href="/blog/assets/js/150.50892fe5.js"><link rel="prefetch" href="/blog/assets/js/151.c675ddff.js"><link rel="prefetch" href="/blog/assets/js/152.05d1ee8a.js"><link rel="prefetch" href="/blog/assets/js/153.75510d20.js"><link rel="prefetch" href="/blog/assets/js/154.f579d477.js"><link rel="prefetch" href="/blog/assets/js/155.12dbf578.js"><link rel="prefetch" href="/blog/assets/js/156.af8b54dd.js"><link rel="prefetch" href="/blog/assets/js/157.02eb87f5.js"><link rel="prefetch" href="/blog/assets/js/158.a1fbd08d.js"><link rel="prefetch" href="/blog/assets/js/159.75594bb8.js"><link rel="prefetch" href="/blog/assets/js/16.aec21ad3.js"><link rel="prefetch" href="/blog/assets/js/160.4eb83312.js"><link rel="prefetch" href="/blog/assets/js/161.104311e5.js"><link rel="prefetch" href="/blog/assets/js/162.aabbb479.js"><link rel="prefetch" href="/blog/assets/js/163.bf862198.js"><link rel="prefetch" href="/blog/assets/js/164.73e0e8e9.js"><link rel="prefetch" href="/blog/assets/js/165.052c0123.js"><link rel="prefetch" href="/blog/assets/js/166.f5eb35cc.js"><link rel="prefetch" href="/blog/assets/js/167.7a313045.js"><link rel="prefetch" href="/blog/assets/js/168.86fb56fe.js"><link rel="prefetch" href="/blog/assets/js/169.df883b7e.js"><link rel="prefetch" href="/blog/assets/js/17.3a9b6735.js"><link rel="prefetch" href="/blog/assets/js/170.47f0dbf7.js"><link rel="prefetch" href="/blog/assets/js/171.aec0020e.js"><link rel="prefetch" href="/blog/assets/js/172.c1d8c91b.js"><link rel="prefetch" href="/blog/assets/js/173.a6f2fcd6.js"><link rel="prefetch" href="/blog/assets/js/174.38b52e5e.js"><link rel="prefetch" href="/blog/assets/js/175.ae38f488.js"><link rel="prefetch" href="/blog/assets/js/176.29adebfe.js"><link rel="prefetch" href="/blog/assets/js/177.41b97ad0.js"><link rel="prefetch" href="/blog/assets/js/178.0fa9bbf3.js"><link rel="prefetch" href="/blog/assets/js/179.8559c981.js"><link rel="prefetch" href="/blog/assets/js/18.0c383095.js"><link rel="prefetch" href="/blog/assets/js/180.8733c320.js"><link rel="prefetch" href="/blog/assets/js/181.21e0e018.js"><link rel="prefetch" href="/blog/assets/js/182.b6e485e9.js"><link rel="prefetch" href="/blog/assets/js/183.c27d150d.js"><link rel="prefetch" href="/blog/assets/js/184.0fbcb691.js"><link rel="prefetch" href="/blog/assets/js/185.7e650b04.js"><link rel="prefetch" href="/blog/assets/js/186.6657fe1d.js"><link rel="prefetch" href="/blog/assets/js/187.551c064a.js"><link rel="prefetch" href="/blog/assets/js/188.8ba6e40b.js"><link rel="prefetch" href="/blog/assets/js/189.041316b7.js"><link rel="prefetch" href="/blog/assets/js/19.750739bf.js"><link rel="prefetch" href="/blog/assets/js/190.d71b0917.js"><link rel="prefetch" href="/blog/assets/js/191.a7d8bb61.js"><link rel="prefetch" href="/blog/assets/js/192.5fce8db9.js"><link rel="prefetch" href="/blog/assets/js/193.c5cc9ffb.js"><link rel="prefetch" href="/blog/assets/js/194.a63b6260.js"><link rel="prefetch" href="/blog/assets/js/195.d2e09806.js"><link rel="prefetch" href="/blog/assets/js/196.063ba68f.js"><link rel="prefetch" href="/blog/assets/js/197.d39d3324.js"><link rel="prefetch" href="/blog/assets/js/198.ce84b47e.js"><link rel="prefetch" href="/blog/assets/js/199.93c36c7f.js"><link rel="prefetch" href="/blog/assets/js/2.b088ac97.js"><link rel="prefetch" href="/blog/assets/js/20.13aea874.js"><link rel="prefetch" href="/blog/assets/js/200.48855557.js"><link rel="prefetch" href="/blog/assets/js/201.af6c3d13.js"><link rel="prefetch" href="/blog/assets/js/202.355fa950.js"><link rel="prefetch" href="/blog/assets/js/203.8b9a3978.js"><link rel="prefetch" href="/blog/assets/js/204.9d334517.js"><link rel="prefetch" href="/blog/assets/js/205.9d4d72ca.js"><link rel="prefetch" href="/blog/assets/js/206.2734a14e.js"><link rel="prefetch" href="/blog/assets/js/207.856430a2.js"><link rel="prefetch" href="/blog/assets/js/208.553763b5.js"><link rel="prefetch" href="/blog/assets/js/209.39f55833.js"><link rel="prefetch" href="/blog/assets/js/21.b5875938.js"><link rel="prefetch" href="/blog/assets/js/210.5c7be277.js"><link rel="prefetch" href="/blog/assets/js/211.8d787e7d.js"><link rel="prefetch" href="/blog/assets/js/212.97822173.js"><link rel="prefetch" href="/blog/assets/js/213.26729f1a.js"><link rel="prefetch" href="/blog/assets/js/214.7c6fd838.js"><link rel="prefetch" href="/blog/assets/js/215.ffa3d1cb.js"><link rel="prefetch" href="/blog/assets/js/216.5d2ebcf4.js"><link rel="prefetch" href="/blog/assets/js/217.17f13f17.js"><link rel="prefetch" href="/blog/assets/js/218.4209a714.js"><link rel="prefetch" href="/blog/assets/js/219.e1b478d8.js"><link rel="prefetch" href="/blog/assets/js/22.265c8215.js"><link rel="prefetch" href="/blog/assets/js/220.86c2079c.js"><link rel="prefetch" href="/blog/assets/js/221.1c717f8b.js"><link rel="prefetch" href="/blog/assets/js/222.585d0104.js"><link rel="prefetch" href="/blog/assets/js/223.29fc7e37.js"><link rel="prefetch" href="/blog/assets/js/224.d5e24637.js"><link rel="prefetch" href="/blog/assets/js/225.df1946ac.js"><link rel="prefetch" href="/blog/assets/js/226.2aa1c4d7.js"><link rel="prefetch" href="/blog/assets/js/227.a751e31d.js"><link rel="prefetch" href="/blog/assets/js/228.6e330b47.js"><link rel="prefetch" href="/blog/assets/js/229.77229d7b.js"><link rel="prefetch" href="/blog/assets/js/23.c83da651.js"><link rel="prefetch" href="/blog/assets/js/230.062a5ac1.js"><link rel="prefetch" href="/blog/assets/js/231.87bbf70b.js"><link rel="prefetch" href="/blog/assets/js/232.31af7ed9.js"><link rel="prefetch" href="/blog/assets/js/233.b1a58839.js"><link rel="prefetch" href="/blog/assets/js/234.68cec967.js"><link rel="prefetch" href="/blog/assets/js/235.ea62ee88.js"><link rel="prefetch" href="/blog/assets/js/236.a2f2b050.js"><link rel="prefetch" href="/blog/assets/js/237.e7cad44f.js"><link rel="prefetch" href="/blog/assets/js/238.81b4b5a3.js"><link rel="prefetch" href="/blog/assets/js/239.1c862178.js"><link rel="prefetch" href="/blog/assets/js/24.421a250c.js"><link rel="prefetch" href="/blog/assets/js/240.18b5df51.js"><link rel="prefetch" href="/blog/assets/js/241.aa077fb6.js"><link rel="prefetch" href="/blog/assets/js/242.c63afd4d.js"><link rel="prefetch" href="/blog/assets/js/243.b2129f8c.js"><link rel="prefetch" href="/blog/assets/js/244.ff8e7a30.js"><link rel="prefetch" href="/blog/assets/js/245.88169faa.js"><link rel="prefetch" href="/blog/assets/js/246.fa9199da.js"><link rel="prefetch" href="/blog/assets/js/247.cdd33986.js"><link rel="prefetch" href="/blog/assets/js/248.765f4cb5.js"><link rel="prefetch" href="/blog/assets/js/249.2a26a296.js"><link rel="prefetch" href="/blog/assets/js/25.154520e5.js"><link rel="prefetch" href="/blog/assets/js/250.439fb16a.js"><link rel="prefetch" href="/blog/assets/js/251.e057e7e0.js"><link rel="prefetch" href="/blog/assets/js/252.34794853.js"><link rel="prefetch" href="/blog/assets/js/253.c622fcbd.js"><link rel="prefetch" href="/blog/assets/js/254.74a70b9f.js"><link rel="prefetch" href="/blog/assets/js/255.fed47ff6.js"><link rel="prefetch" href="/blog/assets/js/256.a88005ca.js"><link rel="prefetch" href="/blog/assets/js/257.11083964.js"><link rel="prefetch" href="/blog/assets/js/258.0b1a7d73.js"><link rel="prefetch" href="/blog/assets/js/259.62c584ff.js"><link rel="prefetch" href="/blog/assets/js/26.4a88bf4d.js"><link rel="prefetch" href="/blog/assets/js/260.1063ea57.js"><link rel="prefetch" href="/blog/assets/js/261.8f065193.js"><link rel="prefetch" href="/blog/assets/js/262.f796ed15.js"><link rel="prefetch" href="/blog/assets/js/263.38c3508c.js"><link rel="prefetch" href="/blog/assets/js/264.6a5fb90f.js"><link rel="prefetch" href="/blog/assets/js/265.79985a16.js"><link rel="prefetch" href="/blog/assets/js/266.58737293.js"><link rel="prefetch" href="/blog/assets/js/267.c0489be8.js"><link rel="prefetch" href="/blog/assets/js/268.9b482a12.js"><link rel="prefetch" href="/blog/assets/js/269.d807798b.js"><link rel="prefetch" href="/blog/assets/js/27.7f6c507f.js"><link rel="prefetch" href="/blog/assets/js/270.62e46aaf.js"><link rel="prefetch" href="/blog/assets/js/271.a2636662.js"><link rel="prefetch" href="/blog/assets/js/272.2c029ac2.js"><link rel="prefetch" href="/blog/assets/js/273.c0803a3e.js"><link rel="prefetch" href="/blog/assets/js/274.feed5dcb.js"><link rel="prefetch" href="/blog/assets/js/275.d026e4d0.js"><link rel="prefetch" href="/blog/assets/js/276.6348ed02.js"><link rel="prefetch" href="/blog/assets/js/277.cb5be1e0.js"><link rel="prefetch" href="/blog/assets/js/28.86691d04.js"><link rel="prefetch" href="/blog/assets/js/29.34f07073.js"><link rel="prefetch" href="/blog/assets/js/30.c7caa137.js"><link rel="prefetch" href="/blog/assets/js/31.07b08573.js"><link rel="prefetch" href="/blog/assets/js/32.2d17c55c.js"><link rel="prefetch" href="/blog/assets/js/33.34659507.js"><link rel="prefetch" href="/blog/assets/js/34.ca823a5d.js"><link rel="prefetch" href="/blog/assets/js/35.fdee0018.js"><link rel="prefetch" href="/blog/assets/js/36.1df26e75.js"><link rel="prefetch" href="/blog/assets/js/37.e84c6798.js"><link rel="prefetch" href="/blog/assets/js/38.0ab020a7.js"><link rel="prefetch" href="/blog/assets/js/39.c752cd4a.js"><link rel="prefetch" href="/blog/assets/js/4.dce05cd8.js"><link rel="prefetch" href="/blog/assets/js/40.e6ff46a5.js"><link rel="prefetch" href="/blog/assets/js/41.7b5ace1e.js"><link rel="prefetch" href="/blog/assets/js/42.bd14936e.js"><link rel="prefetch" href="/blog/assets/js/43.d12fece7.js"><link rel="prefetch" href="/blog/assets/js/44.6fca8fd5.js"><link rel="prefetch" href="/blog/assets/js/45.907b4f15.js"><link rel="prefetch" href="/blog/assets/js/46.f9d2e206.js"><link rel="prefetch" href="/blog/assets/js/47.b1653fc1.js"><link rel="prefetch" href="/blog/assets/js/48.99b3c7bb.js"><link rel="prefetch" href="/blog/assets/js/49.828907da.js"><link rel="prefetch" href="/blog/assets/js/5.7193cd84.js"><link rel="prefetch" href="/blog/assets/js/50.f51f2a3e.js"><link rel="prefetch" href="/blog/assets/js/51.29a6e8ea.js"><link rel="prefetch" href="/blog/assets/js/52.4d64b497.js"><link rel="prefetch" href="/blog/assets/js/53.12dca8e6.js"><link rel="prefetch" href="/blog/assets/js/54.e3c4fef4.js"><link rel="prefetch" href="/blog/assets/js/55.b801643c.js"><link rel="prefetch" href="/blog/assets/js/56.a3d351a1.js"><link rel="prefetch" href="/blog/assets/js/57.cfabc431.js"><link rel="prefetch" href="/blog/assets/js/58.8a3cbbf5.js"><link rel="prefetch" href="/blog/assets/js/59.a5a7464b.js"><link rel="prefetch" href="/blog/assets/js/6.98f083fd.js"><link rel="prefetch" href="/blog/assets/js/60.affca2b3.js"><link rel="prefetch" href="/blog/assets/js/61.adf43eb0.js"><link rel="prefetch" href="/blog/assets/js/62.480ff614.js"><link rel="prefetch" href="/blog/assets/js/63.725f57dc.js"><link rel="prefetch" href="/blog/assets/js/64.ee3ea45f.js"><link rel="prefetch" href="/blog/assets/js/65.a9874219.js"><link rel="prefetch" href="/blog/assets/js/66.ec0c5b17.js"><link rel="prefetch" href="/blog/assets/js/67.043a2f09.js"><link rel="prefetch" href="/blog/assets/js/68.c85cdc1a.js"><link rel="prefetch" href="/blog/assets/js/69.24eb94a2.js"><link rel="prefetch" href="/blog/assets/js/7.a3939503.js"><link rel="prefetch" href="/blog/assets/js/70.7ab8f348.js"><link rel="prefetch" href="/blog/assets/js/71.3f967059.js"><link rel="prefetch" href="/blog/assets/js/72.296c112d.js"><link rel="prefetch" href="/blog/assets/js/73.4bad88aa.js"><link rel="prefetch" href="/blog/assets/js/74.ad674c4d.js"><link rel="prefetch" href="/blog/assets/js/75.6e3c3e6d.js"><link rel="prefetch" href="/blog/assets/js/76.e027ccc7.js"><link rel="prefetch" href="/blog/assets/js/78.b6ecfd1c.js"><link rel="prefetch" href="/blog/assets/js/79.5c540919.js"><link rel="prefetch" href="/blog/assets/js/8.af2847e2.js"><link rel="prefetch" href="/blog/assets/js/80.cb971025.js"><link rel="prefetch" href="/blog/assets/js/81.8fea14a9.js"><link rel="prefetch" href="/blog/assets/js/82.e177062a.js"><link rel="prefetch" href="/blog/assets/js/83.c89e463b.js"><link rel="prefetch" href="/blog/assets/js/84.89d68e32.js"><link rel="prefetch" href="/blog/assets/js/85.12901aa6.js"><link rel="prefetch" href="/blog/assets/js/86.f7b120e4.js"><link rel="prefetch" href="/blog/assets/js/87.a620f73f.js"><link rel="prefetch" href="/blog/assets/js/88.aef154fa.js"><link rel="prefetch" href="/blog/assets/js/89.9f71412f.js"><link rel="prefetch" href="/blog/assets/js/9.820df2c6.js"><link rel="prefetch" href="/blog/assets/js/90.dd797eb4.js"><link rel="prefetch" href="/blog/assets/js/91.2f4cee08.js"><link rel="prefetch" href="/blog/assets/js/92.fcbd90d3.js"><link rel="prefetch" href="/blog/assets/js/93.49088527.js"><link rel="prefetch" href="/blog/assets/js/94.2162a1ba.js"><link rel="prefetch" href="/blog/assets/js/95.69c4c5ba.js"><link rel="prefetch" href="/blog/assets/js/96.70c77a1a.js"><link rel="prefetch" href="/blog/assets/js/97.77ecde0a.js"><link rel="prefetch" href="/blog/assets/js/98.bdec1ab1.js"><link rel="prefetch" href="/blog/assets/js/99.928b66ab.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.0e080af6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.jpg" alt="Yologger's Blog" class="logo"> <span class="site-name can-hide">Yologger's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/post/01_java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/post/02_kotlin/" class="nav-link">
  Kotlin
</a></div><div class="nav-item"><a href="/blog/post/30_spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/blog/post/20_android/" class="nav-link">
  Android
</a></div><div class="nav-item"><a href="/blog/post/50_infra_devops/" class="nav-link">
  Infra/DevOps
</a></div><div class="nav-item"><a href="/blog/post/55_db/" class="nav-link router-link-active">
  DB
</a></div><div class="nav-item"><a href="/blog/post/60_cs/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/post/80_more/" class="nav-link">
  More
</a></div><div class="nav-item"><a href="https://github.com/yologger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/post/01_java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/post/02_kotlin/" class="nav-link">
  Kotlin
</a></div><div class="nav-item"><a href="/blog/post/30_spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/blog/post/20_android/" class="nav-link">
  Android
</a></div><div class="nav-item"><a href="/blog/post/50_infra_devops/" class="nav-link">
  Infra/DevOps
</a></div><div class="nav-item"><a href="/blog/post/55_db/" class="nav-link router-link-active">
  DB
</a></div><div class="nav-item"><a href="/blog/post/60_cs/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/post/80_more/" class="nav-link">
  More
</a></div><div class="nav-item"><a href="https://github.com/yologger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/post/55_db/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mongo DB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/post/55_db/03_Redis/220410_start_redis.html" aria-current="page" class="active sidebar-link">Redis 정리</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Elastic Search</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ERD</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h1> <p></p><div class="table-of-contents"><ul><li><a href="#redis-설정">Redis 설정</a><ul><li><a href="#redis-설치">Redis 설치</a></li><li><a href="#redis-설치-위치">Redis 설치 위치</a></li><li><a href="#redis-서버-설정-파일">Redis 서버 설정 파일</a></li><li><a href="#redis-시작">Redis 시작</a></li><li><a href="#redis-상태-확인">Redis 상태 확인</a></li><li><a href="#redis-재시작">Redis 재시작</a></li><li><a href="#redis-종료">Redis 종료</a></li></ul></li><li><a href="#redis-cli">redis-cli</a></li><li><a href="#redis의-데이터-타입">Redis의 데이터 타입</a></li><li><a href="#string">String</a><ul><li><a href="#string-저장">String 저장</a></li><li><a href="#string-조회">String 조회</a></li><li><a href="#키-이름-변경">키 이름 변경</a></li><li><a href="#키-개수-조회">키 개수 조회</a></li><li><a href="#키-조회">키 조회</a></li><li><a href="#string-삭제">String 삭제</a></li></ul></li><li><a href="#list">List</a><ul><li><a href="#rpush">RPUSH</a></li><li><a href="#lpush">LPUSH</a></li><li><a href="#lrange">LRANGE</a></li><li><a href="#lpop">LPOP</a></li><li><a href="#rpop">RPOP</a></li><li><a href="#lindex">LINDEX</a></li></ul></li><li><a href="#set">Set</a><ul><li><a href="#sadd">SADD</a></li><li><a href="#smembers">SMEMBERS</a></li><li><a href="#srem">SREM</a></li><li><a href="#sunion">SUNION</a></li><li><a href="#sinter">SINTER</a></li><li><a href="#sdiff">SDIFF</a></li></ul></li><li><a href="#hash">Hash</a><ul><li><a href="#hset">HSET</a></li><li><a href="#hget">HGET</a></li><li><a href="#hmset">HMSET</a></li><li><a href="#hmget">HMGET</a></li><li><a href="#hgetall">HGETALL</a></li><li><a href="#hdel">HDEL</a></li></ul></li><li><a href="#type-명령어">TYPE 명령어</a></li><li><a href="#flushall-명령어">FLUSHALL 명령어</a></li><li><a href="#redis-expire">Redis Expire</a></li><li><a href="#redis-namespace">Redis Namespace</a><ul><li><a href="#namespace를-redis-데이터베이스-설계에-활용하기">Namespace를 Redis 데이터베이스 설계에 활용하기</a></li></ul></li><li><a href="#redis-multi-database">Redis Multi Database</a></li><li><a href="#redis-persistent">Redis Persistent</a><ul><li><a href="#rdb">RDB</a></li><li><a href="#aof">AOF</a></li></ul></li><li><a href="#ha와-redis-replication">HA와 Redis Replication</a></li><li><a href="#redis-pub-sub">Redis PUB/SUB</a></li><li><a href="#redis-stream">Redis Stream</a></li><li><a href="#medis-2">Medis 2</a></li><li><a href="#redis-labs">Redis Labs</a></li></ul></div><p></p> <h1 id="redis-정리"><a href="#redis-정리" class="header-anchor">#</a> Redis 정리</h1> <ul><li><code>Key-Value</code> 구조의 NoSQL 데이터베이스</li> <li>관계형 데이터베이스처럼 테이블을 설계하거나 외래키 설정이 불가능하다.</li> <li>디스크 기반이 아니라 인메모리 방식을 사용하기 때문에 입출력 적어 속도가 빠르다.</li> <li>인메모리 방식이기 때문에 애플리케이션이 다운되거나 재시작되면 데이터가 사라진다. 이 때문에 다음과 같은 방법으로 데이터를 백업한다.
<ul><li>디스크에 데이터를 저장</li> <li>다른 노드에 복사본 저장</li></ul></li> <li>세션 스토어, 데이터베이스 캐시, 공유 저장소 등에 사용된다.</li> <li>Publish/Subscribe 모델을 지원하기 때문에 메시지 큐로도 사용할 수 있다.</li></ul> <h2 id="redis-설정"><a href="#redis-설정" class="header-anchor">#</a> Redis 설정</h2> <p><code>Redis</code>의 설치, 사용 방법에 대해 정리한다.</p> <h3 id="redis-설치"><a href="#redis-설치" class="header-anchor">#</a> Redis 설치</h3> <p><code>Mac OS</code>에서는 <code>Homebrew</code>로 Redis를 설치할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew install redis
</code></pre></div><p>설치 정보를 확인해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew info redis
redis: stable 7.0.0 (bottled), HEAD
Persistent key-value database, with built-in net interface
https://redis.io/
/usr/local/Cellar/redis/7.0.0 (14 files, 2.6MB) *
  Poured from bottle on 2022-05-04 at 12:55:03
From: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/redis.rb
License: BSD-3-Clause
==&gt; Dependencies
Required: openssl@1.1 ✔
==&gt; Options
--HEAD
	Install HEAD version
==&gt; Caveats
To restart redis after an upgrade:
  brew services restart redis
Or, if you don't want/need a background service you can just run:
  /usr/local/opt/redis/bin/redis-server /usr/local/etc/redis.conf
==&gt; Analytics
install: 77,367 (30 days), 155,724 (90 days), 648,001 (365 days)
install-on-request: 76,894 (30 days), 154,909 (90 days), 643,952 (365 days)
build-error: 14 (30 days)
</code></pre></div><p>버전을 확인해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-server --version
Redis server v=6.2.6 sha=00000000:0 malloc=libc bits=64 build=c6f3693d1aced7d9
</code></pre></div><h3 id="redis-설치-위치"><a href="#redis-설치-위치" class="header-anchor">#</a> Redis 설치 위치</h3> <p>Homebrew로 Redis를 설치한 경우 <code>/usr/local/opt/redis</code> 경로에 Redis가 설치된다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ cd /usr/local/opt

$ ls | grep redis
redis
redis@6.2
redis@7.0
</code></pre></div><h3 id="redis-서버-설정-파일"><a href="#redis-서버-설정-파일" class="header-anchor">#</a> Redis 서버 설정 파일</h3> <p>Redis 서버는 <code>redis.confg</code>로 환경설정을 할 수 있다. Homebrew로 Redis를 설치한 경우 <code>/usr/local/etc</code>에 위치한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ cd /usr/local/etc  

$ ls | grep redis.conf
redis.conf
redis.conf.default
</code></pre></div><h3 id="redis-시작"><a href="#redis-시작" class="header-anchor">#</a> Redis 시작</h3> <p><code>redis-server</code> 명령어로 Redis를 시작할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-server
52712:C 15 Apr 2022 11:06:15.382 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
52712:C 15 Apr 2022 11:06:15.382 # Redis version=6.2.6, bits=64, commit=00000000, modified=0, pid=52712, just started
52712:C 15 Apr 2022 11:06:15.382 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
52712:M 15 Apr 2022 11:06:15.383 * Increased maximum number of open files to 10032 (it was originally set to 256).
52712:M 15 Apr 2022 11:06:15.383 * monotonic clock: POSIX clock_gettime
                _._                                                  
           _.-``__ ''-._                                             
      _.-``    `.  `_.  ''-._           Redis 6.2.6 (00000000/0) 64 bit
  .-`` .-```.  ```\/    _.,_ ''-._                                  
 (    '      ,       .-`  | `,    )     Running in standalone mode
 |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
 |    `-._   `._    /     _.-'    |     PID: 52712
  `-._    `-._  `-./  _.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |           https://redis.io       
  `-._    `-._`-.__.-'_.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |                                  
  `-._    `-._`-.__.-'_.-'    _.-'                                   
      `-._    `-.__.-'    _.-'                                       
          `-._        _.-'                                           
              `-.__.-'                                               

52712:M 15 Apr 2022 11:06:15.385 # Server initialized
52712:M 15 Apr 2022 11:06:15.385 * Ready to accept connections
</code></pre></div><p><code>brew services start redis</code>로 redis를 백그라운드로 실행할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew services start redis
</code></pre></div><h3 id="redis-상태-확인"><a href="#redis-상태-확인" class="header-anchor">#</a> Redis 상태 확인</h3> <div class="language- extra-class"><pre class="language-text"><code>$ brew services list
Name    Status  User     File             
redis   started yologger ~/Library/LaunchAgents/homebrew.mxcl.redis.plist
</code></pre></div><h3 id="redis-재시작"><a href="#redis-재시작" class="header-anchor">#</a> Redis 재시작</h3> <div class="language- extra-class"><pre class="language-text"><code>$ brew services restart redis
</code></pre></div><h3 id="redis-종료"><a href="#redis-종료" class="header-anchor">#</a> Redis 종료</h3> <div class="language- extra-class"><pre class="language-text"><code>$ brew services stop redis
</code></pre></div><h2 id="redis-cli"><a href="#redis-cli" class="header-anchor">#</a> redis-cli</h2> <p><code>redis-cli</code>는 커맨드라인 기반 데이터베이스 클라이언트다. redis-cli로 redis에 접속해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli
&gt; 
</code></pre></div><h2 id="redis의-데이터-타입"><a href="#redis의-데이터-타입" class="header-anchor">#</a> Redis의 데이터 타입</h2> <p><code>Redis</code>는 관계형 데이터베이스가 아니기 때문에 관계형 데이터베이스의 일반적인 데이터 타입을 지원하지 않는다. Redis가 지원하는 데이터 타입은 다음과 같다.</p> <ul><li>String</li> <li>List</li> <li>Set</li> <li>Hash</li></ul> <h2 id="string"><a href="#string" class="header-anchor">#</a> String</h2> <p>Redis는 대부분의 데이터를 문자열로 표현한다. <u>숫자, 날짜, 시간 등도 <b>문자열</b>로 저장된다.</u></p> <div class="language- extra-class"><pre class="language-text"><code>&gt; set name &quot;Paul&quot;
&gt; set age 35
&gt; set createdAt &quot;2022-04-03 21:51:13.742000&quot;
</code></pre></div><h3 id="string-저장"><a href="#string-저장" class="header-anchor">#</a> String 저장</h3> <p><code>SET &lt;KEY&gt; &lt;VALUE&gt;</code>로 문자열을 저장한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SET name &quot;paul&quot;
OK

&gt; SET email &quot;yologger1013@gmail.com&quot;
OK

&gt; SET password &quot;1234&quot;
OK

&gt; SET nation &quot;Korea&quot;
OK

&gt; SET age 30
OK
</code></pre></div><h3 id="string-조회"><a href="#string-조회" class="header-anchor">#</a> String 조회</h3> <p><code>GET &lt;KEY&gt;</code>로 문자열을 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; GET name
&quot;paul&quot;

&gt; GET email
&quot;Korea&quot;
</code></pre></div><h3 id="키-이름-변경"><a href="#키-이름-변경" class="header-anchor">#</a> 키 이름 변경</h3> <p><code>RENAME &lt;OLD KEY&gt; &lt;NEY KEY&gt;</code>로 키 이름을 변경한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; RENAME name nickname
OK
</code></pre></div><h3 id="키-개수-조회"><a href="#키-개수-조회" class="header-anchor">#</a> 키 개수 조회</h3> <p><code>DBSIZE</code>로 데이터 개수를 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; DBSIZE
(integer) 3
</code></pre></div><h3 id="키-조회"><a href="#키-조회" class="header-anchor">#</a> 키 조회</h3> <p><code>KEYS &lt;PATTERN&gt;</code> 형태로 키를 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; KEYS *
1) &quot;name&quot;
2) &quot;password&quot;
3) &quot;age&quot;
4) &quot;email&quot;
5) &quot;nation&quot;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&gt; KEYS n*
1) &quot;name&quot;
2) &quot;nation&quot;
</code></pre></div><h3 id="string-삭제"><a href="#string-삭제" class="header-anchor">#</a> String 삭제</h3> <p><code>DEL &lt;KEY&gt;</code>로 문자열을 삭제한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; DEL name
(integer) 1
</code></pre></div><p>여러 데이터를 동시에 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; DEL email password
(integer) 2
</code></pre></div><p><code>FLUSHALL</code>로 모든 데이터를 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; DBSIZE
(integer) 3

&gt; FLUSHALL
OK

&gt; DBSIZE
(integer) 0
</code></pre></div><p>String과 관련된 모든 명령어는 <a href="http://redisgate.kr/redis/command/strings.php" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 확인할 수 있다.</p> <h2 id="list"><a href="#list" class="header-anchor">#</a> List</h2> <p><code>List</code>를 사용하면 하나의 키에 여러 값을 저장할 수 있다. List와 관련된 모든 명령어는 <a href="http://redisgate.kr/redis/command/lists.php" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 확인할 수 있다.</p> <h3 id="rpush"><a href="#rpush" class="header-anchor">#</a> RPUSH</h3> <p><code>RPUSH &lt;key&gt; &lt;element element ..&gt;</code>형태로 리스트의 오른쪽에 요소를 추가한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; RPUSH score 1 2 3 4 5
(integer) 5

&gt; RPUSH score 6 7
(integer) 7

&gt; LRANGE score 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
4) &quot;4&quot;
5) &quot;5&quot;
6) &quot;6&quot;
7) &quot;7&quot;
</code></pre></div><h3 id="lpush"><a href="#lpush" class="header-anchor">#</a> LPUSH</h3> <p>리스트의 왼쪽에 값을 추가한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; RPUSH score 1 2 3 4 5
(integer) 5

&gt; LPUSH score 6 7
(integer) 7

&gt; LRANGE score 0 -1
1) &quot;7&quot;
2) &quot;6&quot;
3) &quot;1&quot;
4) &quot;2&quot;
5) &quot;3&quot;
6) &quot;4&quot;
7) &quot;5&quot;
</code></pre></div><h3 id="lrange"><a href="#lrange" class="header-anchor">#</a> LRANGE</h3> <p><code>LRANGE &lt;START&gt; &lt;STOP&gt;</code>형태로 사용하며 범위에 해당하는 요소들을 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; RPUSH score 1 2 3 4 5
(integer) 5

&gt; LRANGE score 0 2
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
</code></pre></div><p><code>-1</code>은 List의 끝을 가리킨다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; LRANGE score 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
4) &quot;4&quot;
5) &quot;5&quot;
</code></pre></div><h3 id="lpop"><a href="#lpop" class="header-anchor">#</a> LPOP</h3> <p><code>LPOP &lt;KEY&gt; &lt;COUNT&gt;</code> 형태로 사용하며, 리스트의 첫 번째 요소를 제거한 후 반환한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; LRANGE score 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
4) &quot;4&quot;
5) &quot;5&quot;

&gt; LPOP score
&quot;1&quot;

&gt; LPOP score 2
1) &quot;2&quot;
2) &quot;3&quot;

&gt; LRANGE score 0 -1
1) &quot;4&quot;
2) &quot;5&quot;
</code></pre></div><h3 id="rpop"><a href="#rpop" class="header-anchor">#</a> RPOP</h3> <p><code>RPOP &lt;KEY&gt; &lt;COUNT&gt;</code> 형태로 사용하며, 리스트의 마지막 요소를 제거한 후 반환한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; LRANGE score 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
4) &quot;4&quot;
5) &quot;5&quot;

&gt; RPOP score
&quot;5&quot;

&gt; RPOP score 2
1) &quot;4&quot;
2) &quot;3&quot;

&gt; LRANGE score 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
</code></pre></div><h3 id="lindex"><a href="#lindex" class="header-anchor">#</a> LINDEX</h3> <p><code>LINDEX [KEY] [INDEX]</code>형태로 사용하며 해당 인덱스의 요소를 반환한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; LRANGE players 0 -1
1) &quot;paul&quot;
2) &quot;john&quot;
3) &quot;kane&quot;
4) &quot;monica&quot;

&gt; LINDEX players 0
&quot;paul&quot;

&gt; LINDEX players 1
&quot;john&quot;
</code></pre></div><h2 id="set"><a href="#set" class="header-anchor">#</a> Set</h2> <p><code>List</code>와 유사하지만 중복을 허용하지 않으며, 순서가 없다. 모든 명령어는 <a href="http://redisgate.kr/redis/command/sets.php" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 확인할 수 있다.</p> <h3 id="sadd"><a href="#sadd" class="header-anchor">#</a> SADD</h3> <p><code>SADD [KEY] [ELEMENT] [ELEMENT]..</code> 형태로 데이터를 추가한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SADD players &quot;paul&quot; &quot;smith&quot;
(integer) 2

&gt; SMEMBERS players
1) &quot;paul&quot;
2) &quot;smith&quot;

&gt; SADD players &quot;paul&quot; &quot;john&quot;
(integer) 1

&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smith&quot;
3) &quot;paul&quot;
</code></pre></div><h3 id="smembers"><a href="#smembers" class="header-anchor">#</a> SMEMBERS</h3> <p><code>SMEMBERS [KEY]</code> 형태로 사용하며 모든 요소를 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smith&quot;
3) &quot;paul&quot;
</code></pre></div><h3 id="srem"><a href="#srem" class="header-anchor">#</a> SREM</h3> <p><code>SREM [KEY] [ELEMENT]</code>형태로 사용하며 요소를 삭제한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smtih&quot;
3) &quot;paul&quot;

&gt; SREM players &quot;paul&quot;
(integer) 1

&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smtih&quot;
</code></pre></div><h3 id="sunion"><a href="#sunion" class="header-anchor">#</a> SUNION</h3> <p><code>SUNION [KEY 1] [KEY 2]</code>형태로 사용하며 합집합을 반환한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smtih&quot;
3) &quot;lampard&quot;

&gt; SMEMBERS managers
1) &quot;gerrard&quot;
2) &quot;lampard&quot;
3) &quot;ferguson&quot;

&gt; SUNION players managers
1) &quot;gerrard&quot;
2) &quot;lampard&quot;
3) &quot;john&quot;
4) &quot;smtih&quot;
5) &quot;ferguson&quot;
</code></pre></div><h3 id="sinter"><a href="#sinter" class="header-anchor">#</a> SINTER</h3> <p><code>SINTER [KEY 1] [KEY 2]</code>형태로 사용하며 교집합을 반환한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smtih&quot;
3) &quot;lampard&quot;

&gt; SMEMBERS managers
1) &quot;gerrard&quot;
2) &quot;lampard&quot;
3) &quot;ferguson&quot;

&gt; SINTER players managers
1) &quot;lampard&quot;
</code></pre></div><h3 id="sdiff"><a href="#sdiff" class="header-anchor">#</a> SDIFF</h3> <p><code>SDIFF [KEY 1] [KEY 2]</code>형태로 사용하며 차집합을 반환한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SMEMBERS players
1) &quot;john&quot;
2) &quot;smtih&quot;
3) &quot;lampard&quot;

&gt; SMEMBERS managers
1) &quot;gerrard&quot;
2) &quot;lampard&quot;
3) &quot;ferguson&quot;

&gt; SDIFF players managers
1) &quot;smtih&quot;
2) &quot;john&quot;
</code></pre></div><h2 id="hash"><a href="#hash" class="header-anchor">#</a> Hash</h2> <p><b><code>Hash</code></b>는 하나의 <code>Key</code>에 여러 <code>Field:Value</code>를 저장할 수 있다.</p> <h3 id="hset"><a href="#hset" class="header-anchor">#</a> HSET</h3> <p><code>HSET &lt;KEY&gt; &lt;FIELD VALUE&gt;</code> 형태로 사용한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; HSET paul email &quot;paul@gmail.com&quot;
(integer) 1
</code></pre></div><h3 id="hget"><a href="#hget" class="header-anchor">#</a> HGET</h3> <p><code>HGET &lt;KEY&gt; &lt;FIELD&gt;</code>형태로 사용한다.</p> <div class="language- extra-class"><pre class="language-text"><code>HGET paul email
&quot;paul@gmail.com&quot;
</code></pre></div><h3 id="hmset"><a href="#hmset" class="header-anchor">#</a> HMSET</h3> <p><code>hmset &lt;KEY&gt; &lt;FIELD VALUE&gt; &lt;FIELD VALUE&gt; &lt;FIELD VALUE&gt; ...</code> 형태로 사용한다</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; HMSET paul email &quot;paul@gmail.com&quot; nation &quot;Korea&quot; age 30
OK
</code></pre></div><h3 id="hmget"><a href="#hmget" class="header-anchor">#</a> HMGET</h3> <p><code>HMGET &lt;KEY&gt; &lt;FIELD&gt; &lt;FIELD&gt; ...</code> 형태로 사용한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; HMGET paul email nation age
1) &quot;paul@gmail.com&quot;
2) &quot;Korea&quot;
3) &quot;30&quot;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&gt; HMGET paul email nation
1) &quot;paul@gmail.com&quot;
2) &quot;Korea&quot;
</code></pre></div><h3 id="hgetall"><a href="#hgetall" class="header-anchor">#</a> HGETALL</h3> <p><code>HGETALL [KEY]</code>형태로 사용하며 모든 field와 value를 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; HMSET paul email &quot;paul@gmail.com&quot; nation &quot;Korea&quot; age 30
OK

&gt; HGETALL paul
1) &quot;email&quot;
2) &quot;paul@gmail.com&quot;
3) &quot;nation&quot;
4) &quot;Korea&quot;
5) &quot;age&quot;
6) &quot;30&quot;
</code></pre></div><h3 id="hdel"><a href="#hdel" class="header-anchor">#</a> HDEL</h3> <p><code>HDEL [KEY] [FIELD] [FIELD] ...</code>형태로 사용하며 지정한 Field와 Value를 삭제한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; HMSET paul email &quot;paul@gmail.com&quot; nation &quot;Korea&quot; age 30
OK

&gt; HGETALL paul
1) &quot;email&quot;
2) &quot;paul@gmail.com&quot;
3) &quot;nation&quot;
4) &quot;Korea&quot;
5) &quot;age&quot;
6) &quot;30&quot;

&gt; HDEL paul nation age
(integer) 2

&gt; HGETALL paul
1) &quot;email&quot;
2) &quot;paul@gmail.com&quot;
</code></pre></div><h2 id="type-명령어"><a href="#type-명령어" class="header-anchor">#</a> TYPE 명령어</h2> <p><code>TYPE &lt;KEY&gt;</code> 명령어로 타입을 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; TYPE person
set

&gt; TYPE person:a4be06b1-b445-42fe-a70f-0fdee111cf55
hash
</code></pre></div><h2 id="flushall-명령어"><a href="#flushall-명령어" class="header-anchor">#</a> FLUSHALL 명령어</h2> <p><code>FLUSHALL</code> 명령어로 모든 키를 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; FLUSHALL
OK

&gt; KEYS *
(empty array)
</code></pre></div><h2 id="redis-expire"><a href="#redis-expire" class="header-anchor">#</a> Redis Expire</h2> <p><code>Redis</code>는 저장한 데이터에 expire를 설정할 수 있다. <code>EXPIRE [KEY] [SECOND]</code> 명령어를 사용하면 된다.</p> <div class="language- extra-class"><pre class="language-text"><code>// 데이터 저장
&gt; SET name &quot;Paul&quot;

// 만료 시간 설정 
&gt; EXPIRE name 10
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// 10초가 지나기 전
&gt; GET name
&quot;Paul&quot;

// 10초가 지난 후
&gt; GET name
(nil)
</code></pre></div><p><code>TTL</code> 명령어로 남은 시간 또는 만료 후 지나간 시간을 조회할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; TTL name  
5   // 만료되기 5초 전

&gt; TTL name
-5  // 만료된 후 5초
</code></pre></div><p><code>PERSIST</code> 명령어로 expire를 해제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; PERSIST name
</code></pre></div><h2 id="redis-namespace"><a href="#redis-namespace" class="header-anchor">#</a> Redis Namespace</h2> <p><code>Namespace</code>를 활용하면 데이터를 체계적으로 데이터베이스에 저장할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; SET programmer:android:name &quot;Paul&quot;
&gt; SET programmer:spring:name &quot;John&quot;
&gt; SET designer:name &quot;Monica&quot;
&gt; SET marketer:name &quot;Rachel&quot;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>GET programmer:android:name
GET programmer:spring:name
GET designer:name
GET marketer:name
</code></pre></div><p>위 예제에서는 Namespace로 <code>콜론(:)</code>을 사용했다. 하지만 스택 오버플로우를 검색해보니 <code>슬래시(/)</code>를 사용하기도 한다. 구분자의 제한이 없는 것 같다.</p> <h3 id="namespace를-redis-데이터베이스-설계에-활용하기"><a href="#namespace를-redis-데이터베이스-설계에-활용하기" class="header-anchor">#</a> Namespace를 Redis 데이터베이스 설계에 활용하기</h3> <p><code>관계형 데이터베이스</code>와 <code>Redis</code>는 구조적으로 다르기 때문에 데이터베이스 설계방식도 다르다.</p> <p>우선 관계형 데이터베이스를 살펴보자. 애플리케이션의 회원 정보를 담는 <code>member</code>테이블과 회원의 게시글 정보를 담는 <code>post</code>테이블이 있다.
회원은 여러 게시글을 가질 수 있으므로 <code>member</code> 테이블과 <code>post</code> 테이블은 <code>일대다(One to Many)</code>관계이며, 이를 다이어그램으로 표현하면 다음과 같다.</p> <p><img src="/blog/assets/img/4.1b731303.png" alt=""></p> <p>테이블을 생성하는 DDL은 다음과 같을 것이다.</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE TABLE member (
    member_id BIGINT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    email VARCHAR(255) 
);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>CREATE TABLE post (
    post_id BIGINT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    member_id BIGINT,
    title VARCHAR(255),
    content TEXT,
    FOREIGN KEY member_id REFERENCES member(member_id)
);
</code></pre></div><p>반면 Redis는 테이블이라는 개념 자체가 없다. 또한 외래키라는 개념도 없으므로 테이블 간 연관관계를 표현할 수도 없다. 따라서 마치 리눅스의 디렉토리 구조처럼 <code>Namespace</code>를 활용하여 데이터를 저장해야한다.</p> <p><img src="/blog/assets/img/5.c32ec067.png" alt=""></p> <div class="language- extra-class"><pre class="language-text"><code>&gt; HMSET post:1:1 title &quot;programming&quot; content &quot;I love programming&quot;
&gt; HMGET post:1:1 title content
1) &quot;programming&quot;
2) &quot;I love programming&quot;
</code></pre></div><h2 id="redis-multi-database"><a href="#redis-multi-database" class="header-anchor">#</a> Redis Multi Database</h2> <p><code>Redis</code>는 여러 데이터베이스를 가질 수 있으며 기본적으로 16개의 데이터베이스가 제공된다. 설정파일에서 개수를 변경할 수 있으며, Homebrew로 Redis를 설치한 경우 <code>/usr/local/etc/redis.conf</code>에 위치한다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-text"><code># Set the number of databases. The default database is DB 0, you can select
# a different one on a per-connection basis using SELECT &lt;dbid&gt; where
# dbid is a number between 0 and 'databases'-1
databases 16
</code></pre></div><p><code>redis-cli</code>로 Redis에 연결할 때 <code>-n</code> 옵션으로 데이터베이스를 선택할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli -n 3
redis-cli[3] &gt; 
</code></pre></div><p>옵션을 지정하지 않으면 0번 데이터베이스를 사용하게 된다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli
redis-cli &gt; 
</code></pre></div><p>Redis에 이미 연결된 상태에서는 <code>SELECT</code> 명령어로 데이터베이스를 변경할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>redis-cli[3]&gt; SELECT 5
OK

redis-cli[5]&gt; 
</code></pre></div><p><code>Medis 2</code>를 사용하는 경우 화면 하단에서 데이터베이스를 선택할 수 있다.</p> <p><img src="/blog/assets/img/3.3fe8a1a1.png" alt=""></p> <h2 id="redis-persistent"><a href="#redis-persistent" class="header-anchor">#</a> Redis Persistent</h2> <p>인메모리 방식이기 때문에 애플리케이션이 다운되거나 재시작되면 데이터가 사라진다. 이 때문에 다음과 같은 방법으로 데이터를 백업할 수 있다.</p> <h3 id="rdb"><a href="#rdb" class="header-anchor">#</a> RDB</h3> <p>현재 메모리 상태에 대한 스냅샷을 디스크에 저장한다.</p> <div class="language- extra-class"><pre class="language-text"><code># redis.conf
dbfilename dump.rdb
</code></pre></div><h3 id="aof"><a href="#aof" class="header-anchor">#</a> AOF</h3> <p><code>AOF(Append Only File)</code>은 추가, 수정, 삭제 명령이 실행될 때 마다 파일에 기록한다.</p> <div class="language- extra-class"><pre class="language-text"><code># redis.conf
appendonly yes # default no
appendfilename appendonly.aof # 파일이름 설정
appendfsync everysec # 디스크 동기화를 얼마나 자주할 것인가 (always, everysec, no)
</code></pre></div><h2 id="ha와-redis-replication"><a href="#ha와-redis-replication" class="header-anchor">#</a> HA와 Redis Replication</h2> <p><code>Redis Replication</code>을 사용하면 데이터를 이중화하여 <code>HA(High Availability, 고가용성)</code>을 확보할 수 있다. 쉽게 설명하면 다른 레디스 노드에 데이터를 복사하는 것이다.</p> <p>레디스는 Master/Slave 모델의 Replication을 제공한다. 여러 레디스 노드 중 하나를 Master로 선정하여 사용하고, 데이터를 다른 노드에 저장한다. Master 노드에 장애가 발생하면 다른 Slave 노드를 Master로 승격하며, 특정 Slave 노드를 Master 노드로 변경할 수도 있다.</p> <h2 id="redis-pub-sub"><a href="#redis-pub-sub" class="header-anchor">#</a> Redis PUB/SUB</h2> <p><code>Redis PUB/SUB</code>를 사용하면 Redis를 메시지 브로커로 사용할 수 있다. Redis PUB/SUB은 <code>채널(Channel)</code>을 통해 메시지를 전달한다.</p> <p>메시지 수신 역할을 할 터미널을 오픈하고 <code>subscribe &lt;CHANNEL_NAME&gt;</code> 명령어를 입력하면 채널을 구독하게 된다. 채널이 없다면 자동으로 생성한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli

&gt; subscribe channel1
Reading messages... (press Ctrl-C to quit)
</code></pre></div><p>메시지 전송 역할을 할 터미널을 오픈하고 <code>publish &lt;CHANNEL_NAME&gt; &lt;MESSAGE&gt;</code> 명령어를 입력하면 채널로 메시지를 보내게 된다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli

&gt; publish channel1 &quot;message1&quot;
</code></pre></div><p>수신 측 터미널에 메시지가 출력된다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; subscribe test_channel
Reading messages... (press Ctrl-C to quit)
1) &quot;message1&quot;
</code></pre></div><p><code>pubsub channels</code> 명령어로 채널 목록을 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; pubsub channels
</code></pre></div><p>다음과 같이 여러 채널을 동시에 구독할 수도 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; subscribe channel1 channel2
</code></pre></div><p>한 채널을 여러 구독자가 구독할 수도 있으며, 구독자 하나도 없는 채널은 자동으로 삭제된다.</p> <p><code>Redis</code>는 Kafka와 달리 메시지를 디스크에 저장(Queuing)하지 않기 때문에 구독 전 전송된 메시지를 읽을 수 없으며, 메시지가 유실될 수도 있다. 따라서 메시지 영속성을 보장하려면 별도의 데이터베이스에 메시지를 저장해야한다.</p> <h2 id="redis-stream"><a href="#redis-stream" class="header-anchor">#</a> Redis Stream</h2> <p>레디스 5.0부터 도입된 <code>Redis Stream</code>은 Redis Channel과 다르게 메시지를 저장(Queing)한다. 이 때문에 메시지 브로커보단 메시지 큐에 가깝다.</p> <div class="custom-block tip"><p class="custom-block-title">information</p> <p>정리 중인 컨텐츠 입니다.</p></div> <h2 id="medis-2"><a href="#medis-2" class="header-anchor">#</a> Medis 2</h2> <p><code>Medis 2</code>는 Redis를 위한 GUI Database Client다. Medis는 애플 앱 스토어에서 설치할 수 있다.</p> <p><img src="/blog/assets/img/1.294ec7d9.png" alt=""></p> <p><img src="/blog/assets/img/2.39af5934.png" alt=""></p> <h2 id="redis-labs"><a href="#redis-labs" class="header-anchor">#</a> Redis Labs</h2> <p><code>Redis</code> 클라우드 서비스를 제공한다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/post/55_db/02_Mongo DB/210102_start_mongo.html" class="prev">
        Mongo DB 정리
      </a></span> <span class="next"><a href="/blog/post/55_db/05_Elastic Search/220410_elastic_search.html">
        ElasticSearch, ELK 스택 시작하기
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.32362dc0.js" defer></script><script src="/blog/assets/js/3.8795c9a2.js" defer></script><script src="/blog/assets/js/77.963c60ef.js" defer></script>
  </body>
</html>
