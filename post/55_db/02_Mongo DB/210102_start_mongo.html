<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mongo DB 정리 | Yologger&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="yologger&#39;s blog">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.0e080af6.css" as="style"><link rel="preload" href="/blog/assets/js/app.32362dc0.js" as="script"><link rel="preload" href="/blog/assets/js/3.8795c9a2.js" as="script"><link rel="preload" href="/blog/assets/js/148.945a5b62.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.009f8593.js"><link rel="prefetch" href="/blog/assets/js/100.04c8c108.js"><link rel="prefetch" href="/blog/assets/js/101.02907c78.js"><link rel="prefetch" href="/blog/assets/js/102.34e5043e.js"><link rel="prefetch" href="/blog/assets/js/103.9f91abc2.js"><link rel="prefetch" href="/blog/assets/js/104.31f63255.js"><link rel="prefetch" href="/blog/assets/js/105.8a43c1db.js"><link rel="prefetch" href="/blog/assets/js/106.b9460ed3.js"><link rel="prefetch" href="/blog/assets/js/107.f8cdc232.js"><link rel="prefetch" href="/blog/assets/js/108.8978a1ba.js"><link rel="prefetch" href="/blog/assets/js/109.968539f7.js"><link rel="prefetch" href="/blog/assets/js/11.70d9a8f5.js"><link rel="prefetch" href="/blog/assets/js/110.ad77dfe5.js"><link rel="prefetch" href="/blog/assets/js/111.a3e57423.js"><link rel="prefetch" href="/blog/assets/js/112.87034314.js"><link rel="prefetch" href="/blog/assets/js/113.2fcf2309.js"><link rel="prefetch" href="/blog/assets/js/114.8fed71aa.js"><link rel="prefetch" href="/blog/assets/js/115.a4990a06.js"><link rel="prefetch" href="/blog/assets/js/116.1780fd7a.js"><link rel="prefetch" href="/blog/assets/js/117.f22668d4.js"><link rel="prefetch" href="/blog/assets/js/118.bbe27d51.js"><link rel="prefetch" href="/blog/assets/js/119.25b9b643.js"><link rel="prefetch" href="/blog/assets/js/12.31f8420a.js"><link rel="prefetch" href="/blog/assets/js/120.9d9f48f0.js"><link rel="prefetch" href="/blog/assets/js/121.40af3a0c.js"><link rel="prefetch" href="/blog/assets/js/122.a636d2ef.js"><link rel="prefetch" href="/blog/assets/js/123.5c99f4f4.js"><link rel="prefetch" href="/blog/assets/js/124.3e75231d.js"><link rel="prefetch" href="/blog/assets/js/125.7cf1f005.js"><link rel="prefetch" href="/blog/assets/js/126.86bd0915.js"><link rel="prefetch" href="/blog/assets/js/127.34dfb59d.js"><link rel="prefetch" href="/blog/assets/js/128.cb8753b6.js"><link rel="prefetch" href="/blog/assets/js/129.75f1821b.js"><link rel="prefetch" href="/blog/assets/js/13.d86b1ae2.js"><link rel="prefetch" href="/blog/assets/js/130.352fa799.js"><link rel="prefetch" href="/blog/assets/js/131.57a5cee5.js"><link rel="prefetch" href="/blog/assets/js/132.b774b3fe.js"><link rel="prefetch" href="/blog/assets/js/133.5cea1190.js"><link rel="prefetch" href="/blog/assets/js/134.dbc3bbbd.js"><link rel="prefetch" href="/blog/assets/js/135.02ff9368.js"><link rel="prefetch" href="/blog/assets/js/136.f7128a40.js"><link rel="prefetch" href="/blog/assets/js/137.a3c425d9.js"><link rel="prefetch" href="/blog/assets/js/138.187b1e7e.js"><link rel="prefetch" href="/blog/assets/js/139.d581d7f6.js"><link rel="prefetch" href="/blog/assets/js/14.78cdbe3d.js"><link rel="prefetch" href="/blog/assets/js/140.1947f6c2.js"><link rel="prefetch" href="/blog/assets/js/141.d2397ceb.js"><link rel="prefetch" href="/blog/assets/js/142.a4fca10f.js"><link rel="prefetch" href="/blog/assets/js/143.868445e7.js"><link rel="prefetch" href="/blog/assets/js/144.a1c80310.js"><link rel="prefetch" href="/blog/assets/js/145.319913ba.js"><link rel="prefetch" href="/blog/assets/js/146.d19fd28e.js"><link rel="prefetch" href="/blog/assets/js/147.0f7acde4.js"><link rel="prefetch" href="/blog/assets/js/149.eb4bec1b.js"><link rel="prefetch" href="/blog/assets/js/15.c479e5b5.js"><link rel="prefetch" href="/blog/assets/js/150.50892fe5.js"><link rel="prefetch" href="/blog/assets/js/151.c675ddff.js"><link rel="prefetch" href="/blog/assets/js/152.05d1ee8a.js"><link rel="prefetch" href="/blog/assets/js/153.75510d20.js"><link rel="prefetch" href="/blog/assets/js/154.f579d477.js"><link rel="prefetch" href="/blog/assets/js/155.12dbf578.js"><link rel="prefetch" href="/blog/assets/js/156.af8b54dd.js"><link rel="prefetch" href="/blog/assets/js/157.02eb87f5.js"><link rel="prefetch" href="/blog/assets/js/158.a1fbd08d.js"><link rel="prefetch" href="/blog/assets/js/159.75594bb8.js"><link rel="prefetch" href="/blog/assets/js/16.aec21ad3.js"><link rel="prefetch" href="/blog/assets/js/160.4eb83312.js"><link rel="prefetch" href="/blog/assets/js/161.104311e5.js"><link rel="prefetch" href="/blog/assets/js/162.aabbb479.js"><link rel="prefetch" href="/blog/assets/js/163.bf862198.js"><link rel="prefetch" href="/blog/assets/js/164.73e0e8e9.js"><link rel="prefetch" href="/blog/assets/js/165.052c0123.js"><link rel="prefetch" href="/blog/assets/js/166.f5eb35cc.js"><link rel="prefetch" href="/blog/assets/js/167.7a313045.js"><link rel="prefetch" href="/blog/assets/js/168.86fb56fe.js"><link rel="prefetch" href="/blog/assets/js/169.df883b7e.js"><link rel="prefetch" href="/blog/assets/js/17.3a9b6735.js"><link rel="prefetch" href="/blog/assets/js/170.47f0dbf7.js"><link rel="prefetch" href="/blog/assets/js/171.aec0020e.js"><link rel="prefetch" href="/blog/assets/js/172.c1d8c91b.js"><link rel="prefetch" href="/blog/assets/js/173.a6f2fcd6.js"><link rel="prefetch" href="/blog/assets/js/174.38b52e5e.js"><link rel="prefetch" href="/blog/assets/js/175.ae38f488.js"><link rel="prefetch" href="/blog/assets/js/176.29adebfe.js"><link rel="prefetch" href="/blog/assets/js/177.41b97ad0.js"><link rel="prefetch" href="/blog/assets/js/178.0fa9bbf3.js"><link rel="prefetch" href="/blog/assets/js/179.8559c981.js"><link rel="prefetch" href="/blog/assets/js/18.0c383095.js"><link rel="prefetch" href="/blog/assets/js/180.8733c320.js"><link rel="prefetch" href="/blog/assets/js/181.21e0e018.js"><link rel="prefetch" href="/blog/assets/js/182.b6e485e9.js"><link rel="prefetch" href="/blog/assets/js/183.c27d150d.js"><link rel="prefetch" href="/blog/assets/js/184.0fbcb691.js"><link rel="prefetch" href="/blog/assets/js/185.7e650b04.js"><link rel="prefetch" href="/blog/assets/js/186.6657fe1d.js"><link rel="prefetch" href="/blog/assets/js/187.551c064a.js"><link rel="prefetch" href="/blog/assets/js/188.8ba6e40b.js"><link rel="prefetch" href="/blog/assets/js/189.041316b7.js"><link rel="prefetch" href="/blog/assets/js/19.750739bf.js"><link rel="prefetch" href="/blog/assets/js/190.d71b0917.js"><link rel="prefetch" href="/blog/assets/js/191.a7d8bb61.js"><link rel="prefetch" href="/blog/assets/js/192.5fce8db9.js"><link rel="prefetch" href="/blog/assets/js/193.c5cc9ffb.js"><link rel="prefetch" href="/blog/assets/js/194.a63b6260.js"><link rel="prefetch" href="/blog/assets/js/195.d2e09806.js"><link rel="prefetch" href="/blog/assets/js/196.063ba68f.js"><link rel="prefetch" href="/blog/assets/js/197.d39d3324.js"><link rel="prefetch" href="/blog/assets/js/198.ce84b47e.js"><link rel="prefetch" href="/blog/assets/js/199.93c36c7f.js"><link rel="prefetch" href="/blog/assets/js/2.b088ac97.js"><link rel="prefetch" href="/blog/assets/js/20.13aea874.js"><link rel="prefetch" href="/blog/assets/js/200.48855557.js"><link rel="prefetch" href="/blog/assets/js/201.af6c3d13.js"><link rel="prefetch" href="/blog/assets/js/202.355fa950.js"><link rel="prefetch" href="/blog/assets/js/203.8b9a3978.js"><link rel="prefetch" href="/blog/assets/js/204.9d334517.js"><link rel="prefetch" href="/blog/assets/js/205.9d4d72ca.js"><link rel="prefetch" href="/blog/assets/js/206.2734a14e.js"><link rel="prefetch" href="/blog/assets/js/207.856430a2.js"><link rel="prefetch" href="/blog/assets/js/208.553763b5.js"><link rel="prefetch" href="/blog/assets/js/209.39f55833.js"><link rel="prefetch" href="/blog/assets/js/21.b5875938.js"><link rel="prefetch" href="/blog/assets/js/210.5c7be277.js"><link rel="prefetch" href="/blog/assets/js/211.8d787e7d.js"><link rel="prefetch" href="/blog/assets/js/212.97822173.js"><link rel="prefetch" href="/blog/assets/js/213.26729f1a.js"><link rel="prefetch" href="/blog/assets/js/214.7c6fd838.js"><link rel="prefetch" href="/blog/assets/js/215.ffa3d1cb.js"><link rel="prefetch" href="/blog/assets/js/216.5d2ebcf4.js"><link rel="prefetch" href="/blog/assets/js/217.17f13f17.js"><link rel="prefetch" href="/blog/assets/js/218.4209a714.js"><link rel="prefetch" href="/blog/assets/js/219.e1b478d8.js"><link rel="prefetch" href="/blog/assets/js/22.265c8215.js"><link rel="prefetch" href="/blog/assets/js/220.86c2079c.js"><link rel="prefetch" href="/blog/assets/js/221.1c717f8b.js"><link rel="prefetch" href="/blog/assets/js/222.585d0104.js"><link rel="prefetch" href="/blog/assets/js/223.29fc7e37.js"><link rel="prefetch" href="/blog/assets/js/224.d5e24637.js"><link rel="prefetch" href="/blog/assets/js/225.df1946ac.js"><link rel="prefetch" href="/blog/assets/js/226.2aa1c4d7.js"><link rel="prefetch" href="/blog/assets/js/227.a751e31d.js"><link rel="prefetch" href="/blog/assets/js/228.6e330b47.js"><link rel="prefetch" href="/blog/assets/js/229.77229d7b.js"><link rel="prefetch" href="/blog/assets/js/23.c83da651.js"><link rel="prefetch" href="/blog/assets/js/230.062a5ac1.js"><link rel="prefetch" href="/blog/assets/js/231.87bbf70b.js"><link rel="prefetch" href="/blog/assets/js/232.31af7ed9.js"><link rel="prefetch" href="/blog/assets/js/233.b1a58839.js"><link rel="prefetch" href="/blog/assets/js/234.68cec967.js"><link rel="prefetch" href="/blog/assets/js/235.ea62ee88.js"><link rel="prefetch" href="/blog/assets/js/236.a2f2b050.js"><link rel="prefetch" href="/blog/assets/js/237.e7cad44f.js"><link rel="prefetch" href="/blog/assets/js/238.81b4b5a3.js"><link rel="prefetch" href="/blog/assets/js/239.1c862178.js"><link rel="prefetch" href="/blog/assets/js/24.421a250c.js"><link rel="prefetch" href="/blog/assets/js/240.18b5df51.js"><link rel="prefetch" href="/blog/assets/js/241.aa077fb6.js"><link rel="prefetch" href="/blog/assets/js/242.c63afd4d.js"><link rel="prefetch" href="/blog/assets/js/243.b2129f8c.js"><link rel="prefetch" href="/blog/assets/js/244.ff8e7a30.js"><link rel="prefetch" href="/blog/assets/js/245.88169faa.js"><link rel="prefetch" href="/blog/assets/js/246.fa9199da.js"><link rel="prefetch" href="/blog/assets/js/247.cdd33986.js"><link rel="prefetch" href="/blog/assets/js/248.765f4cb5.js"><link rel="prefetch" href="/blog/assets/js/249.2a26a296.js"><link rel="prefetch" href="/blog/assets/js/25.154520e5.js"><link rel="prefetch" href="/blog/assets/js/250.439fb16a.js"><link rel="prefetch" href="/blog/assets/js/251.e057e7e0.js"><link rel="prefetch" href="/blog/assets/js/252.34794853.js"><link rel="prefetch" href="/blog/assets/js/253.c622fcbd.js"><link rel="prefetch" href="/blog/assets/js/254.74a70b9f.js"><link rel="prefetch" href="/blog/assets/js/255.fed47ff6.js"><link rel="prefetch" href="/blog/assets/js/256.a88005ca.js"><link rel="prefetch" href="/blog/assets/js/257.11083964.js"><link rel="prefetch" href="/blog/assets/js/258.0b1a7d73.js"><link rel="prefetch" href="/blog/assets/js/259.62c584ff.js"><link rel="prefetch" href="/blog/assets/js/26.4a88bf4d.js"><link rel="prefetch" href="/blog/assets/js/260.1063ea57.js"><link rel="prefetch" href="/blog/assets/js/261.8f065193.js"><link rel="prefetch" href="/blog/assets/js/262.f796ed15.js"><link rel="prefetch" href="/blog/assets/js/263.38c3508c.js"><link rel="prefetch" href="/blog/assets/js/264.6a5fb90f.js"><link rel="prefetch" href="/blog/assets/js/265.79985a16.js"><link rel="prefetch" href="/blog/assets/js/266.58737293.js"><link rel="prefetch" href="/blog/assets/js/267.c0489be8.js"><link rel="prefetch" href="/blog/assets/js/268.9b482a12.js"><link rel="prefetch" href="/blog/assets/js/269.d807798b.js"><link rel="prefetch" href="/blog/assets/js/27.7f6c507f.js"><link rel="prefetch" href="/blog/assets/js/270.62e46aaf.js"><link rel="prefetch" href="/blog/assets/js/271.a2636662.js"><link rel="prefetch" href="/blog/assets/js/272.2c029ac2.js"><link rel="prefetch" href="/blog/assets/js/273.c0803a3e.js"><link rel="prefetch" href="/blog/assets/js/274.feed5dcb.js"><link rel="prefetch" href="/blog/assets/js/275.d026e4d0.js"><link rel="prefetch" href="/blog/assets/js/276.6348ed02.js"><link rel="prefetch" href="/blog/assets/js/277.cb5be1e0.js"><link rel="prefetch" href="/blog/assets/js/28.86691d04.js"><link rel="prefetch" href="/blog/assets/js/29.34f07073.js"><link rel="prefetch" href="/blog/assets/js/30.c7caa137.js"><link rel="prefetch" href="/blog/assets/js/31.07b08573.js"><link rel="prefetch" href="/blog/assets/js/32.2d17c55c.js"><link rel="prefetch" href="/blog/assets/js/33.34659507.js"><link rel="prefetch" href="/blog/assets/js/34.ca823a5d.js"><link rel="prefetch" href="/blog/assets/js/35.fdee0018.js"><link rel="prefetch" href="/blog/assets/js/36.1df26e75.js"><link rel="prefetch" href="/blog/assets/js/37.e84c6798.js"><link rel="prefetch" href="/blog/assets/js/38.0ab020a7.js"><link rel="prefetch" href="/blog/assets/js/39.c752cd4a.js"><link rel="prefetch" href="/blog/assets/js/4.dce05cd8.js"><link rel="prefetch" href="/blog/assets/js/40.e6ff46a5.js"><link rel="prefetch" href="/blog/assets/js/41.7b5ace1e.js"><link rel="prefetch" href="/blog/assets/js/42.bd14936e.js"><link rel="prefetch" href="/blog/assets/js/43.d12fece7.js"><link rel="prefetch" href="/blog/assets/js/44.6fca8fd5.js"><link rel="prefetch" href="/blog/assets/js/45.907b4f15.js"><link rel="prefetch" href="/blog/assets/js/46.f9d2e206.js"><link rel="prefetch" href="/blog/assets/js/47.b1653fc1.js"><link rel="prefetch" href="/blog/assets/js/48.99b3c7bb.js"><link rel="prefetch" href="/blog/assets/js/49.828907da.js"><link rel="prefetch" href="/blog/assets/js/5.7193cd84.js"><link rel="prefetch" href="/blog/assets/js/50.f51f2a3e.js"><link rel="prefetch" href="/blog/assets/js/51.29a6e8ea.js"><link rel="prefetch" href="/blog/assets/js/52.4d64b497.js"><link rel="prefetch" href="/blog/assets/js/53.12dca8e6.js"><link rel="prefetch" href="/blog/assets/js/54.e3c4fef4.js"><link rel="prefetch" href="/blog/assets/js/55.b801643c.js"><link rel="prefetch" href="/blog/assets/js/56.a3d351a1.js"><link rel="prefetch" href="/blog/assets/js/57.cfabc431.js"><link rel="prefetch" href="/blog/assets/js/58.8a3cbbf5.js"><link rel="prefetch" href="/blog/assets/js/59.a5a7464b.js"><link rel="prefetch" href="/blog/assets/js/6.98f083fd.js"><link rel="prefetch" href="/blog/assets/js/60.affca2b3.js"><link rel="prefetch" href="/blog/assets/js/61.adf43eb0.js"><link rel="prefetch" href="/blog/assets/js/62.480ff614.js"><link rel="prefetch" href="/blog/assets/js/63.725f57dc.js"><link rel="prefetch" href="/blog/assets/js/64.ee3ea45f.js"><link rel="prefetch" href="/blog/assets/js/65.a9874219.js"><link rel="prefetch" href="/blog/assets/js/66.ec0c5b17.js"><link rel="prefetch" href="/blog/assets/js/67.043a2f09.js"><link rel="prefetch" href="/blog/assets/js/68.c85cdc1a.js"><link rel="prefetch" href="/blog/assets/js/69.24eb94a2.js"><link rel="prefetch" href="/blog/assets/js/7.a3939503.js"><link rel="prefetch" href="/blog/assets/js/70.7ab8f348.js"><link rel="prefetch" href="/blog/assets/js/71.3f967059.js"><link rel="prefetch" href="/blog/assets/js/72.296c112d.js"><link rel="prefetch" href="/blog/assets/js/73.4bad88aa.js"><link rel="prefetch" href="/blog/assets/js/74.ad674c4d.js"><link rel="prefetch" href="/blog/assets/js/75.6e3c3e6d.js"><link rel="prefetch" href="/blog/assets/js/76.e027ccc7.js"><link rel="prefetch" href="/blog/assets/js/77.963c60ef.js"><link rel="prefetch" href="/blog/assets/js/78.b6ecfd1c.js"><link rel="prefetch" href="/blog/assets/js/79.5c540919.js"><link rel="prefetch" href="/blog/assets/js/8.af2847e2.js"><link rel="prefetch" href="/blog/assets/js/80.cb971025.js"><link rel="prefetch" href="/blog/assets/js/81.8fea14a9.js"><link rel="prefetch" href="/blog/assets/js/82.e177062a.js"><link rel="prefetch" href="/blog/assets/js/83.c89e463b.js"><link rel="prefetch" href="/blog/assets/js/84.89d68e32.js"><link rel="prefetch" href="/blog/assets/js/85.12901aa6.js"><link rel="prefetch" href="/blog/assets/js/86.f7b120e4.js"><link rel="prefetch" href="/blog/assets/js/87.a620f73f.js"><link rel="prefetch" href="/blog/assets/js/88.aef154fa.js"><link rel="prefetch" href="/blog/assets/js/89.9f71412f.js"><link rel="prefetch" href="/blog/assets/js/9.820df2c6.js"><link rel="prefetch" href="/blog/assets/js/90.dd797eb4.js"><link rel="prefetch" href="/blog/assets/js/91.2f4cee08.js"><link rel="prefetch" href="/blog/assets/js/92.fcbd90d3.js"><link rel="prefetch" href="/blog/assets/js/93.49088527.js"><link rel="prefetch" href="/blog/assets/js/94.2162a1ba.js"><link rel="prefetch" href="/blog/assets/js/95.69c4c5ba.js"><link rel="prefetch" href="/blog/assets/js/96.70c77a1a.js"><link rel="prefetch" href="/blog/assets/js/97.77ecde0a.js"><link rel="prefetch" href="/blog/assets/js/98.bdec1ab1.js"><link rel="prefetch" href="/blog/assets/js/99.928b66ab.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.0e080af6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.jpg" alt="Yologger's Blog" class="logo"> <span class="site-name can-hide">Yologger's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/post/01_java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/post/02_kotlin/" class="nav-link">
  Kotlin
</a></div><div class="nav-item"><a href="/blog/post/30_spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/blog/post/20_android/" class="nav-link">
  Android
</a></div><div class="nav-item"><a href="/blog/post/50_infra_devops/" class="nav-link">
  Infra/DevOps
</a></div><div class="nav-item"><a href="/blog/post/55_db/" class="nav-link router-link-active">
  DB
</a></div><div class="nav-item"><a href="/blog/post/60_cs/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/post/80_more/" class="nav-link">
  More
</a></div><div class="nav-item"><a href="https://github.com/yologger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/post/01_java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/post/02_kotlin/" class="nav-link">
  Kotlin
</a></div><div class="nav-item"><a href="/blog/post/30_spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/blog/post/20_android/" class="nav-link">
  Android
</a></div><div class="nav-item"><a href="/blog/post/50_infra_devops/" class="nav-link">
  Infra/DevOps
</a></div><div class="nav-item"><a href="/blog/post/55_db/" class="nav-link router-link-active">
  DB
</a></div><div class="nav-item"><a href="/blog/post/60_cs/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/post/80_more/" class="nav-link">
  More
</a></div><div class="nav-item"><a href="https://github.com/yologger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/post/55_db/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Mongo DB</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/post/55_db/02_Mongo DB/210102_start_mongo.html" class="active sidebar-link">Mongo DB 정리</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Elastic Search</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ERD</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h1> <p></p><div class="table-of-contents"><ul><li><a href="#mongo-db-환경설정">Mongo DB 환경설정</a><ul><li><a href="#설치">설치</a></li><li><a href="#서비스-시작">서비스 시작</a></li><li><a href="#서비스-재시작">서비스 재시작</a></li><li><a href="#서비스-종료">서비스 종료</a></li><li><a href="#mongo-db-접속">Mongo DB 접속</a></li></ul></li><li><a href="#mongo-db-사용법">Mongo DB 사용법</a><ul><li><a href="#데이터베이스-목록-확인">데이터베이스 목록 확인</a></li><li><a href="#데이터베이스-생성-사용할-데이터베이스-선택">데이터베이스 생성, 사용할 데이터베이스 선택</a></li><li><a href="#현재-사용-중인-데이터베이스-출력">현재 사용 중인 데이터베이스 출력</a></li><li><a href="#데이터베이스-삭제">데이터베이스 삭제</a></li></ul></li><li><a href="#collection">Collection</a><ul><li><a href="#collection-생성">Collection 생성</a></li><li><a href="#collection-확인">Collection 확인</a></li><li><a href="#collection-삭제">Collection 삭제</a></li></ul></li><li><a href="#document-저장">Document 저장</a><ul><li><a href="#insertone">insertOne()</a></li><li><a href="#insertmany">insertMany()</a></li></ul></li><li><a href="#document-수정">Document 수정</a><ul><li><a href="#updateone">updateOne()</a></li><li><a href="#updatemany">updateMany()</a></li><li><a href="#update">update()</a></li></ul></li><li><a href="#document-삭제">Document 삭제</a><ul><li><a href="#deleteone">deleteOne()</a></li><li><a href="#deletemany">deleteMany()</a></li></ul></li><li><a href="#document-조회">Document 조회</a><ul><li><a href="#find">find()</a><ul><li><a href="#eq-equal">eq (equal)</a></li><li><a href="#ne-not-equal">ne (not equal)</a></li><li><a href="#gt">gt</a></li><li><a href="#gte">gte</a></li><li><a href="#lt">lt</a></li><li><a href="#lte">lte</a></li><li><a href="#in">in</a></li><li><a href="#nin">nin</a></li><li><a href="#and">and</a></li><li><a href="#or">or</a></li></ul></li><li><a href="#findone">findOne()</a></li></ul></li><li><a href="#데이터-타입">데이터 타입</a></li><li><a href="#id-필드">_id 필드</a></li><li><a href="#index">Index</a><ul><li><a href="#index-조회">Index 조회</a></li><li><a href="#단일-필드-index-생성">단일 필드 Index 생성</a></li><li><a href="#복합-필드-index-생성">복합 필드 Index 생성</a></li><li><a href="#index-삭제">Index 삭제</a></li></ul></li><li><a href="#정렬">정렬</a></li><li><a href="#페이징">페이징</a></li><li><a href="#관계-설정">관계 설정</a><ul><li><a href="#임베디드">임베디드</a></li><li><a href="#참조-reference">참조(Reference)</a></li></ul></li><li><a href="#사용자-관리">사용자 관리</a><ul><li><a href="#사용자-조회">사용자 조회</a></li><li><a href="#사용자-생성">사용자 생성</a></li><li><a href="#인증-활성화">인증 활성화</a></li><li><a href="#사용자-인증">사용자 인증</a></li><li><a href="#사용자-삭제">사용자 삭제</a></li></ul></li><li><a href="#mongo-db-cluster-구축">Mongo DB Cluster 구축</a></li><li><a href="#replication">Replication</a></li><li><a href="#sharding">Sharding</a></li><li><a href="#compass">Compass</a></li></ul></div><p></p> <h1 id="mongo-db"><a href="#mongo-db" class="header-anchor">#</a> Mongo DB</h1> <p>기존의 테이블 기반 관계형 데이터베이스 구조가 아닌 <code>JSON Document</code> 기반의 데이터 모델을 사용하는 NoSQL 데이터베이스다.</p> <p><img src="/blog/assets/img/1.b7fcccab.jpeg" alt=""></p> <p><code>Mongo DB</code>는 다음과 같은 특징을 갖는다.</p> <ul><li><code>JSON document</code> 기반의 NoSQL 데이터베이스</li> <li>스키마가 없어 저장되는 데이터의 구조가 자유롭다.</li> <li>외래키 개념이 없어 <code>Embedded</code>방식 또는 <code>Reference</code> 방식으로 관계를 표현한다.</li> <li>조인 개념이 없어 어플리케이션 레벨에서 처리해야한다.</li></ul> <h2 id="mongo-db-환경설정"><a href="#mongo-db-환경설정" class="header-anchor">#</a> Mongo DB 환경설정</h2> <h3 id="설치"><a href="#설치" class="header-anchor">#</a> 설치</h3> <p><code>Mac OS</code>에서는 <code>Homebrew</code>로 Mongo DB를 설치할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew tap mongodb/brew

$ brew install mongodb-community@4.2
</code></pre></div><h3 id="서비스-시작"><a href="#서비스-시작" class="header-anchor">#</a> 서비스 시작</h3> <div class="language- extra-class"><pre class="language-text"><code>$ brew services start mongodb-community@4.2 
</code></pre></div><h3 id="서비스-재시작"><a href="#서비스-재시작" class="header-anchor">#</a> 서비스 재시작</h3> <div class="language- extra-class"><pre class="language-text"><code>$ brew services restart mongodb-community@4.2
</code></pre></div><h3 id="서비스-종료"><a href="#서비스-종료" class="header-anchor">#</a> 서비스 종료</h3> <div class="language- extra-class"><pre class="language-text"><code>$ brew services stop mongodb-community@4.2
</code></pre></div><h3 id="mongo-db-접속"><a href="#mongo-db-접속" class="header-anchor">#</a> Mongo DB 접속</h3> <p><code>mongo</code> 명령어로 Mongo DB에 접속할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ mongo
&gt; 
</code></pre></div><p>원격 접속도 가능하다.</p> <div class="language- extra-class"><pre class="language-text"><code>// mongo [몽고서버_IP]
$ mongo 192.168.0.1
</code></pre></div><p>원격 접속을 하면서 데이터베이스를 선택할 수도 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>// mongo [몽고서버 IP]/[데이터베이스 이름]
$ mongo 192.168.0.1/my_db
</code></pre></div><p>몽고 서버에 인증을 설정했다면 아이디와 패스워드를 인자로 전달하여 접속할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>// mongo -u [사용자 이름] -p [비밀번호] [몽고서버 IP]/[데이터베이스 이름]
$ mongo -u user1 -p 1234 192.168.0.1/my_db
</code></pre></div><h2 id="mongo-db-사용법"><a href="#mongo-db-사용법" class="header-anchor">#</a> Mongo DB 사용법</h2> <h3 id="데이터베이스-목록-확인"><a href="#데이터베이스-목록-확인" class="header-anchor">#</a> 데이터베이스 목록 확인</h3> <p><code>show dbs</code>는 모든 데이터베이스를 출력한다. Mongo DB에 처음 접속하면 세 개의 데이터베이스가 자동으로 생성된다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; show dbs
admin   0.000GB
config  0.000GB
local   0.000GB
</code></pre></div><h3 id="데이터베이스-생성-사용할-데이터베이스-선택"><a href="#데이터베이스-생성-사용할-데이터베이스-선택" class="header-anchor">#</a> 데이터베이스 생성, 사용할 데이터베이스 선택</h3> <p><code>use [데이터베이스 이름]</code> 명령어로 사용할 데이터베이스를 선택할 수 있다. 데이터베이스가 없으면 자동으로 생성한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; use my_db
switched to db my_db
</code></pre></div><h3 id="현재-사용-중인-데이터베이스-출력"><a href="#현재-사용-중인-데이터베이스-출력" class="header-anchor">#</a> 현재 사용 중인 데이터베이스 출력</h3> <p><code>db</code>는 현재 사용 중인 데이터베이스를 출력한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db
my_db
</code></pre></div><h3 id="데이터베이스-삭제"><a href="#데이터베이스-삭제" class="header-anchor">#</a> 데이터베이스 삭제</h3> <p><code>db.dropDatabase()</code>로 현재 데이터베이스를 삭제한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.dropDatabase()
{ &quot;dropped&quot; : &quot;my_db&quot;, &quot;ok&quot; : 1 }
</code></pre></div><h2 id="collection"><a href="#collection" class="header-anchor">#</a> Collection</h2> <p><b><code>Collection</code></b>은 관계형 데이터베이스의 <code>Table</code>에 대응된다.</p> <h3 id="collection-생성"><a href="#collection-생성" class="header-anchor">#</a> Collection 생성</h3> <p><code>db.createCollection(&quot;컬렉션 명&quot;)</code>명령어로 컬렉션을 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.createCollection(&quot;member&quot;);
</code></pre></div><h3 id="collection-확인"><a href="#collection-확인" class="header-anchor">#</a> Collection 확인</h3> <p>데이터베이스에 생성된 Collection은 <code>show collections</code>로 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; show collections
member
</code></pre></div><h3 id="collection-삭제"><a href="#collection-삭제" class="header-anchor">#</a> Collection 삭제</h3> <p><code>db.[Collection 이름].drop()</code>으로 Collection을 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.drop()
true
</code></pre></div><h2 id="document-저장"><a href="#document-저장" class="header-anchor">#</a> Document 저장</h2> <p><b><code>Document</code></b>는 RDBMS의 <code>Row</code>에 해당하며, <b><code>Field</code></b>는 <code>Column</code>에 해당한다.</p> <h3 id="insertone"><a href="#insertone" class="header-anchor">#</a> insertOne()</h3> <p><code>db.&lt;콜렉션이름&gt;.insertOne()</code> 메소드로 Document 한 개를 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.insertOne({ name: &quot;Paul&quot;})

&gt; db.member.insertOne({ name: &quot;John&quot;})
</code></pre></div><p>Mongo DB는 스키마가 정해져있지 않기 때문에 저장되는 데이터 형식이 자유롭다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.insertOne({ name: &quot;monica&quot;, height: 165.5 , createdAt: Date()})

&gt; db.member.insertOne({ name: &quot;rachel&quot;, age: 25, isMarried: false, weight: 60.5 , job: &quot;programmer&quot;})
</code></pre></div><p>Document는 다른 객체를 포함할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.insertOne({ name: &quot;marry&quot;, phone: { name: &quot;iPhone 10&quot;, manufacturer: &quot;Apple&quot; } })
</code></pre></div><p>Document는 배열을 포함할 수도 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.insertOne({ name: &quot;jordan&quot;, children: [&quot;ramos&quot;, &quot;benzema&quot;] })
</code></pre></div><h3 id="insertmany"><a href="#insertmany" class="header-anchor">#</a> insertMany()</h3> <p><code>db.&lt;콜렉션이름&gt;.insertMany()</code> 메소드로 여러 Document를 한꺼번에 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.insertMany([{ name: &quot;messi&quot; }, { name: &quot;ronaldo&quot; }])
</code></pre></div><h2 id="document-수정"><a href="#document-수정" class="header-anchor">#</a> Document 수정</h2> <h3 id="updateone"><a href="#updateone" class="header-anchor">#</a> updateOne()</h3> <p><code>db.&lt;도큐먼트이름&gt;.updateOne()</code>은 도큐먼트 하나를 수정하는데 사용한다.</p> <p><code>$set</code> 옵션으로 도큐먼트 하나의 특정 필드를 수정할 수 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-text"><code>&gt; db.member.find({name : &quot;rachel&quot;}).pretty()
{
	&quot;_id&quot; : ObjectId(&quot;62a294c62ab111058535a22f&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 25,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;
}

&gt; db.member.updateOne({name: &quot;rachel&quot;}, {$set: {&quot;age&quot;: 35}})
{ &quot;acknowledged&quot; : true, &quot;matchedCount&quot; : 1, &quot;modifiedCount&quot; : 1 }

&gt; db.member.find({name: &quot;rachel&quot;}).pretty()
{
	&quot;_id&quot; : ObjectId(&quot;62a294c62ab111058535a22f&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 35,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;
}
</code></pre></div><p>특정 필드를 추가할 수도 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-text"><code>&gt; db.member.find({name: &quot;rachel&quot;}).pretty()
{
	&quot;_id&quot; : ObjectId(&quot;62a294c62ab111058535a22f&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 35,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;
}

&gt; db.member.updateOne({name: &quot;rachel&quot;}, {$set: {&quot;nation&quot;: &quot;USA&quot;}})
{ &quot;acknowledged&quot; : true, &quot;matchedCount&quot; : 1, &quot;modifiedCount&quot; : 1 }

&gt; db.member.find({name: &quot;rachel&quot;}).pretty()
{
	&quot;_id&quot; : ObjectId(&quot;62a294c62ab111058535a22f&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 35,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;,
	&quot;nation&quot; : &quot;USA&quot;
}
</code></pre></div><p><code>$unset</code> 옵션으로 도큐먼트 하나의 특정 필드를 삭제할 수 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-text"><code>&gt; db.member.findOne({&quot;name&quot;: &quot;rachel&quot;})
{
	&quot;_id&quot; : ObjectId(&quot;62a294c62ab111058535a22f&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 35,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;,
	&quot;nation&quot; : &quot;USA&quot;
}

&gt; db.member.updateOne({&quot;name&quot;: &quot;rachel&quot;}, {$unset: {&quot;isMarred&quot;: &quot;false&quot;}})
{ &quot;acknowledged&quot; : true, &quot;matchedCount&quot; : 1, &quot;modifiedCount&quot; : 0 }

&gt; db.member.findOne({&quot;name&quot;: &quot;rachel&quot;})
{
	&quot;_id&quot; : ObjectId(&quot;62a294c62ab111058535a22f&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 35,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;,
	&quot;nation&quot; : &quot;USA&quot;
}
</code></pre></div><h3 id="updatemany"><a href="#updatemany" class="header-anchor">#</a> updateMany()</h3> <p><code>updateMany()</code>으로 여러 도큐먼트를 수정할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.updateMany({}, {$set: {&quot;isMarred&quot;: &quot;false&quot;}})
{ &quot;acknowledged&quot; : true, &quot;matchedCount&quot; : 10, &quot;modifiedCount&quot; : 10 }
</code></pre></div><h3 id="update"><a href="#update" class="header-anchor">#</a> update()</h3> <p><code>update()</code>으로 기존의 도큐먼트를 다른 도큐먼트로 대체할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({name: &quot;Paul&quot;})
{ &quot;_id&quot; : ObjectId(&quot;62a294b22ab111058535a22c&quot;), &quot;name&quot; : &quot;Paul&quot; }

&gt; db.member.update({name: &quot;Paul&quot;}, {name: &quot;Smith&quot;})
WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })

&gt; db.member.find({name: &quot;Paul&quot;})

&gt; db.member.find({name: &quot;Smith&quot;})
{ &quot;_id&quot; : ObjectId(&quot;62a294b22ab111058535a22c&quot;), &quot;name&quot; : &quot;Smith&quot; }
</code></pre></div><p>물론 <code>update()</code>에서도 <code>$set</code>, <code>$unset</code>을 사용할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({&quot;name&quot;: &quot;Smith&quot;})
{ &quot;_id&quot; : ObjectId(&quot;62a294b22ab111058535a22c&quot;), &quot;name&quot; : &quot;Smith&quot;, &quot;isMarred&quot; : &quot;false&quot; }

&gt; db.member.update({&quot;name&quot;: &quot;Smith&quot;}, {$set: {nation: &quot;England&quot;}})
WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })

&gt; db.member.find({&quot;name&quot;: &quot;Smith&quot;})
{ &quot;_id&quot; : ObjectId(&quot;62a294b22ab111058535a22c&quot;), &quot;name&quot; : &quot;Smith&quot;, &quot;isMarred&quot; : &quot;false&quot;, &quot;nation&quot; : &quot;England&quot; }

&gt; db.member.update({&quot;name&quot;: &quot;Smith&quot;}, {$unset: {nation: &quot;England&quot;}})
WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })

&gt; db.member.find({&quot;name&quot;: &quot;Smith&quot;})
{ &quot;_id&quot; : ObjectId(&quot;62a294b22ab111058535a22c&quot;), &quot;name&quot; : &quot;Smith&quot;, &quot;isMarred&quot; : &quot;false&quot; }
</code></pre></div><h2 id="document-삭제"><a href="#document-삭제" class="header-anchor">#</a> Document 삭제</h2> <h3 id="deleteone"><a href="#deleteone" class="header-anchor">#</a> deleteOne()</h3> <p><code>deleteOne()</code>으로 조건에 맞는 Document 하나를 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.deleteOne({name: &quot;messi&quot;});
</code></pre></div><h3 id="deletemany"><a href="#deletemany" class="header-anchor">#</a> deleteMany()</h3> <p><code>deleteMany()</code>로 조건에 맞는 Document 여러 개를 삭제할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.deleteMany({nation: &quot;USA&quot;});
</code></pre></div><p>모든 도큐먼트를 삭제할 수도 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.deleteMany({})
</code></pre></div><h2 id="document-조회"><a href="#document-조회" class="header-anchor">#</a> Document 조회</h2> <h3 id="find"><a href="#find" class="header-anchor">#</a> find()</h3> <p><code>db.콜렉션.find()</code> 메소드로 모든 Document를 조회할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find()
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad77b8d6dabdee5230bef&quot;), &quot;name&quot; : &quot;john&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625adc3d8d6dabdee5230bf6&quot;), &quot;name&quot; : &quot;john&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf0&quot;), &quot;name&quot; : &quot;messi&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf1&quot;), &quot;name&quot; : &quot;ronaldo&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad8698d6dabdee5230bf2&quot;), &quot;name&quot; : &quot;monica&quot;, &quot;age&quot; : 35, &quot;isMarried&quot; : true, &quot;weight&quot; : 50.5, &quot;createdAt&quot; : &quot;Sat Apr 16 2022 23:53:29 GMT+0900 (KST)&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad8ab8d6dabdee5230bf3&quot;), &quot;name&quot; : &quot;rachel&quot;, &quot;age&quot; : 25, &quot;isMarried&quot; : false, &quot;weight&quot; : 60.5, &quot;job&quot; : &quot;programmer&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ada168d6dabdee5230bf4&quot;), &quot;name&quot; : &quot;marry&quot;, &quot;phone&quot; : { &quot;name&quot; : &quot;iPhone 10&quot;, &quot;manufacturer&quot; : &quot;Apple&quot; } }
{ &quot;_id&quot; : ObjectId(&quot;625ada838d6dabdee5230bf5&quot;), &quot;name&quot; : &quot;jordan&quot;, &quot;children&quot; : [ &quot;ramos&quot;, &quot;benzema&quot; ] }
</code></pre></div><p><code>pretty()</code>로 데이터를 보기 좋게 출력할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().pretty()
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad77b8d6dabdee5230bef&quot;), &quot;name&quot; : &quot;john&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf0&quot;), &quot;name&quot; : &quot;messi&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf1&quot;), &quot;name&quot; : &quot;ronaldo&quot; }
{
	&quot;_id&quot; : ObjectId(&quot;625ad8698d6dabdee5230bf2&quot;),
	&quot;name&quot; : &quot;monica&quot;,
	&quot;age&quot; : 35,
	&quot;isMarried&quot; : true,
	&quot;weight&quot; : 50.5,
	&quot;createdAt&quot; : &quot;Sat Apr 16 2022 23:53:29 GMT+0900 (KST)&quot;
}
{
	&quot;_id&quot; : ObjectId(&quot;625ad8ab8d6dabdee5230bf3&quot;),
	&quot;name&quot; : &quot;rachel&quot;,
	&quot;age&quot; : 25,
	&quot;isMarried&quot; : false,
	&quot;weight&quot; : 60.5,
	&quot;job&quot; : &quot;programmer&quot;
}
{
	&quot;_id&quot; : ObjectId(&quot;625ada168d6dabdee5230bf4&quot;),
	&quot;name&quot; : &quot;marry&quot;,
	&quot;phone&quot; : {
		&quot;name&quot; : &quot;iPhone 10&quot;,
		&quot;manufacturer&quot; : &quot;Apple&quot;
	}
}
{
	&quot;_id&quot; : ObjectId(&quot;625ada838d6dabdee5230bf5&quot;),
	&quot;name&quot; : &quot;jordan&quot;,
	&quot;children&quot; : [
		&quot;ramos&quot;,
		&quot;benzema&quot;
	]
}
</code></pre></div><p>다음과 같이 조건을 추가할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({ name: &quot;Paul&quot; })
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
</code></pre></div><h4 id="eq-equal"><a href="#eq-equal" class="header-anchor">#</a> eq (equal)</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({name: {$eq: &quot;john&quot;}})
{ &quot;_id&quot; : ObjectId(&quot;625ad77b8d6dabdee5230bef&quot;), &quot;name&quot; : &quot;john&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625adc3d8d6dabdee5230bf6&quot;), &quot;name&quot; : &quot;john&quot; }
</code></pre></div><h4 id="ne-not-equal"><a href="#ne-not-equal" class="header-anchor">#</a> ne (not equal)</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({name: {$ne: &quot;john&quot;}})
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf0&quot;), &quot;name&quot; : &quot;messi&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf1&quot;), &quot;name&quot; : &quot;ronaldo&quot; }
// ...
</code></pre></div><h4 id="gt"><a href="#gt" class="header-anchor">#</a> gt</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({age: {$gt: 30}})
{ &quot;_id&quot; : ObjectId(&quot;625ad8698d6dabdee5230bf2&quot;), &quot;name&quot; : &quot;monica&quot;, &quot;age&quot; : 35, &quot;isMarried&quot; : true, &quot;weight&quot; : 50.5, &quot;createdAt&quot; : &quot;Sat Apr 16 2022 23:53:29 GMT+0900 (KST)&quot; }
</code></pre></div><h4 id="gte"><a href="#gte" class="header-anchor">#</a> gte</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({age: {$gte: 30}})
</code></pre></div><h4 id="lt"><a href="#lt" class="header-anchor">#</a> lt</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({age: {$lt: 30}})
</code></pre></div><h4 id="lte"><a href="#lte" class="header-anchor">#</a> lte</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({age: {$lte: 30}})
</code></pre></div><h4 id="in"><a href="#in" class="header-anchor">#</a> in</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({name: {$in: [&quot;monica&quot;, &quot;paul&quot;]}})
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad8698d6dabdee5230bf2&quot;), &quot;name&quot; : &quot;monica&quot;, &quot;age&quot; : 35, &quot;isMarried&quot; : true, &quot;weight&quot; : 50.5, &quot;createdAt&quot; : &quot;Sat Apr 16 2022 23:53:29 GMT+0900 (KST)&quot; }
</code></pre></div><h4 id="nin"><a href="#nin" class="header-anchor">#</a> nin</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({name: {$nin: [&quot;monica&quot;, &quot;paul&quot;]}})
</code></pre></div><h4 id="and"><a href="#and" class="header-anchor">#</a> and</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({$and: [{name: &quot;monica&quot;}, {isMarried: true}]})
{ &quot;_id&quot; : ObjectId(&quot;625ad8698d6dabdee5230bf2&quot;), &quot;name&quot; : &quot;monica&quot;, &quot;age&quot; : 35, &quot;isMarried&quot; : true, &quot;weight&quot; : 50.5, &quot;createdAt&quot; : &quot;Sat Apr 16 2022 23:53:29 GMT+0900 (KST)&quot; }
</code></pre></div><h4 id="or"><a href="#or" class="header-anchor">#</a> or</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find({$or: [{name: &quot;paul&quot;}, {isMarried: true}]})
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad8698d6dabdee5230bf2&quot;), &quot;name&quot; : &quot;monica&quot;, &quot;age&quot; : 35, &quot;isMarried&quot; : true, &quot;weight&quot; : 50.5, &quot;createdAt&quot; : &quot;Sat Apr 16 2022 23:53:29 GMT+0900 (KST)&quot; }
</code></pre></div><h3 id="findone"><a href="#findone" class="header-anchor">#</a> findOne()</h3> <p><code>findOne()</code>는 하나의 Document를 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.findOne({ name: &quot;Paul&quot; }) 
</code></pre></div><h2 id="데이터-타입"><a href="#데이터-타입" class="header-anchor">#</a> 데이터 타입</h2> <p><code>필드(Field)</code>에는 기본적으로 <u>자바스크립트의 데이터 타입</u>을 저장할 수 있다. 자바스크립트 외에도 몇 개의 특수한 데이터타입을 저장할 수 있는데 그 중 하나가 각 Document를 구분하기 위한 <code>ObjectId</code>다. 모든 데이터 타입은 <a href="https://www.tutorialspoint.com/mongodb/mongodb_datatype.htm" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 확인할 수 있다.</p> <h2 id="id-필드"><a href="#id-필드" class="header-anchor">#</a> _id 필드</h2> <p>관계형 데이터베이스에는 <code>기본 키(primary key)</code>로 모든 Row를 고유하게 구분한다. <code>Mongo DB</code>도 유사한 개념의 <code>_id</code> 필드로 Document를 고유하게 구분한다. Document를 저장할 때 명시적으로 값을 제공하지 않으면 Mongo DB가 <code>_id</code> 값을 자동으로 생성한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.insert({ name: &quot;paul&quot; })
&gt; db.member.insert({ name: &quot;john&quot; })

&gt; db.member.find({name: {$ne: &quot;john&quot;}})
{ &quot;_id&quot; : ObjectId(&quot;625ad76b8d6dabdee5230bee&quot;), &quot;name&quot; : &quot;paul&quot; }
{ &quot;_id&quot; : ObjectId(&quot;625ad79e8d6dabdee5230bf0&quot;), &quot;name&quot; : &quot;messi&quot; }
</code></pre></div><h2 id="index"><a href="#index" class="header-anchor">#</a> Index</h2> <p>관계형 데이터베이스의 <code>인덱스(Index)</code>를 사용하면 데이터를 빠르게 탐색할 수 있다. Mongo DB도 인덱스를 제공한다.</p> <h3 id="index-조회"><a href="#index-조회" class="header-anchor">#</a> Index 조회</h3> <p><code>db.&lt;콜렉션 이름&gt;.getIndexes()</code> 명령어로 인덱스를 확인할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.getIndexes()
[
	{
		&quot;v&quot; : 2,
		&quot;key&quot; : {
			&quot;_id&quot; : 1
		},
		&quot;name&quot; : &quot;_id_&quot;,
		&quot;ns&quot; : &quot;my_db.member&quot;
	}
]
</code></pre></div><p><code>_id</code> 필드에는 인덱스가 자동으로 생성된다.</p> <h3 id="단일-필드-index-생성"><a href="#단일-필드-index-생성" class="header-anchor">#</a> 단일 필드 Index 생성</h3> <p><code>db.[테이블명].createIndex({ [필드명]: ±1 })</code>로 인덱스를 생성할 수 있다. <code>1</code>은 오름차순, <code>-1</code>은 내림차순으로 인덱스를 생성한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.createIndex({ name: 1 })
{
	&quot;createdCollectionAutomatically&quot; : false,
	&quot;numIndexesBefore&quot; : 1,
	&quot;numIndexesAfter&quot; : 2,
	&quot;ok&quot; : 1
}
</code></pre></div><p>중복된 데이터가 존재하는 필드에는 인덱스를 생성할 수 없다.</p> <h3 id="복합-필드-index-생성"><a href="#복합-필드-index-생성" class="header-anchor">#</a> 복합 필드 Index 생성</h3> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.createIndex({ name: 1, age: 1 })
</code></pre></div><h3 id="index-삭제"><a href="#index-삭제" class="header-anchor">#</a> Index 삭제</h3> <p><code>db.monsters.dropIndex(필드명)</code>으로 인덱스를 삭제할 수 있다.</p> <h2 id="정렬"><a href="#정렬" class="header-anchor">#</a> 정렬</h2> <p><code>sort()</code>를 사용하여 조회한 도큐먼트를 정렬할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().sort({ name: 1 })	// 오름차순 정렬
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().sort({ name: -1 })	// 내림차순 정렬
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().sort({ name: 1, nation: 1 })
</code></pre></div><h2 id="페이징"><a href="#페이징" class="header-anchor">#</a> 페이징</h2> <p><code>limit(n)</code>은 조회할 도큐먼트 개수를 제한할 때 사용한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().limit(10)
</code></pre></div><p><code>skip(n)</code>은 n개를 건너뛰고 그 다음부터 도큐먼트를 조회한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().skip(10)
</code></pre></div><p>페이징은 <code>skip(n)</code>과 <code>limit(n)</code>  메소드를 조합하여 사용할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.member.find().skip(10).limit(10)
</code></pre></div><h2 id="관계-설정"><a href="#관계-설정" class="header-anchor">#</a> 관계 설정</h2> <p>Mongo DB는 관계형 데이터베이스의 외래키 개념이 없다. 따라서 두 가지 방법으로 <code>관계(Relation)</code>를 설정할 수 있다.</p> <h3 id="임베디드"><a href="#임베디드" class="header-anchor">#</a> 임베디드</h3> <p><code>임베디드(Embedded)</code>은 도큐먼트에 다른 도큐먼트를 객체 형태로 가지고 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-text"><code>&gt; db.member.insert({ 
    name: &quot;paul&quot;, 
    posts: [
        { title: &quot;Java&quot;, content: &quot;I love Java.&quot; }, 
        { title: &quot;Kotlin&quot;, content: &quot;Kotlin is fun.&quot; }
    ]
})
WriteResult({ &quot;nInserted&quot; : 1 })
</code></pre></div><div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-text"><code>&gt; db.member.findOne({ name: &quot;paul&quot; })
{
	&quot;_id&quot; : ObjectId(&quot;625afb558d6dabdee5230bf7&quot;),
	&quot;name&quot; : &quot;paul&quot;,
	&quot;posts&quot; : [
		{ &quot;title&quot; : &quot;Java&quot;, &quot;content&quot; : &quot;I love Java.&quot; },
		{ &quot;title&quot; : &quot;Kotlin&quot;, &quot;content&quot; : &quot;Kotlin is fun.&quot; }
	]
}
</code></pre></div><h3 id="참조-reference"><a href="#참조-reference" class="header-anchor">#</a> 참조(Reference)</h3> <p><code>참조(Reference)</code>은 다른 도큐먼트의 참조를 가지고 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br></div><pre class="language-text"><code>&gt; db.post.insert({
    title: &quot;Swift&quot;,
    content: &quot;Swift for iOS&quot;
})

&gt; db.post.insert({
    title: &quot;DevOps&quot;,
    content: &quot;DevOps is useful.&quot;
})
</code></pre></div><div class="language- extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-text"><code>&gt; db.post.find().pretty()
{
	&quot;_id&quot; : ObjectId(&quot;625afcaf8d6dabdee5230bf9&quot;),
	&quot;title&quot; : &quot;Swift&quot;,
	&quot;content&quot; : &quot;Swift for iOS&quot;
}
{
	&quot;_id&quot; : ObjectId(&quot;625afcb48d6dabdee5230bfa&quot;),
	&quot;title&quot; : &quot;DevOps&quot;,
	&quot;content&quot; : &quot;DevOps is useful.&quot;
}
</code></pre></div><div class="language- extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-text"><code>&gt; db.member.insert({
    name: &quot;James&quot;,
    posts: [
        ObjectId(&quot;625afcaf8d6dabdee5230bf9&quot;),
        ObjectId(&quot;625afcb48d6dabdee5230bfa&quot;)
    ]
})
</code></pre></div><h2 id="사용자-관리"><a href="#사용자-관리" class="header-anchor">#</a> 사용자 관리</h2> <p>Mongo DB에 처음 접속하면 인증이 비활성화 되어있기 때문에 누구나 인증없이 데이터베이스 접근할 수 있다. 심지어 원격 접속도 인증이 필요없다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ mongo		// 인증 없이 접속
&gt;
</code></pre></div><p>따라서 관리자와 사용자 계정을 생성하고, 사용자에게 역할을 부여한 후, 인증을 거치도록 구성해야한다.</p> <h3 id="사용자-조회"><a href="#사용자-조회" class="header-anchor">#</a> 사용자 조회</h3> <p><code>show users</code> 명령어를 사용하면 모든 사용자를 조회할 수 있다. Mongo DB에 처음 접속했다면 생성한 계정이 없기 때문에 아무 결과도 출력되지 않는다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; show users 

</code></pre></div><p><code>db.getUsers()</code>를 실행하면 현재 데이터베이스의 모든 사용자를 출력한다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.getUsers()
[ ]
</code></pre></div><h3 id="사용자-생성"><a href="#사용자-생성" class="header-anchor">#</a> 사용자 생성</h3> <p><code>db.createUser()</code>로 사용자를 생성할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.createUser({ 
	user: &quot;&lt;name&gt;&quot;, 
	pwd: &quot;&lt;cleartext password&gt;&quot;, 
	roles: [ 
		{ role: &quot;&lt;role&gt;&quot;, db: &quot;&lt;database&gt;&quot; } | &quot;&lt;role&gt;&quot;, 
		... 
	] 
}
</code></pre></div><p>우선 모든 데이터베이스에 대해 모든 권한을 갖는 <code>root</code> 계정을 생성하자.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; use admin

&gt; db.createUser(
  { 
     user: &quot;root&quot;, 
     pwd: &quot;root&quot;, 
     roles: [ &quot;root&quot; ] 
  }
)
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&gt; show users
{
	&quot;_id&quot; : &quot;admin.root&quot;,
	&quot;userId&quot; : UUID(&quot;999a9d45-85f3-4ad8-abe6-01b6184fa90a&quot;),
	&quot;user&quot; : &quot;root&quot;,
	&quot;db&quot; : &quot;admin&quot;,
	&quot;roles&quot; : [
		{
			&quot;role&quot; : &quot;root&quot;,
			&quot;db&quot; : &quot;admin&quot;
		}
	],
	&quot;mechanisms&quot; : [
		&quot;SCRAM-SHA-1&quot;,
		&quot;SCRAM-SHA-256&quot;
	]
}
</code></pre></div><p>일반 사용자 계정도 생성해보자.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; use my_db

&gt; db.createUser(
  {
    user: &quot;user&quot;,
    pwd: &quot;user&quot;,
    roles: [ { role: &quot;readWrite&quot;, db: &quot;my_db&quot; } ]
  }
)
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&gt; show users
{
	&quot;_id&quot; : &quot;my_db.user&quot;,
	&quot;userId&quot; : UUID(&quot;f4aab7bc-413b-4dd3-b1cf-08a65fbb428d&quot;),
	&quot;user&quot; : &quot;user&quot;,
	&quot;db&quot; : &quot;my_db&quot;,
	&quot;roles&quot; : [
		{
			&quot;role&quot; : &quot;readWrite&quot;,
			&quot;db&quot; : &quot;my_db&quot;
		}
	],
	&quot;mechanisms&quot; : [
		&quot;SCRAM-SHA-1&quot;,
		&quot;SCRAM-SHA-256&quot;
	]
}
</code></pre></div><h3 id="인증-활성화"><a href="#인증-활성화" class="header-anchor">#</a> 인증 활성화</h3> <p>Mongo DB는 기본적으로 인증없이 접근할 수 있다. 인증을 활성화하려면 설정 파일을 수정해야한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ vim /usr/local/etc/mongod.conf
</code></pre></div><p><code>mongod.conf</code>에 다음 코드를 추가한다.</p> <div class="language- extra-class"><pre class="language-text"><code>security:
  authorization: enabled
</code></pre></div><p>설정파일을 수정한 후 MongoDB를 재시작한다.</p> <div class="language- extra-class"><pre class="language-text"><code>$ brew services restart mongodb-community@4.2
</code></pre></div><h3 id="사용자-인증"><a href="#사용자-인증" class="header-anchor">#</a> 사용자 인증</h3> <p>먼저 인증없이 Mongo DB에 접속해보자.</p> <div class="language-shellsession extra-class"><pre class="language-shellsession"><code><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">mongo  </span></span>
<span class="token output">MongoDB shell version v4.2.19
connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { &quot;id&quot; : UUID(&quot;5cd65398-d599-465d-a384-2f9a51e002a3&quot;) }
MongoDB server version: 4.2.1
</span></code></pre></div><p>Mongo DB와의 세션은 연결되었으나 인증은 진행되지 않았다. 따라서 데이터베이스나 테이블 조회도 불가능하다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; show databases;
// 결과 없음
</code></pre></div><p><code>db.auth()</code>를 사용하면 인증을 할 수 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; db.auth(&quot;user&quot;, &quot;user&quot;)
1

&gt; show databases;
my_db  0.000GB
</code></pre></div><p>다음과 같이 Mongo DB와의 세션을 연결할 때 사용자, 비밀번호 정보를 전달할 수도 있다.</p> <div class="language- extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-text"><code>$ mongo -u &quot;user&quot; -authenticationDatabase &quot;my_db&quot;
MongoDB shell version v4.2.19
Enter password: &lt;USER_PASSWORD&gt;
connecting to: mongodb://127.0.0.1:27017/?authSource=my_db&amp;compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { &quot;id&quot; : UUID(&quot;6cfc239f-8b86-48a2-89b6-8fe9dbb62353&quot;) }
MongoDB server version: 4.2.19

&gt; show databases;
my_db  0.000GB
</code></pre></div><p>루트 계정은 <code>db.auth()</code>로 접속할 수 없으며 위와 같은 방법으로 접속해야한다.</p> <div class="language-shellsession extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-shellsession"><code><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">mongo -u <span class="token string">&quot;root&quot;</span></span></span>
<span class="token output">MongoDB shell version v4.2.19
Enter password: &lt;ROOT_PASSWORD&gt;
connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { &quot;id&quot; : UUID(&quot;47d48100-9172-4187-8d5b-6a7944a2e055&quot;) }
MongoDB server version: 4.2.19
---
Enable MongoDB's free cloud-based monitoring service, which will then receive and display
metrics about your deployment (disk utilization, CPU, operation statistics, etc).

The monitoring data will be available on a MongoDB website with a unique URL accessible to you
and anyone you share the URL with. MongoDB may use this information to make product
improvements and to suggest MongoDB products and deployment options to you.

To enable free monitoring, run the following command: db.enableFreeMonitoring()
To permanently disable this reminder, run the following command: db.disableFreeMonitoring()
---

&gt; show databases;
admin   0.000GB
config  0.000GB
local   0.000GB
my_db   0.000GB
mydb    0.000GB
</span></code></pre></div><h3 id="사용자-삭제"><a href="#사용자-삭제" class="header-anchor">#</a> 사용자 삭제</h3> <p><code>db.dropUser()</code>는 특정 사용자를 삭제하며, <code>db.dropAllUsers()</code>로 모든 사용자를 삭제할 수 있다.</p> <h2 id="mongo-db-cluster-구축"><a href="#mongo-db-cluster-구축" class="header-anchor">#</a> Mongo DB Cluster 구축</h2> <div class="custom-block warning"><p class="custom-block-title">Notification</p> <p>준비 중인 컨텐츠입니다.</p></div> <h2 id="replication"><a href="#replication" class="header-anchor">#</a> Replication</h2> <div class="custom-block warning"><p class="custom-block-title">Notification</p> <p>준비 중인 컨텐츠입니다.</p></div> <h2 id="sharding"><a href="#sharding" class="header-anchor">#</a> Sharding</h2> <div class="custom-block warning"><p class="custom-block-title">Notification</p> <p>준비 중인 컨텐츠입니다.</p></div> <h2 id="compass"><a href="#compass" class="header-anchor">#</a> Compass</h2> <p><code>Compass</code>는 Mongo DB를 위한 GUI database clinet다. <a href="https://www.mongodb.com/try/download/compass" target="_blank" rel="noopener noreferrer">이 곳<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에서 다운받을 수 있다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/post/55_db/01_MySQL/210113_recovery.html" class="prev">
        MYSQL - Recovery
      </a></span> <span class="next"><a href="/blog/post/55_db/03_Redis/220410_start_redis.html">
        Redis 정리
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.32362dc0.js" defer></script><script src="/blog/assets/js/3.8795c9a2.js" defer></script><script src="/blog/assets/js/148.945a5b62.js" defer></script>
  </body>
</html>
